"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[658],{3658:(te,Z,r)=>{r.r(Z),r.d(Z,{SettingsModule:()=>ee});var u=r(4755),a=r(9401),y=r(9812),J=r(5543),e=r(2223),m=r(5855),b=r(8784),T=r(7579),f=r(8675),L=r(9300),S=r(4004),h=r(2722),O=r(9841),A=r(5698),G=r(8603),d=r(8783),c=r(4133),x=r(9124),p=r(9129);const Q=["unsavedChangesModal"];let N=(()=>{class t{set openModal(n){n&&!this.modalOpen()?this.modalOpen.set(!0):!1===n&&this.modalOpen()&&this.modalOpen.set(!1)}constructor(){this.afterClosed=new e.vpe,this.modalOpen=(0,e.tdS)(!1)}accept(){this.modalOpen.set(!1),this.afterClosed.emit(!0)}decline(){this.modalOpen.set(!1),this.afterClosed.emit(!1)}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-unsaved-changes-dialog"]],viewQuery:function(o,s){if(1&o&&e.Gf(Q,5,e.SBq),2&o){let i;e.iGM(i=e.CRH())&&(s.modal=i.first)}},inputs:{openModal:"openModal"},outputs:{afterClosed:"afterClosed"},standalone:!0,features:[e.jDz],decls:12,vars:1,consts:[[1,"modal","modal-bottom","sm:modal-middle",3,"open"],["unsavedChangesModal",""],[1,"modal-box"],["translate","",1,"font-bold","text-lg"],["translate","",1,"text-sm","my-3"],[1,"modal-action","gap-3"],["translate","",1,"btn","btn-primary",3,"click"],["translate","",1,"btn",3,"click"]],template:function(o,s){1&o&&(e.TgZ(0,"dialog",0,1)(2,"div",2)(3,"h1",3),e._uU(4,"MODAL.unsavedChangesTitle"),e.qZA(),e.TgZ(5,"p",4),e._uU(6," MODAL.unsavedChangesParagraph "),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return s.accept()}),e._uU(9,"BUTTONS.confirm"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return s.decline()}),e._uU(11,"BUTTONS.goBack"),e.qZA()()()()),2&o&&e.Q6J("open",s.modalOpen())},dependencies:[u.ez,p.aw,p.Pi]})}return t})();var F=r(4367);function U(t,l){if(1&t&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"proper"),e.ALo(3,"translate"),e.qZA()),2&t){const n=l.$implicit;e.Q6J("value",n.value),e.xp6(1),e.Oqu(e.lcZ(2,2,e.lcZ(3,4,"THEMES."+n.key)))}}let E=(()=>{class t{constructor(){this.themes=c.SJ}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-theme-selector"]],inputs:{group:"group",controlName:"controlName"},decls:6,vars:5,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.theme"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,U,4,6,"option",3),e.ALo(5,"keyvalue"),e.qZA()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Q6J("formControlName",s.controlName),e.xp6(1),e.Q6J("ngForOf",e.lcZ(5,3,s.themes)))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,p.Pi,u.Nd,F.w,p.X$]})}return t})();function k(t,l){if(1&t&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(e.lcZ(2,2,"LANGUAGES."+n))}}let H=(()=>{class t{constructor(){this.languages=c.D}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-language-selector"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lang"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,k,3,4,"option",3),e.qZA()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Q6J("formControlName",s.controlName),e.xp6(1),e.Q6J("ngForOf",s.languages))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,p.Pi,p.X$]})}return t})();function $(t,l){1&t&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOn"),e.qZA())}function D(t,l){1&t&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOff"),e.qZA())}let w=(()=>{class t{constructor(){this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new T.x}ngOnInit(){const n=this.group.get(this.controlName);n.valueChanges.pipe((0,h.R)(this.onDestroy$),(0,f.O)(n.value)).subscribe(o=>this.isEnabled.set(o))}ngOnDestroy(){this.onDestroy$.next()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-wake-lock-enabled"]],inputs:{group:"group",controlName:"controlName"},decls:8,vars:4,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"cursor-pointer","label","bg-base-100","rounded-lg","ps-5","pe-3","py-4"],["class","label-text me-2","translate","",4,"ngIf","ngIfElse"],["isDisabledLabel",""],["type","checkbox",1,"checkbox","checkbox-primary",3,"formControlName"],["translate","",1,"label-text","me-2"]],template:function(o,s){if(1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.wakelock"),e.qZA(),e.TgZ(3,"label",2),e.YNc(4,$,2,0,"span",3),e.YNc(5,D,2,0,"ng-template",null,4,e.W1O),e._UZ(7,"input",5),e.qZA()()),2&o){const i=e.MAs(6);e.Q6J("formGroup",s.group),e.xp6(4),e.Q6J("ngIf",s.isEnabled())("ngIfElse",i),e.xp6(3),e.Q6J("formControlName",s.controlName)}},dependencies:[u.O5,a.Wl,a.JJ,a.JL,a.sg,a.u,p.Pi]})}return t})();function Y(t,l){if(1&t&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(e.lcZ(2,2,"TEXT_SIZE."+n))}}let _=(()=>{class t{constructor(){this.availableTextSizes=c.xQ,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new T.x}ngOnInit(){const n=this.group.get(this.controlName);n.valueChanges.pipe((0,h.R)(this.onDestroy$),(0,f.O)(n.value)).subscribe(o=>this.isEnabled.set(o))}ngOnDestroy(){this.onDestroy$.next()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-text-size"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.textSize"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,Y,3,4,"option",3),e.qZA()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Q6J("formControlName",s.controlName),e.xp6(1),e.Q6J("ngForOf",s.availableTextSizes))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,p.Pi,p.X$]})}return t})();function z(t,l){if(1&t&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&t){const n=l.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(e.lcZ(2,2,"LINE_HEIGHT."+n))}}let I=(()=>{class t{constructor(){this.availableHeights=c.JA,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new T.x}ngOnInit(){const n=this.group.get(this.controlName);n.valueChanges.pipe((0,h.R)(this.onDestroy$),(0,f.O)(n.value)).subscribe(o=>this.isEnabled.set(o))}ngOnDestroy(){this.onDestroy$.next()}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-line-height"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lineHeight"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,z,3,4,"option",3),e.qZA()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Q6J("formControlName",s.controlName),e.xp6(1),e.Q6J("ngForOf",s.availableHeights))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,p.Pi,p.X$]})}return t})(),q=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-render-history"]],inputs:{group:"group",controlName:"controlName"},decls:13,vars:2,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],["type","range","max","15","min","0",1,"range",3,"formControlName"],[1,"w-full","flex","justify-between","text-xs","px-2"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.renderHistory"),e.qZA(),e._UZ(3,"input",2),e.TgZ(4,"div",3)(5,"span"),e._uU(6,"0"),e.qZA(),e.TgZ(7,"span"),e._uU(8,"5"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"10"),e.qZA(),e.TgZ(11,"span"),e._uU(12,"15"),e.qZA()()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Q6J("formControlName",s.controlName))},dependencies:[a.Fj,a.eT,a.JJ,a.JL,a.sg,a.u,p.Pi]})}return t})();function B(t,l){if(1&t&&(e.TgZ(0,"option",4),e._uU(1),e.qZA()),2&t){const n=l.$implicit;e.Q6J("value",n.key),e.xp6(1),e.Oqu(n.key)}}let M=(()=>{class t{constructor(){this.fontFamilies=c.Yx}static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-font-family-selector"]],inputs:{group:"group",controlName:"controlName"},decls:6,vars:7,consts:[[1,"form-control",3,"formGroup"],[1,"text-accent","label"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"Font"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,B,2,2,"option",3),e.ALo(5,"keyvalue"),e.qZA()()),2&o&&(e.Q6J("formGroup",s.group),e.xp6(3),e.Tol("select select-lg mt-1 w-full "+s.fontFamilies.get(s.group.controls[s.controlName].value)),e.Q6J("formControlName",s.controlName),e.xp6(1),e.Q6J("ngForOf",e.lcZ(5,5,s.fontFamilies)))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,u.Nd]})}return t})();function X(t,l){1&t&&(e.TgZ(0,"div",22),e._uU(1,"You must accept cookies in order to save settings."),e.qZA())}function V(t,l){if(1&t&&(e.TgZ(0,"div",20),e._uU(1," SETTINGS.p1 "),e.qZA()),2&t){const n=e.oxw();e.Q6J("classList",n.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}function P(t,l){if(1&t&&(e.TgZ(0,"div",20),e._uU(1," SETTINGS.p2 "),e.qZA()),2&t){const n=e.oxw();e.Q6J("classList",n.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}function R(t,l){if(1&t&&(e.TgZ(0,"div",20),e._uU(1," SETTINGS.p3 "),e.qZA()),2&t){const n=e.oxw();e.Q6J("classList",n.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}const j=[{path:"",component:(()=>{class t{constructor(n,o,s,i,g,C){this.fb=n,this.store=o,this.renderer=s,this.el=i,this.router=g,this.translate=C,this.modalClosed$=new T.x,this.onDestroy$=new T.x,this.currentTheme=(0,m.O4)(this.store.select(d.FS)),this.language=(0,m.O4)(this.store.select(d.BX)),this.wakeLockEnabled=(0,m.O4)(this.store.select(d.VL)),this.currentTextSize=(0,m.O4)(this.store.select(d.MO)),this.currentLineHeight=(0,m.O4)(this.store.select(d.wx)),this.renderHistory=(0,m.O4)(this.store.select(d.or)),this.fontFamily=(0,m.O4)(this.store.select(d.LT)),this.formGroup=this.fb.group({theme:this.fb.control(this.currentTheme()),lang:this.fb.control(this.language()),font:this.fb.control(this.fontFamily()),wakelock:this.fb.control(this.wakeLockEnabled()),renderHistory:this.fb.control(this.renderHistory()),textSize:this.fb.control(this.currentTextSize()),lineHeight:this.fb.control(this.currentLineHeight())}),this.renderHistoryFormValue=(0,m.O4)(this.formGroup.controls.renderHistory.valueChanges.pipe((0,f.O)(this.renderHistory()),(0,L.h)(v=>null!==v&&!isNaN(v)))),this.acceptedCookies=(0,m.O4)(this.store.pipe((0,b.Ys)(G.hp),(0,S.U)(v=>v.cookiesAccepted))),this.classList=(0,e.tdS)(`recognized-text ${this.currentTextSize()} ${this.currentLineHeight()} ${c.Yx.get(this.fontFamily())}`)}ngOnInit(){this.formGroup.get("theme")?.valueChanges.pipe((0,h.R)(this.onDestroy$)).subscribe(i=>{i&&this.renderer.setAttribute(this.el.nativeElement,"data-theme",i)}),this.formGroup.get("lang")?.valueChanges.pipe((0,h.R)(this.onDestroy$)).subscribe(i=>{i&&this.translate.use(i).subscribe(()=>{})});const n=this.formGroup.get("textSize").valueChanges.pipe((0,f.O)(this.currentTextSize())),o=this.formGroup.get("lineHeight").valueChanges.pipe((0,f.O)(this.currentLineHeight())),s=this.formGroup.get("font").valueChanges.pipe((0,f.O)(this.fontFamily()));(0,O.a)([n,o,s]).pipe((0,h.R)(this.onDestroy$)).subscribe(([i,g,C])=>{i&&g&&this._updateClassList(i,g,C)})}ngOnDestroy(){this.formGroup.dirty&&this.translate.use(this.language()),this.onDestroy$.next()}canDeactivate(){return!this.formGroup.dirty||(this.showUnsavedChangesModal=!0,this.modalClosed$.asObservable().pipe((0,A.q)(1)))}modalClosed(n){this.showUnsavedChangesModal=!1,this.modalClosed$.next(n)}saveSettings(){const n=this.formGroup.get("theme").value;this.store.dispatch(c.Vp.setTheme({theme:n}));const o=this.formGroup.get("lang").value;this.store.dispatch(c.Vp.setLanguage({language:o}));const s=this.formGroup.get("wakelock").value;this.store.dispatch(c.Vp.updateWakeLockEnabled({enabled:s}));const i=this.formGroup.get("textSize").value;this.store.dispatch(c.Vp.setTextSize({size:i}));const g=this.formGroup.get("lineHeight").value;this.store.dispatch(c.Vp.setLineHeight({height:g}));const C=this.formGroup.get("renderHistory").value;this.store.dispatch(c.Vp.setRenderHistory({count:C}));const v=this.formGroup.get("font").value;return this.store.dispatch(c.Vp.setFontFamily({font:v})),this.formGroup.markAsPristine(),this.router.navigate([""]),!1}_updateClassList(n,o,s){let i=`recognized-text ${n} ${o}`;s&&(i+=` ${c.Yx.get(s)}`),this.classList.set(i)}static#e=this.\u0275fac=function(o){return new(o||t)(e.Y36(a.qu),e.Y36(b.yh),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(y.F0),e.Y36(p.sK))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["app-settings"]],decls:30,vars:15,consts:[[1,"flex","basis-full","items-stretch","justify-center","bg-base-300"],[1,"flex","flex-col","basis-full","p-3","sm:p-6","gap-3","sm:gap-12","max-w-4xl",3,"formGroup","submit"],[1,"basis-full","grid","sm:grid-cols-1","md:grid-cols-2","gap-3","sm:gap-12"],["controlName","theme",3,"group"],["controlName","lang",3,"group"],["controlName","font",3,"group"],["controlName","wakelock",3,"group"],["controlName","renderHistory",3,"group"],[1,"grid","grid-cols-2","gap-3"],["controlName","textSize",3,"group"],["controlName","lineHeight",3,"group"],[1,"flex","w-full","justify-end","items-center","gap-1","sm:gap-3"],["class","text-error text-sm",4,"ngIf"],["translate","","type","button","routerLink","..",1,"btn","btn-ghost","rounded-xl"],["type","submit","translate","",1,"btn","btn-primary","rounded-xl",3,"disabled"],[1,"form-control","overflow-y-auto"],[1,"label"],["translate","",1,"text-accent"],[1,"bg-base-100","text-base-content","font-raleway","p-6","gap-3","overflow-hidden","rounded-lg"],["translate","",3,"classList",4,"ngIf"],["translate","",3,"classList"],[3,"openModal","afterClosed"],[1,"text-error","text-sm"]],template:function(o,s){1&o&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return s.saveSettings()}),e.TgZ(2,"div",2)(3,"div"),e._UZ(4,"app-theme-selector",3)(5,"app-language-selector",4)(6,"app-font-family-selector",5)(7,"app-wake-lock-enabled",6)(8,"app-render-history",7),e.TgZ(9,"div",8),e._UZ(10,"app-text-size",9)(11,"app-line-height",10),e.qZA()(),e.TgZ(12,"div")(13,"div",11),e.YNc(14,X,2,0,"div",12),e.TgZ(15,"button",13),e._uU(16," BUTTONS.cancel "),e.qZA(),e.TgZ(17,"button",14),e._uU(18," BUTTONS.saveAndClose "),e.qZA()(),e.TgZ(19,"div",15)(20,"div",16)(21,"label",17),e._uU(22,"SETTINGS.t1"),e.qZA()(),e.TgZ(23,"div",18),e.YNc(24,V,2,3,"div",19),e.YNc(25,P,2,3,"div",19),e.YNc(26,R,2,3,"div",19),e.TgZ(27,"div",20),e._uU(28," SETTINGS.p4 "),e.qZA()()()()()()(),e.TgZ(29,"app-unsaved-changes-dialog",21),e.NdJ("afterClosed",function(g){return s.modalClosed(g)}),e.qZA()),2&o&&(e.xp6(1),e.Q6J("formGroup",s.formGroup),e.xp6(3),e.Q6J("group",s.formGroup),e.xp6(1),e.Q6J("group",s.formGroup),e.xp6(1),e.Q6J("group",s.formGroup),e.xp6(1),e.Q6J("group",s.formGroup),e.xp6(1),e.Q6J("group",s.formGroup),e.xp6(2),e.Q6J("group",s.formGroup),e.xp6(1),e.Q6J("group",s.formGroup),e.xp6(3),e.Q6J("ngIf",!s.acceptedCookies()),e.xp6(3),e.Q6J("disabled",!1===s.acceptedCookies()||s.formGroup.pristine),e.xp6(7),e.Q6J("ngIf",s.renderHistoryFormValue()>0),e.xp6(1),e.Q6J("ngIf",s.renderHistoryFormValue()>1),e.xp6(1),e.Q6J("ngIf",s.renderHistoryFormValue()>2),e.xp6(1),e.Q6J("classList",s.classList()+" live pt-3"),e.xp6(2),e.Q6J("openModal",s.showUnsavedChangesModal))},dependencies:[u.O5,a._Y,a.JL,a.sg,y.rH,p.Pi,N,E,H,w,_,I,q,M],data:{animation:[(0,x.QQ)(),(0,x.QP)()]}})}return t})(),canDeactivate:[(t,l,n,o)=>t.canDeactivate?t.canDeactivate():confirm("You have unsaved changes, are you sure you want to leave?")]}];var W=r(9507),K=r(4410);let ee=(()=>{class t{static#e=this.\u0275fac=function(o){return new(o||t)};static#t=this.\u0275mod=e.oAB({type:t});static#o=this.\u0275inj=e.cJS({imports:[u.ez,J.e,a.UX,y.Bz.forChild(j),W.sQ.forFeature([K.t]),p.aw.forChild({extend:!0}),N]})}return t})()}}]);