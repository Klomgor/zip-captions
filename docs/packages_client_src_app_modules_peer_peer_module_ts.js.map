{"version":3,"file":"packages_client_src_app_modules_peer_peer_module_ts.js","mappings":"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B;EACAC,WAAW,EAAE,CAAC;EACdz9D,cAAc,EAAE;AACpB,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACO,MAAM/D,MAAM,SAASmtC,iEAAO,CAAC;EAChC;AACJ;AACA;EACIxvD,WAAWA,CAAC+kE,EAAE,EAAEke,GAAG,EAAEvxB,IAAI,EAAE;IACvB,KAAK,EAAE;IACP;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;IACQ,IAAI,CAACjoD,SAAS,GAAG,KAAK;IACtB;AACR;AACA;AACA;IACQ,IAAI,CAACq6E,SAAS,GAAG,KAAK;IACtB;AACR;AACA;IACQ,IAAI,CAACC,aAAa,GAAG,EAAE;IACvB;AACR;AACA;IACQ,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB;AACR;AACA;AACA;AACA;AACA;IACQ,IAAI,CAACrL,MAAM,GAAG,EAAE;IAChB;AACR;AACA;AACA;IACQ,IAAI,CAACsL,SAAS,GAAG,CAAC;IAClB,IAAI,CAACC,GAAG,GAAG,CAAC;IACZ,IAAI,CAACC,IAAI,GAAG,CAAC,CAAC;IACd,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC;IACf,IAAI,CAACrf,EAAE,GAAGA,EAAE;IACZ,IAAI,CAACke,GAAG,GAAGA,GAAG;IACd,IAAIvxB,IAAI,IAAIA,IAAI,CAAC2yB,IAAI,EAAE;MACnB,IAAI,CAACA,IAAI,GAAG3yB,IAAI,CAAC2yB,IAAI;IACzB;IACA,IAAI,CAACC,KAAK,GAAG13D,MAAM,CAAC0hB,MAAM,CAAC,CAAC,CAAC,EAAEojB,IAAI,CAAC;IACpC,IAAI,IAAI,CAACqT,EAAE,CAACgd,YAAY,EACpB,IAAI,CAAC7uE,IAAI,EAAE;EACnB;EACA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACI,IAAI7B,YAAYA,CAAA,EAAG;IACf,OA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","sources":["./packages/client/src/app/effects/obs.effects.ts","./packages/client/src/app/effects/peer.effects.ts","./packages/client/src/app/guards/active-stream/active-stream.guard.ts","./packages/client/src/app/modules/peer/components/accept-peer-connections-modal/accept-peer-connections-modal.component.ts","./packages/client/src/app/modules/peer/components/accept-peer-connections-modal/accept-peer-connections-modal.component.html","./packages/client/src/app/modules/peer/components/broadcast-render/broadcast-render.component.ts","./packages/client/src/app/modules/peer/components/broadcast-render/broadcast-render.component.html","./packages/client/src/app/modules/peer/components/broadcast-room/broadcast-room.component.ts","./packages/client/src/app/modules/peer/components/broadcast-room/broadcast-room.component.html","./packages/client/src/app/modules/peer/components/connect-obs/connect-obs.component.ts","./packages/client/src/app/modules/peer/components/connect-obs/connect-obs.component.html","./packages/client/src/app/modules/peer/components/connected-peer-count-chip/connected-peer-count-chip.component.ts","./packages/client/src/app/modules/peer/components/connected-peer-count-chip/connected-peer-count-chip.component.html","./packages/client/src/app/modules/peer/components/end-broadcast/end-broadcast.component.ts","./packages/client/src/app/modules/peer/components/end-broadcast/end-broadcast.component.html","./packages/client/src/app/modules/peer/components/join-code/join-code.component.ts","./packages/client/src/app/modules/peer/components/join-code/join-code.component.html","./packages/client/src/app/modules/peer/components/leave-session/leave-session.component.ts","./packages/client/src/app/modules/peer/components/leave-session/leave-session.component.html","./packages/client/src/app/modules/peer/components/obs-connection-status-chip/obs-connection-status-chip.component.ts","./packages/client/src/app/modules/peer/components/obs-connection-status-chip/obs-connection-status-chip.component.html","./packages/client/src/app/modules/peer/components/peer-landing/peer-landing.component.ts","./packages/client/src/app/modules/peer/components/peer-landing/peer-landing.component.html","./packages/client/src/app/modules/peer/components/peer-server-status-chip/peer-server-status-chip.component.ts","./packages/client/src/app/modules/peer/components/peer-server-status-chip/peer-server-status-chip.component.html","./packages/client/src/app/modules/peer/components/room-id/room-id.component.ts","./packages/client/src/app/modules/peer/components/room-id/room-id.component.html","./packages/client/src/app/modules/peer/components/socket-server-status-chip/socket-server-status-chip.component.ts","./packages/client/src/app/modules/peer/components/socket-server-status-chip/socket-server-status-chip.component.html","./packages/client/src/app/modules/peer/components/stream-captions/stream-captions.component.ts","./packages/client/src/app/modules/peer/components/stream-captions/stream-captions.component.html","./packages/client/src/app/modules/peer/components/third-party-connections/third-party-connections.component.ts","./packages/client/src/app/modules/peer/components/third-party-connections/third-party-connections.component.html","./packages/client/src/app/modules/peer/components/view-broadcast/view-broadcast.component.ts","./packages/client/src/app/modules/peer/components/view-broadcast/view-broadcast.component.html","./packages/client/src/app/modules/peer/peer-routing.module.ts","./packages/client/src/app/modules/peer/peer.module.ts","./packages/client/src/app/modules/peer/services/peer.service.ts","./packages/client/src/app/services/cache/cache.service.ts","./packages/client/src/app/services/obs-connection/obs-connection.service.ts","./packages/client/src/app/standalone/socket-debug/socket-debug.component.ts","./packages/client/src/app/standalone/socket-debug/socket-debug.component.html","./node_modules/crypto-js/core.js","./node_modules/crypto-js/enc-base64.js","./node_modules/crypto-js/sha256.js","./node_modules/debug/src/browser.js","./node_modules/debug/src/common.js","./node_modules/isomorphic-ws/browser.js","./node_modules/ms/index.js","./node_modules/obs-websocket-js/node_modules/eventemitter3/index.js","./node_modules/peerjs-js-binarypack/lib/binarypack.js","./node_modules/peerjs-js-binarypack/lib/bufferbuilder.js","./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","./node_modules/rxjs/dist/esm/internal/observable/interval.js","./node_modules/rxjs/dist/esm/internal/operators/takeWhile.js","./node_modules/sdp/sdp.js","./node_modules/webrtc-adapter/src/js/adapter_core.js","./node_modules/webrtc-adapter/src/js/adapter_factory.js","./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","./node_modules/webrtc-adapter/src/js/common_shim.js","./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","./node_modules/webrtc-adapter/src/js/utils.js","ignored|/Users/james/Documents/zip-captions/node_modules/crypto-js|crypto","./node_modules/@socket.io/component-emitter/index.mjs","./node_modules/engine.io-client/build/esm/contrib/has-cors.js","./node_modules/engine.io-client/build/esm/contrib/parseqs.js","./node_modules/engine.io-client/build/esm/contrib/parseuri.js","./node_modules/engine.io-client/build/esm/contrib/yeast.js","./node_modules/engine.io-client/build/esm/globalThis.browser.js","./node_modules/engine.io-client/build/esm/index.js","./node_modules/engine.io-client/build/esm/socket.js","./node_modules/engine.io-client/build/esm/transport.js","./node_modules/engine.io-client/build/esm/transports/index.js","./node_modules/engine.io-client/build/esm/transports/polling.js","./node_modules/engine.io-client/build/esm/transports/websocket-constructor.browser.js","./node_modules/engine.io-client/build/esm/transports/websocket.js","./node_modules/engine.io-client/build/esm/transports/webtransport.js","./node_modules/engine.io-client/build/esm/transports/xmlhttprequest.browser.js","./node_modules/engine.io-client/build/esm/util.js","./node_modules/engine.io-parser/build/esm/commons.js","./node_modules/engine.io-parser/build/esm/contrib/base64-arraybuffer.js","./node_modules/engine.io-parser/build/esm/decodePacket.browser.js","./node_modules/engine.io-parser/build/esm/encodePacket.browser.js","./node_modules/engine.io-parser/build/esm/index.js","./node_modules/ngx-clipboard/fesm2020/ngx-clipboard.mjs","./node_modules/ngx-socket-io/fesm2020/ngx-socket-io.mjs","./node_modules/ngx-window-token/fesm2020/ngx-window-token.mjs","./node_modules/obs-websocket-js/dist/json.modern.js","./node_modules/obs-websocket-js/node_modules/eventemitter3/index.mjs","./node_modules/peerjs/dist/bundler.mjs","./node_modules/socket.io-client/build/esm/contrib/backo2.js","./node_modules/socket.io-client/build/esm/index.js","./node_modules/socket.io-client/build/esm/manager.js","./node_modules/socket.io-client/build/esm/on.js","./node_modules/socket.io-client/build/esm/socket.js","./node_modules/socket.io-client/build/esm/url.js","./node_modules/socket.io-parser/build/esm/binary.js","./node_modules/socket.io-parser/build/esm/index.js","./node_modules/socket.io-parser/build/esm/is-binary.js","./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { ObsActions } from '../actions/obs.actions';\nimport { ObsConnectionService } from '../services/obs-connection/obs-connection.service';\nimport { catchError, map, of, switchMap, tap } from 'rxjs';\n\n@Injectable()\nexport class ObsEffects {\n  constructor(private actions$: Actions,\n              private obsService: ObsConnectionService) {}\n\n  connectServer$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(ObsActions.connect),\n      switchMap((props) => this.obsService.connect(props).pipe(\n        // Response handling must be piped from the observable emitted by the service, or failures will result in the effect not be triggered subsequently\n        map(() => ObsActions.connectSuccess()),\n        catchError((err:any) => of(ObsActions.connectFailure({error: err.message || 'Connection Failed for unknown reason'}))))\n      )\n    )\n  )\n\n  disconnectServer$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(ObsActions.disconnect),\n      switchMap(() => this.obsService.disconnect().pipe(\n        // Response handling must be piped from the observable emitted by the service, or failures will result in the effect not be triggered subsequently\n        map(() => ObsActions.disconnectSuccess()),\n        catchError((err: any) => of(ObsActions.disconnectFailure({error: err.message || 'Disconnect Failed for unknown reason'}))),\n      )),\n    )\n  )\n}","import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { catchError, map, of, switchMap } from 'rxjs';\nimport { PeerActions } from '../actions/peer.actions';\nimport { PeerService } from '../modules/peer/services/peer.service';\n\n\n@Injectable()\nexport class PeerEffects {\n  constructor(private actions$: Actions,\n              private peerService: PeerService) {}\n\n  connectSocketServer$ = createEffect(() => \n    this.actions$.pipe(\n      ofType(PeerActions.connectSocketServer),\n      switchMap(() => this.peerService.connectSocket()),\n      map((id) => PeerActions.socketServerUserIdAssigned({id})),\n      catchError((err: any) => of(PeerActions.connectSocketServerFailure({error: err.message})))\n    )\n  )\n\n  disconnectSocketServer$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(PeerActions.disconnectSocketServer),\n      switchMap(() => this.peerService.disconnectSocket()),\n      map(() => PeerActions.socketServerDisconnected())\n    )\n  )\n\n  connectPeerServer$ = createEffect(() => \n    this.actions$.pipe(\n      ofType(PeerActions.connectPeerServer),\n      switchMap(() => this.peerService.connectPeerServer()),\n      map((id) => PeerActions.peerServerConnected()),\n      catchError((err: any) => of(PeerActions.connectPeerServerFailure({error: err.message})))\n    )\n  )\n\n  disconnectPeerServer$ = createEffect(() => \n    this.actions$.pipe(\n      ofType(PeerActions.disconnectPeerServer),\n      switchMap(() => this.peerService.disconnectPeerServer()),\n      switchMap(() => [PeerActions.peerServerDisconnected(), PeerActions.disconnectSocketServer()])\n    )\n  )\n\n  createRoom$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(PeerActions.createBroadcastRoom),\n      switchMap(() => this.peerService.joinRoom()),\n      map((id) => PeerActions.createBroadcastRoomSuccess({id})),\n      catchError((err: any) => of(PeerActions.createBroadcastRoomFailure({error: err.message})))\n    )\n  )\n\n  joinRoom$ = createEffect(() => \n    this.actions$.pipe(\n      ofType(PeerActions.joinBroadcastRoom),\n      switchMap(({id}) => this.peerService.joinRoom({room: id})),\n      map(() => PeerActions.joinBroadcastRoomSuccess()),\n      catchError((error: any) => of(PeerActions.joinBroadcastRoomFailure({error: error.message})))\n    )\n  )\n\n  leaveRoom$ = createEffect(() => \n    this.actions$.pipe(\n      ofType(PeerActions.leaveBroadcastRoom),\n      map(() => this.peerService.leaveSession()),\n      map(() => PeerActions.leaveBroadcastRoomSuccess()),\n      catchError((error: any) => of(PeerActions.leaveBroadcastRoomFailure({error: error.message})))\n    )\n  )\n\n  endBroadcast$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(PeerActions.endBroadcast),\n      switchMap(() => this.peerService.endBroadcast()),\n      map(() => PeerActions.endBroadcastSuccess()),\n      catchError((error: any) => of(PeerActions.endBroadcastFailure({error: error.message})))\n    )\n  )\n\n}\n","import { ActivatedRouteSnapshot, CanDeactivateFn, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\nexport interface ComponentCanDeactivate {\n  canDeactivate: () => boolean | Observable<boolean>;\n}\n\nexport const activeStreamGuard: CanDeactivateFn<ComponentCanDeactivate> = (component: ComponentCanDeactivate, currentRoute: ActivatedRouteSnapshot, currentState: RouterStateSnapshot, nextState: RouterStateSnapshot): boolean | Observable<boolean> => {\n  return component.canDeactivate ? component.canDeactivate() : confirm('WARNING: Leaving this page will end the current broadcast.');\n};\n","import { AfterViewInit, Component, ElementRef, Renderer2, Signal, ViewChild } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { AppActions, AppState } from '../../../../models/app.model';\nimport { peerConnectionsAcceptedSelector } from '../../../../selectors/app.selector';\nimport { Router } from '@angular/router';\nimport { FormBuilder, FormControl } from '@angular/forms';\n\n@Component({\n  selector: 'app-accept-peer-connections-modal',\n  templateUrl: './accept-peer-connections-modal.component.html',\n  styleUrls: ['./accept-peer-connections-modal.component.scss'],\n})\nexport class AcceptPeerConnectionsModalComponent implements AfterViewInit {\n  @ViewChild('modal', { read: ElementRef }) modal!: ElementRef;\n  public accepted: Signal<boolean | undefined>;\n  public saveSettingControl: FormControl;\n  constructor(private store: Store<AppState>,\n              private renderer: Renderer2,\n              private router: Router,\n              private fb: FormBuilder) {\n    this.accepted = toSignal(this.store.select(peerConnectionsAcceptedSelector));\n    this.saveSettingControl = this.fb.control<boolean | undefined>(this.accepted());\n  }\n\n  ngAfterViewInit(): void {\n    if (!this.accepted()) {\n      this._openModal();\n    }\n  }\n\n  accept(): void {\n    this.store.dispatch(AppActions.setPeerConnectionsAccepted({accepted: true, save: this.saveSettingControl.value}));\n    this._closeModal();\n  }\n\n  decline(): void {\n    this.store.dispatch(AppActions.setPeerConnectionsAccepted({accepted: false, save: this.saveSettingControl.value}));\n    this._closeModal();\n    this.router.navigate([''])\n  }\n\n  private _openModal(): void {\n    this.renderer.setAttribute(this.modal.nativeElement, 'open', '')\n  }\n\n  private _closeModal(): void {\n    this.renderer.removeAttribute(this.modal.nativeElement, 'open')\n  }\n}\n","<button #open (click)=\"modal.showModal()\">\n</button>\n<dialog #modal class=\"modal\">\n  <form method=\"dialog\" class=\"modal-box bg-base-content text-base-100 sm:w-11/12 justify-self-center\">\n    <div class=\"flex flex-row gap-3 items-center bg-warning rounded-lg mb-3\">\n      <div class=\"badge badge-warning h-10 w-10\">\n        <ng-icon name=\"heroExclamationTriangle\" class=\"text-error text-3xl\"></ng-icon>\n      </div>\n      <h1 class=\"font-bold text-2xl\" translate>MODAL.accessModalTitle</h1>\n    </div>\n    <p class=\"text-base mt-2\" translate>MODAL.accessP1</p>\n    <p class=\"text-base mt-2\" translate>MODAL.accessP2</p>\n    <p class=\"text-base mt-2\" translate>MODAL.accessP3</p>\n    <div class=\"modal-action\">\n      <button class=\"btn\" type=\"button\" (click)=\"decline()\" translate>BUTTONS.decline</button>\n      <button class=\"btn\" type=\"button\" (click)=\"accept()\" translate>BUTTONS.confirm</button>\n    </div>\n    <div class=\"form-control\">\n      <label class=\"label cursor-pointer\" translate>\n        <span class=\"label-text text-base-100\" translate>LABELS.rememberSetting</span>\n        <input type=\"checkbox\" class=\"checkbox checkbox-sm checkbox-primary\" [formControl]=\"saveSettingControl\" />\n      </label>\n    </div>\n  </form>\n</dialog>","import { ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, ViewChild, WritableSignal, computed, effect, signal } from '@angular/core';\nimport { PeerService } from '../../services/peer.service';\nimport { Signal } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store, select } from '@ngrx/store';\nimport { fadeInOnEnterAnimation, slideInRightOnEnterAnimation, slideInUpOnEnterAnimation, slideOutDownOnLeaveAnimation, slideOutRightOnLeaveAnimation } from 'angular-animations';\nimport { Subject, map, takeUntil } from 'rxjs';\nimport { AppState } from '../../../../models/app.model';\nimport { selectBroadcastPaused, selectHostOnline, selectPeerServerConnected } from '../../../../selectors/peer.selectors';\nimport { recognitionErrorSelector } from '../../../../selectors/recognition.selector';\nimport { selectTextFlow } from '../../../../selectors/settings.selector';\nimport { FullScreenService } from '../../../../services/full-screen/full-screen.service';\nimport { TextFlow } from '../../../settings/models/settings.model';\n\n@Component({\n  selector: 'app-broadcast-render',\n  templateUrl: './broadcast-render.component.html',\n  styleUrls: ['./broadcast-render.component.scss'],\n  animations: [\n    slideInRightOnEnterAnimation(),\n    slideInUpOnEnterAnimation(),\n    slideOutDownOnLeaveAnimation(),\n    slideOutRightOnLeaveAnimation(),\n    fadeInOnEnterAnimation()\n  ],\n})\nexport class BroadcastRenderComponent implements OnInit, OnDestroy {\n  \n  public connected: Signal<boolean | undefined>;\n  public liveText: WritableSignal<string> = signal('');\n  public textOutput: WritableSignal<string[]> = signal([]);\n  public hasLiveResults: Signal<boolean>;\n  public error: Signal<string | undefined>;\n  public textFlowDown: Signal<boolean | undefined>;\n\n  @ViewChild('enable') sidebarCheckbox!: ElementRef<HTMLInputElement>;\n\n  private onDestroy$: Subject<void> = new Subject<void>();\n  constructor(private store: Store<AppState>,\n              private el: ElementRef,\n              private fullScreen: FullScreenService,\n              private peerService: PeerService,\n              private cd: ChangeDetectorRef) {\n\n    const peerConnected = toSignal(this.store.select(selectPeerServerConnected));\n    const hostOnline = toSignal(this.store.select(selectHostOnline));\n    this.connected = computed(() => (peerConnected() && hostOnline()));\n\n    this.error = toSignal(this.store.select(recognitionErrorSelector));\n    \n    this.textFlowDown = toSignal(this.store.pipe(\n      select(selectTextFlow), \n      map((flow: TextFlow) => (flow === 'top-down'))));\n\n    this.hasLiveResults = computed(() => {\n      if (this.liveText() == '' && this.textOutput().length === 0) {\n        return false;\n      }\n      return true;\n    });\n\n    if (this.fullScreen.isAvailable) {\n      effect(() => {\n        if (this.fullScreen.isFullscreen()) {\n          this.sidebarCheckbox.nativeElement.checked = false;\n        }\n        this.cd.detectChanges();\n      })\n    }\n  }\n\n  ngOnInit(): void {\n    this.peerService.liveText$.pipe(\n      takeUntil(this.onDestroy$)\n    ).subscribe((text) => {\n      this.liveText.set(text);\n      this.cd.detectChanges();\n    });\n    this.peerService.textOutput$.pipe(\n      takeUntil(this.onDestroy$)\n    ).subscribe((results) => {\n      this.textOutput.set(results);\n      this.cd.detectChanges();\n    });\n    if (this.fullScreen.isAvailable) {\n      this.fullScreen.registerElement(this.el);\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.fullScreen.isAvailable) {\n      this.fullScreen.deregisterElement();\n      this.store.select(selectBroadcastPaused).pipe(\n        takeUntil(this.onDestroy$)\n      ).subscribe(() => {\n        console.log('pause changed');\n        this.cd.detectChanges();\n      })\n    }\n    this.onDestroy$.next();\n  }\n\n  updateDom(): void {\n    this.cd.detectChanges()\n  }\n}\n","<div class=\"drawer drawer-end overflow-y-hidden py-6\">\n  <input #enable id=\"drawer-enable\" type=\"checkbox\" class=\"drawer-toggle\" (change)=\"updateDom()\" />\n  <div class=\"drawer-content absolute top-0 bottom-0 left-0 right-0\">\n    <div class=\"flex flex-grow-0 h-full overflow-hidden bg-base-100\" [ngClass]=\"{'flex-col-reverse justify-start': textFlowDown(), 'flex-col justify-end': !textFlowDown()}\">\n      <app-recognized-text \n        [connected]=\"connected\" \n        [hasLiveResults]=\"hasLiveResults\"\n        [textOutput]=\"textOutput\"\n        [error]=\"error\"\n        hintText=\"HINTS.streamConnected\"\n        class=\"flex flex-grow-0 flex-shrink basis-full overflow-hidden\"\n      ></app-recognized-text>\n      <app-recognized-live-text \n        [text]=\"liveText\" \n        *ngIf=\"connected()\"\n      ></app-recognized-live-text>\n    </div>\n    <label for=\"drawer-enable\" class=\"drawer-button btn btn-ghost btn-half-circle-left btn-info fixed top-1/2 right-0\" *ngIf=\"connected()\" @slideInRightOnEnter @slideOutRightOnLeave>\n      <ng-icon class=\"text-2xl\" name=\"heroChevronLeft\"></ng-icon>\n    </label>\n  </div>\n  <div class=\"drawer-side\">\n    <label for=\"drawer-enable\" class=\"drawer-overlay opacity-0\"></label>\n    <app-recognition-control-sidebar *ngIf=\"enable.checked\" @slideInRightOnEnter></app-recognition-control-sidebar>\n  </div>\n</div>","import { Component, OnDestroy, OnInit, Signal, computed, effect } from '@angular/core';\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { slideInRightOnEnterAnimation, slideOutRightOnLeaveAnimation } from 'angular-animations';\nimport { Observable, Subject, takeUntil } from 'rxjs';\nimport { AppState } from '../../../../models/app.model';\nimport { RecognitionActions, RecognitionStatus } from '../../../../models/recognition.model';\nimport { recognitionConnectedSelector, recognitionPausedSelector } from '../../../../selectors/recognition.selector';\nimport { RecognitionService } from '../../../media/services/recognition.service';\nimport { PeerService } from '../../services/peer.service';\n\n@Component({\n  selector: 'app-broadcast-room',\n  templateUrl: './broadcast-room.component.html',\n  styleUrls: ['./broadcast-room.component.scss'],\n  animations: [\n    slideInRightOnEnterAnimation(),\n    slideOutRightOnLeaveAnimation()\n  ]\n})\nexport class BroadcastRoomComponent implements OnInit, OnDestroy {\n  public recognitionConnected: Signal<boolean | undefined>;\n  \n  private recognitionPaused: Signal<boolean | undefined>;\n  private liveText: Observable<string>;\n  private recognizedText: Observable<string[]>;\n  private onDestroy$: Subject<void> = new Subject<void>();\n\n  constructor(private store: Store<AppState>,\n              private recognitionService: RecognitionService,\n              private peerService: PeerService) {\n    this.recognitionConnected = toSignal(this.store.select(recognitionConnectedSelector));\n    this.recognitionPaused = toSignal(this.store.select(recognitionPausedSelector));\n    this.liveText = toObservable(computed(() => (this.recognitionConnected() || this.recognitionPaused()) ? this.recognitionService.getLiveOutput('broadcast')() : ''))\n    this.recognizedText = toObservable(computed(() => (this.recognitionConnected() || this.recognitionPaused()) ? this.recognitionService.getRecognizedText('broadcast')() : []));\n    let isPaused = false;\n    effect(() => {\n      if (this.recognitionPaused()) {\n        isPaused = true;\n        console.log('broadcast paused');\n        this.peerService.broadcastData({ type: 'status', status: RecognitionStatus.paused})\n      } else if (isPaused) {\n        console.log('broadcast resumed')\n        this.peerService.broadcastData({ type: 'status', status: RecognitionStatus.connected})\n        isPaused = false;\n      }\n    })\n  }\n\n  ngOnInit(): void {\n    this.store.dispatch(RecognitionActions.connectRecognition({id: 'broadcast'}));\n    this.liveText.pipe(\n      takeUntil(this.onDestroy$)\n    ).subscribe((live) => {\n      this.peerService.broadcastData({ recognition: live, type: 'live' })\n    });\n    this.recognizedText.pipe(\n      takeUntil(this.onDestroy$)\n    ).subscribe((recognized) => {\n      this.peerService.broadcastData({ recognition: recognized, type: 'segment'})\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.recognitionConnected()) {\n      this.store.dispatch(RecognitionActions.disconnectRecognition({id: 'broadcast'}));\n    }\n    this.onDestroy$.next();\n  }\n}\n","<app-recognition-render class=\"flex basis-full overflow-y-hidden\"></app-recognition-render>","import { Component, Signal, computed, effect } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors } from '@angular/forms';\nimport { Store } from '@ngrx/store';\nimport { ObsActions } from '../../../../actions/obs.actions';\nimport { AppState } from '../../../../models/app.model';\nimport { RecognitionActions } from '../../../../models/recognition.model';\nimport { ObsConnectionState } from '../../../../reducers/obs.reducer';\nimport { selectObsConnected, selectObsError, selectObsStreamActive } from '../../../../selectors/obs.selectors';\nimport { recognitionActiveSelector } from '../../../../selectors/recognition.selector';\nimport { filter, take, tap } from 'rxjs';\n\n@Component({\n  selector: 'app-connect-obs',\n  templateUrl: './connect-obs.component.html',\n  styleUrls: ['./connect-obs.component.scss'],\n})\nexport class ConnectObsComponent {\n\n  public connectionState: Signal<ObsConnectionState | undefined>;\n  public isConnecting: Signal<boolean>;\n  public isConnected: Signal<boolean>;\n  public obsIsStreaming: Signal<boolean | undefined>;\n  public formGroup: FormGroup;\n  public error: Signal<string | undefined>;\n  \n  constructor(private fb: FormBuilder,\n              private store: Store<AppState>) {\n\n    this.connectionState = toSignal(this.store.select(selectObsConnected));\n    this.error = toSignal(this.store.select(selectObsError));\n    this.obsIsStreaming = toSignal(this.store.select(selectObsStreamActive));\n    \n    this.isConnected = computed(() => this.connectionState() === ObsConnectionState.connected);\n    this.isConnecting = computed(() => this.connectionState() === ObsConnectionState.connecting);\n\n    if (this.isConnected()) {\n      this.startRecognition();\n    }\n\n    this.formGroup = this.fb.group({\n      ip: this.fb.control<string | null>(null),\n      port: this.fb.control<number | null>(null),\n      password: this.fb.control<string | null>(null)\n    });\n  }\n\n  public saveObsWebsocket(): void {\n    this._autofillDefaultValue(this.formGroup.controls['ip'], '127.0.0.1');\n    this._autofillDefaultValue(this.formGroup.controls['port'], 4455);\n    this.formGroup.updateValueAndValidity();\n    if (this.formGroup.valid) {\n      const {ip, port, password}: {ip: string, port: number, password: string | null} = this.formGroup.value;\n      this.store.select(selectObsConnected).pipe(\n        filter((conn) => conn === ObsConnectionState.connected),\n        take(1)\n      ).subscribe(() => this.startRecognition());\n      this.store.dispatch(ObsActions.connect({ ip, port, password }));\n    } else {\n      this.formGroup.markAsTouched();\n    }\n  }\n\n  public disconnect(): void {\n    this.store.dispatch(ObsActions.disconnect())\n  }\n\n  public startRecognition(): void {\n    this.store.dispatch(RecognitionActions.connectRecognition({id: 'stream'}));\n  }\n\n  public stopRecognition(): void {\n    this.store.dispatch(RecognitionActions.disconnectRecognition({id: 'stream'}));\n  }\n\n  private _autofillDefaultValue(control: AbstractControl, value: string | number): ValidationErrors | null {\n    if (control.value === null) {\n      control.patchValue(value);\n    }\n    return null;\n  }\n}\n","<div class=\"flex flex-row items-center gap-3\">\n  <div class=\"text-lg text-primary py-3\" translate>CONNECTIONS.obsStudio</div>\n  <div class=\"badge h-auto\" [ngClass]=\"{'badge-success': isConnected()}\">{{connectionState()}}</div>\n  <div class=\"badge h-auto badge-error\" *ngIf=\"error() as err\">{{err}}</div>\n  <div class=\"flex flex-grow\"></div>\n  <div class=\"flex\" *ngIf=\"isConnected()\">\n    <div class=\"badge h-auto badge-secondary\" *ngIf=\"!obsIsStreaming()\" translate>CONNECTIONS.obsStreamInactive</div>\n  </div>\n</div>\n\n<form class=\"flex flex-row flex-wrap flex-grow-0 gap-3\" [formGroup]=\"formGroup\" (submit)=\"saveObsWebsocket()\">\n  \n  <div class=\"form-control basis-1/5\">\n    <label class=\"label\">\n      <span class=\"label-text\" [ngClass]=\"{'text-error': formGroup.invalid && formGroup.touched}\" translate>CONNECTIONS.obsStudioIP</span>\n    </label>\n    <input type=\"text\" class=\"input input-bordered input-lg\" [ngClass]=\"{'input-error': formGroup.invalid && formGroup.touched}\" placeholder=\"127.0.0.1\" formControlName=\"ip\" />\n    <label class=\"label no-height\">\n      <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['ip'].hasError('invalid') && formGroup.touched\">Invalid URL</span>\n      <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['ip'].hasError('required') && formGroup.touched\">Required</span>\n    </label>\n  </div>\n\n  <div class=\"form-control basis-1/5\">\n    <label class=\"label\">\n      <span class=\"label-text\" [ngClass]=\"{'text-error': formGroup.invalid && formGroup.touched}\" translate>CONNECTIONS.obsStudioPort</span>\n    </label>\n    <input type=\"text\" class=\"input input-bordered input-lg\" [ngClass]=\"{'input-error': formGroup.invalid && formGroup.touched}\" placeholder=\"4455\" formControlName=\"port\" />\n    <label class=\"label no-height\">\n      <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['port'].hasError('invalid') && formGroup.touched\">Invalid URL</span>\n      <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['port'].hasError('required') && formGroup.touched\">Required</span>\n    </label>\n  </div>\n\n  <div class=\"form-control basis-1/5\">\n    <label class=\"label\">\n      <span class=\"label-text\" translate>LABELS.password</span>\n    </label>\n    <input type=\"text\" class=\"input input-bordered input-lg\" [placeholder]=\"'LABELS.optPassword' | translate\" formControlName=\"password\" />\n    <label class=\"label no-height\"></label>\n  </div>\n\n  <div class=\"flex flex-col basis-1/5 self-end pb-5 gap-3\">\n    <button class=\"btn btn-secondary\" [ngClass]=\"{'btn-error': formGroup.invalid && formGroup.touched}\" [disabled]=\"isConnecting()\" *ngIf=\"!isConnected()\" translate>BUTTONS.connect</button>\n    <button class=\"btn btn-secondary\" [disabled]=\"isConnecting()\" *ngIf=\"isConnected()\" type=\"button\" (click)=\"disconnect()\" translate>BUTTONS.disconnect</button>\n  </div>\n\n</form>\n","import { Component, Signal } from '@angular/core';\nimport { AppState } from '../../../../models/app.model';\nimport { Store } from '@ngrx/store';\nimport { selectConnectedPeerCount } from '../../../../selectors/peer.selectors';\nimport { toSignal } from '@angular/core/rxjs-interop';\n\n@Component({\n  selector: 'app-connected-peer-count-chip',\n  templateUrl: './connected-peer-count-chip.component.html',\n  styleUrls: ['./connected-peer-count-chip.component.scss'],\n})\nexport class ConnectedPeerCountChipComponent {\n  public count: Signal<number>;\n  constructor(private store: Store<AppState>) {\n    this.count = toSignal(this.store.select(selectConnectedPeerCount)) as Signal<number>;\n  }\n}\n","<div class=\"badge h-auto\" [ngClass]=\"{'badge-neutral': !count(), 'badge-success': count()}\">{{'STREAM.connectedPeers' | translate}}: {{count()}}</div>\n","import { Component, ElementRef, Renderer2, Signal, ViewChild } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store, select } from '@ngrx/store';\nimport { filter, map, take } from 'rxjs';\nimport { PeerActions } from '../../../../actions/peer.actions';\nimport { AppState } from '../../../../models/app.model';\nimport { RecognitionActions, RecognitionStatus } from '../../../../models/recognition.model';\nimport { recognitionStatusSelector } from '../../../../selectors/recognition.selector';\n\n@Component({\n  selector: 'app-end-broadcast',\n  templateUrl: './end-broadcast.component.html',\n  styleUrls: ['./end-broadcast.component.scss'],\n})\nexport class EndBroadcastComponent {\n  @ViewChild('modal', { read: ElementRef }) modal!: ElementRef;\n  @ViewChild('close', { read: ElementRef }) closeButton!: ElementRef;\n\n  public isActive: Signal<boolean | undefined>;\n\n  constructor(private store: Store<AppState>,\n              private renderer: Renderer2) {\n    this.isActive = toSignal(this.store.pipe(\n      select(recognitionStatusSelector),\n      map((status: RecognitionStatus) => status === RecognitionStatus.connected)\n    ))\n  }\n\n  confirmEndBroadcast(): void {\n    this._openModal();\n  }\n\n  endBroadcast(): void {\n    this.store.dispatch(RecognitionActions.disconnectRecognition({id: 'broadcast'}));\n    this.store.select(recognitionStatusSelector).pipe(\n      filter((status) => status === RecognitionStatus.disconnected),\n      take(1)\n    ).subscribe(() => {\n      console.log('recognition ended, ending broadcast');\n      this.store.dispatch(PeerActions.endBroadcast());\n    })\n    this._closeModal();\n  }\n\n  hideModal(): void {\n    this._closeModal();\n  }\n\n  private _openModal(): void {\n    this.renderer.setAttribute(this.modal.nativeElement, 'open', '')\n  }\n\n  private _closeModal(): void {\n    this.closeButton.nativeElement.click();\n  }\n}\n","<div class=\"tooltip tooltip-left tooltip-warning\" [attr.data-tip]=\"'STREAM.endBroadcast' | translate\">\n  <button class=\"btn btn-circle btn-info\" (click)=\"confirmEndBroadcast()\">\n    <ng-icon name=\"heroSignalSlash\"></ng-icon>\n  </button>\n</div>\n<dialog #modal class=\"modal\">\n  <form method=\"dialog\" class=\"modal-box bg-base-content text-base-100 sm:w-11/12 justify-self-center\">\n    <p translate>MODAL.confirmEndBroadcast</p>\n    <div class=\"modal-action\">\n      <button class=\"btn\" translate (click)=\"endBroadcast()\" type=\"button\">BUTTONS.confirm</button>\n      <button class=\"btn\" (click)=\"hideModal()\" type=\"button\" translate>BUTTONS.decline</button>\n    </div>\n  </form>\n  <form method=\"dialog\" class=\"modal-backdrop\">\n    <button #close></button>\n  </form>\n</dialog>","import { Component, Input, WritableSignal, signal } from '@angular/core';\nimport { fadeOutOnLeaveAnimation, slideInUpOnEnterAnimation } from 'angular-animations';\n\n@Component({\n  selector: 'app-join-code',\n  templateUrl: './join-code.component.html',\n  styleUrls: ['./join-code.component.scss'],\n  animations: [\n    slideInUpOnEnterAnimation(),\n    fadeOutOnLeaveAnimation()\n  ]\n})\nexport class JoinCodeComponent {\n  @Input() joinCode?: string;\n  public showToast: WritableSignal<boolean> = signal(false);\n\n  showCopiedToClipboard(): void {\n    this.showToast.set(true);\n    setTimeout(() => this.showToast.set(false), 1500)\n  }\n}\n","<div \n  class=\"badge h-auto badge-info text-xl sm:text-2xl md:text-4xl lg:text-6xl cursor-pointer tooltip tooltip-bottom\" \n  *ngIf=\"joinCode\"\n  ngxClipboard\n  [cbContent]=\"joinCode\"\n  [attr.data-tip]=\"'STREAM.copyJoinCodeTip' | translate\"\n  (click)=\"showCopiedToClipboard()\">\n  {{'STREAM.joinCode' | translate}}: {{joinCode.toUpperCase()}}\n</div>\n\n<div class=\"toast z-10\" @slideInUpOnEnter @fadeOutOnLeave *ngIf=\"showToast()\">\n  <div class=\"alert alert-info\" translate>STREAM.joinCodeCopied</div>\n</div>","import { Component, ElementRef, EventEmitter, Input, Output, Renderer2, Signal, ViewChild } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { PeerActions } from '../../../../actions/peer.actions';\nimport { AppState } from '../../../../models/app.model';\nimport { selectHostOnline, selectIsViewing } from '../../../../selectors/peer.selectors';\nimport { filter, take } from 'rxjs';\n\n@Component({\n  selector: 'app-leave-session',\n  templateUrl: './leave-session.component.html',\n  styleUrls: ['./leave-session.component.scss'],\n})\nexport class LeaveSessionComponent {\n  @ViewChild('modal', { read: ElementRef }) modal!: ElementRef;\n  @ViewChild('close', { read: ElementRef }) closeButton!: ElementRef;\n  @Input() set showDialog(open: boolean) {\n    if (open) {\n      this._openModal()\n    }\n  }\n  @Output() dialogClosed: EventEmitter<boolean> = new EventEmitter<boolean>();\n\n  private confirmationRequired: Signal<boolean | undefined>;\n  constructor(private store: Store<AppState>,\n              private renderer: Renderer2,\n              private router: Router,\n              private route: ActivatedRoute) {\n    this.confirmationRequired = toSignal(this.store.select(selectHostOnline))\n  }\n\n  confirmLeaveBroadcast(): void {\n    if (this.confirmationRequired()) {\n      this._openModal();\n    } else {\n      this.leaveBroadcast();\n    }\n  }\n\n  leaveBroadcast(): void {\n    this.store.dispatch(PeerActions.leaveBroadcastRoom());\n    this.store.select(selectIsViewing).pipe(\n      filter((isViewing) => !isViewing),\n      take(1)\n    ).subscribe(() => {\n      this.dialogClosed.next(true);\n    })\n    this._closeModal();\n    this.router.navigate(['..'], { queryParams: { joinCode: null}, queryParamsHandling: 'merge', relativeTo: this.route});\n  }\n\n  hideModal(): void {\n    this.dialogClosed.next(false);\n    this._closeModal();\n  }\n\n  private _openModal(): void {\n    this.renderer.setAttribute(this.modal.nativeElement, 'open', '')\n  }\n\n  private _closeModal(): void {\n    this.closeButton.nativeElement.click();\n  }\n}\n","<button class=\"btn btn-sm\" translate (click)=\"confirmLeaveBroadcast()\">STREAM.leaveSession</button>\n<dialog #modal class=\"modal\">\n  <form method=\"dialog\" class=\"modal-box bg-base-content text-base-100 sm:w-11/12 justify-self-center\">\n    <p translate>MODAL.confirmLeaveSession</p>\n    <div class=\"modal-action\">\n      <button class=\"btn\" translate (click)=\"leaveBroadcast()\" type=\"button\">BUTTONS.confirm</button>\n      <button class=\"btn\" (click)=\"hideModal()\" type=\"button\" translate>BUTTONS.decline</button>\n    </div>\n  </form>\n  <form method=\"dialog\" class=\"modal-backdrop\">\n    <button #close></button>\n  </form>\n</dialog>\n","import { Component, Signal, computed } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../../../models/app.model';\nimport { ObsConnectionState } from '../../../../reducers/obs.reducer';\nimport { selectObsConnected, selectObsStreamActive } from '../../../../selectors/obs.selectors';\n\n@Component({\n  selector: 'app-obs-connection-status-chip',\n  templateUrl: './obs-connection-status-chip.component.html',\n  styleUrls: ['./obs-connection-status-chip.component.scss'],\n})\nexport class ObsConnectionStatusChipComponent {\n\n  public connected: Signal<boolean | undefined>;\n  public streamingActive: Signal<boolean | undefined>;\n  public connectionState: Signal<ObsConnectionState | undefined>;\n  constructor(private store: Store<AppState>) {\n    this.connectionState = toSignal(this.store.select(selectObsConnected));\n    this.connected = computed(() => this.connectionState() === ObsConnectionState.connected);\n    this.streamingActive = toSignal(this.store.select(selectObsStreamActive));\n  }\n}\n","<div class=\"badge badge-success h-auto\" *ngIf=\"streamingActive(); else connectionBadge\">{{'CONNECTIONS.obsStudio' | translate}}: {{'LABELS.streaming' | translate}}</div>\n<ng-template #connectionBadge>\n  <div class=\"badge gap-1 h-auto\" [ngClass]=\"{'badge-success': connected()}\" *ngIf=\"connectionState() as state\">\n    <span>\n      {{'CONNECTIONS.obsStudio' | translate}}: {{state | proper}}\n    </span>\n    <span *ngIf=\"connected()\">\n      {{'LABELS.stream' | translate}}: {{'LABELS.idle' | translate}}\n    </span>\n  </div>\n</ng-template>\n","import { Component, HostListener, OnDestroy, OnInit, Signal, effect } from '@angular/core';\nimport { takeUntilDestroyed, toSignal } from '@angular/core/rxjs-interop';\nimport { AbstractControl, FormBuilder, ValidationErrors, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport { Observable, filter, map, take } from 'rxjs';\nimport { ObsActions } from '../../../../actions/obs.actions';\nimport { PeerActions } from '../../../../actions/peer.actions';\nimport { ComponentCanDeactivate } from '../../../../guards/active-stream/active-stream.guard';\nimport { AppPlatform, AppState } from '../../../../models/app.model';\nimport { RecognitionActions } from '../../../../models/recognition.model';\nimport { peerConnectionsAcceptedSelector, platformSelector } from '../../../../selectors/app.selector';\nimport { selectIsBroadcasting, selectJoinCode, selectPeerError, selectPeerServerConnected, selectRoomId, selectServerOffline, selectSocketServerConnected } from '../../../../selectors/peer.selectors';\nimport { recognitionActiveSelector } from '../../../../selectors/recognition.selector';\nimport { selectObsConnected } from '../../../../selectors/obs.selectors';\nimport { ObsConnectionState } from '../../../../reducers/obs.reducer';\n\n@Component({\n  selector: 'app-peer-landing',\n  templateUrl: './peer-landing.component.html',\n  styleUrls: ['./peer-landing.component.scss'],\n})\nexport class PeerLandingComponent implements OnInit, OnDestroy, ComponentCanDeactivate {\n  @HostListener('window:beforeunload')\n  public acceptedPeerConnections: Signal<boolean | undefined>;\n  public socketServerConnected: Signal<boolean | undefined>;\n  public peerServerConnected: Signal<boolean | undefined>;\n  public serverError: Signal<string | undefined>;\n  public serverOffline: Signal<boolean | undefined>;\n  public roomId: Signal<string | undefined>;\n  public joinCode: Signal<string | undefined>;\n  public isBroadcasting: Signal<boolean | undefined>;\n  public isMobileDevice: Signal<boolean | undefined>;\n  public isIncompatibleBrowser: Signal<boolean | undefined>;\n  public recognitionActive: Signal<boolean | undefined>;\n  public showObsStatus: Signal<boolean | undefined>;\n\n  public joinSessionFormGroup = this.fb.group({\n    session: this.fb.control<string>('', [Validators.required, (ctrl) => this._validateSessionId(ctrl)]),\n    joinCode: this.fb.control<string>('', [Validators.required, (ctrl) => this._validateJoinCode(ctrl)])\n  })\n\n  constructor(private store: Store<AppState>,\n              private fb: FormBuilder,\n              private router: Router,\n              private route: ActivatedRoute) {\n    this.acceptedPeerConnections = toSignal(this.store.select(peerConnectionsAcceptedSelector))\n    this.socketServerConnected = toSignal(this.store.select(selectSocketServerConnected))\n    this.peerServerConnected = toSignal(this.store.select(selectPeerServerConnected));\n    this.roomId = toSignal(this.store.select(selectRoomId));\n    this.joinCode = toSignal(this.store.select(selectJoinCode));\n    this.isBroadcasting = toSignal(this.store.select(selectIsBroadcasting));\n    this.recognitionActive = toSignal(this.store.select(recognitionActiveSelector))\n    this.showObsStatus = toSignal(this.store.pipe(select(selectObsConnected), map((state) => state !== ObsConnectionState.uninitialized)))\n\n    this.serverError = toSignal(this.store.select(selectPeerError));\n    this.serverOffline = toSignal(this.store.select(selectServerOffline));\n\n    this.store.select(platformSelector);\n    this.isMobileDevice = toSignal(this.store.pipe(select(platformSelector), map((platform) => platform === AppPlatform.mobile)));\n    this.isIncompatibleBrowser = toSignal(this.store.pipe(select(platformSelector), map((platform) => platform === AppPlatform.unsupported)));\n\n    this._injectDashIfRequired();\n    effect(() => {\n      if (this.acceptedPeerConnections() && !this.socketServerConnected()) {\n        this.store.dispatch(PeerActions.connectSocketServer())\n      }\n    }, { allowSignalWrites: true})\n  }\n\n  ngOnInit(): void {\n    if (this.acceptedPeerConnections() && !this.socketServerConnected()) {\n      this.store.dispatch(PeerActions.connectSocketServer());\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.store.dispatch(RecognitionActions.resetRecogntionState());\n  }\n\n  stopWebsocketRecognition(): void {\n    this.store.dispatch(ObsActions.disconnect());\n    this.store.select(selectObsConnected).pipe(\n      filter((state) => state === ObsConnectionState.disconnected),\n      take(1)\n    ).subscribe(() => this.store.dispatch(RecognitionActions.disconnectRecognition({id: 'stream'})))\n  }\n\n  canDeactivate(): boolean | Observable<boolean> {\n    return !toSignal(this.store.select(selectIsBroadcasting))();\n  }\n\n  createRoom() {\n    this.store.dispatch(PeerActions.createBroadcastRoom());\n  }\n\n  joinSession(): boolean {\n    this.joinSessionFormGroup.updateValueAndValidity();\n    if (this.joinSessionFormGroup.valid) {\n      const id: string = this.joinSessionFormGroup.value.session as string;\n      const joinCode: string = this.joinSessionFormGroup.value.joinCode as string;\n      this.store.dispatch(PeerActions.setJoinCode({joinCode}));\n      this.router.navigate([id], { queryParams: { joinCode }, relativeTo: this.route})\n    } else {\n      this.joinSessionFormGroup.markAllAsTouched();\n    }\n    return false;\n  }\n\n  private _validateSessionId(control: AbstractControl): ValidationErrors | null {\n    if (control.value) {\n      const exp = new RegExp(/^([acdefghjkmnpqrstuvwxyz2345679]{4})-([acdefghjkmnpqrstuvwxyz2345679]{4})$/i)\n      if (!exp.test(control.value)) {\n        return { invalid: true }\n      }\n    }\n    return null;\n  }\n\n  private _validateJoinCode(control: AbstractControl): ValidationErrors | null {\n    if (control.value) {\n      const exp = new RegExp(/^([acdefghjkmnpqrstuvwxyz2345679]{4})$/i)\n      if (!exp.test(control.value)) {\n        return { invalid: true }\n      }\n    }\n    return null;\n  }\n\n  private _injectDashIfRequired(): void {\n    const sessionControl: AbstractControl = this.joinSessionFormGroup.controls['session'];\n\n    sessionControl.valueChanges.pipe(\n      takeUntilDestroyed(),\n    ).subscribe((value) => {\n      if (value && value.length > 4) {\n        if (value[4] !== '-') {\n          sessionControl.setValue(value.slice(0,4) + '-' + value.slice(4, value.length))\n        }\n      }\n    })\n  }\n}\n","<div class=\"flex flex-col basis-full overflow-hidden flex-grow-0 bg-base-300 text-base-content\">\n  <div class=\"flex flex-row gap-3 items-center p-3\" *ngIf=\"acceptedPeerConnections(); else acceptPermissions\">\n    <ng-container *ngIf=\"!isBroadcasting(); else broadcastControls\">\n      <app-socket-server-status-chip></app-socket-server-status-chip>\n      <app-peer-server-status-chip></app-peer-server-status-chip>\n      <app-obs-connection-status-chip *ngIf=\"showObsStatus()\"></app-obs-connection-status-chip>\n    </ng-container>\n    <ng-template #broadcastControls>\n      <div class=\"flex flex-row flex-wrap gap-3\">\n        <app-room-id [roomId]=\"roomId()\"></app-room-id>\n        <app-join-code [joinCode]=\"joinCode()\"></app-join-code>\n      </div>\n    </ng-template>\n    <div class=\"badge h-auto badge-error\" *ngIf=\"serverError() as err\">{{err}}</div>\n    <div class=\"flex flex-1\"></div>\n    <ng-container *ngIf=\"isBroadcasting()\">\n      <div class=\"flex flex-grow flex-row flex-wrap-reverse items-center gap-3 justify-end\">\n        <app-connected-peer-count-chip></app-connected-peer-count-chip>\n        <app-end-broadcast></app-end-broadcast>\n      </div>\n    </ng-container>\n    <ng-container *ngIf=\"!isBroadcasting() && recognitionActive()\">\n      <button class=\"btn btn-circle btn-ghost\" (click)=\"stopWebsocketRecognition()\">\n        <ng-icon name=\"heroMicrophoneSlash\"></ng-icon>\n      </button>\n    </ng-container>\n  </div>\n\n  <ng-template #acceptPermissions>\n    <div class=\"flex flex-row self-stretch gap-3 items-center justify-center p-3 text-warning text-lg\">\n      <span translate>STREAM.permissionRequired</span>\n    </div>\n  </ng-template>\n  \n  <ng-container *ngIf=\"(isBroadcasting() || recognitionActive()); else landing\">\n    <app-broadcast-room class=\"flex basis-full overflow-y-hidden\" *ngIf=\"isBroadcasting()\"></app-broadcast-room>\n    <app-stream-captions class=\"flex basis-full overflow-y-hidden\" *ngIf=\"!isBroadcasting() && recognitionActive()\"></app-stream-captions>\n  </ng-container>\n\n  <ng-template #landing>\n    <div class=\"flex basis-full items-stretch justify-center overflow-y-auto\">\n      <div class=\"max-w-4xl p-3\">\n        \n        <div class=\"collapse collapse-arrow bg-base-100 mb-6 sm:mb-12\">\n          <input #broadcastOpen type=\"checkbox\" checked />\n          <div class=\"collapse-title flex flex-row items-center gap-3\" (click)=\"broadcastOpen.checked = !broadcastOpen.checked\">\n            <div class=\"text-xl\" translate>Peer Broadcasting</div>\n          </div>\n\n          <div class=\"collapse-content\">\n            <div class=\"form-row mb-6 sm:mb-12\" *ngIf=\"!(isMobileDevice() || isIncompatibleBrowser()); else broadcastingNotAvailable\">\n              <button class=\"w-64 btn btn-primary btn-lg\" [disabled]=\"serverOffline() || serverError()\" (click)=\"createRoom()\" translate>STREAM.createBroadcast</button>\n              <div class=\"flex basis-1/2\" translate>\n                STREAM.broadcastExplanantion\n              </div>\n            </div>\n    \n            <ng-template #broadcastingNotAvailable>\n              <ng-container *ngIf=\"acceptedPeerConnections()\">\n                <div *ngIf=\"isMobileDevice()\" class=\"text-warning text-center\" translate>ERRORS.mobileBroadcast</div>\n                <div *ngIf=\"isIncompatibleBrowser()\" class=\"text-warning text-center\" translate>ERRORS.unsupportedBrowserBroadcast</div>\n              </ng-container>\n            </ng-template>\n        \n            <form class=\"flex flex-col sm:gap-12 gap-6\" [formGroup]=\"joinSessionFormGroup\" (submit)=\"joinSession()\">\n              <div class=\"sm:hidden divider divider-vertical uppercase\">{{'STREAM.joinSession' | translate }}</div>\n              <div class=\"form-row\">\n                \n                <button class=\"hidden sm:block w-64 btn btn-primary btn-lg\" [disabled]=\"serverOffline() || serverError()\" translate>STREAM.joinSession</button>\n    \n                <div class=\"flex basis-full sm:basis-1/2\" translate>\n                  STREAM.joinSessionExplanation\n                </div>\n              </div>\n    \n              <div class=\"form-row\">\n                <div class=\"form-control\">\n                  <label class=\"label\">\n                    <span class=\"label-text\" [ngClass]=\"{'text-error': joinSessionFormGroup.controls['session'].invalid && joinSessionFormGroup.controls['session'].touched}\" translate>STREAM.sessionId</span>\n                  </label>\n                  <input type=\"text\" class=\"input input-bordered input-lg\" maxlength=\"9\" [ngClass]=\"{'input-error': joinSessionFormGroup.controls['session'].invalid && joinSessionFormGroup.controls['session'].touched}\" placeholder=\"A79E-F2GV\" formControlName=\"session\" />\n                  <label class=\"label no-height\">\n                    <span class=\"label-alt-text text-error text-xs\" *ngIf=\"joinSessionFormGroup.controls['session'].hasError('invalid') && joinSessionFormGroup.controls['session'].touched\">Invalid ID</span>\n                    <span class=\"label-alt-text text-error text-xs\" *ngIf=\"joinSessionFormGroup.controls['session'].hasError('required') && joinSessionFormGroup.controls['session'].touched\">Required</span>\n                  </label>\n                </div>\n        \n                <div class=\"form-control\">\n                  <label class=\"label\">\n                    <span class=\"label-text\" [ngClass]=\"{'text-error': joinSessionFormGroup.controls['joinCode'].invalid && joinSessionFormGroup.controls['joinCode'].touched}\" translate>STREAM.joinCode</span>\n                  </label>\n                  <input type=\"text\" class=\"input input-bordered input-lg\" maxlength=\"4\" [ngClass]=\"{'input-error': joinSessionFormGroup.controls['joinCode'].invalid && joinSessionFormGroup.controls['joinCode'].touched}\" placeholder=\"E5F6\" formControlName=\"joinCode\" />\n                  <label class=\"label no-height\">\n                    <span class=\"label-alt-text text-error text-xs\" *ngIf=\"joinSessionFormGroup.controls['joinCode'].hasError('invalid') && joinSessionFormGroup.controls['joinCode'].touched\">Invalid ID</span>\n                    <span class=\"label-alt-text text-error text-xs\" *ngIf=\"joinSessionFormGroup.controls['joinCode'].hasError('required') && joinSessionFormGroup.controls['joinCode'].touched\">Required</span>\n                  </label>\n                </div>\n    \n                <button class=\"w-64 btn btn-lg mt-3\" [ngClass]=\"{'btn-primary': joinSessionFormGroup.valid, 'btn-neutral': joinSessionFormGroup.invalid}\" [disabled]=\"serverOffline() || serverError()\" translate>BUTTONS.connect</button>\n              </div>\n            </form>\n          </div>\n\n        </div>\n\n        <app-third-party-connections *ngIf=\"!(isMobileDevice() || isIncompatibleBrowser())\" (openStateChanged)=\"broadcastOpen.checked = !$event\"></app-third-party-connections>\n\n      </div>\n    </div>\n  </ng-template>\n  <app-accept-peer-connections-modal *ngIf=\"!acceptedPeerConnections()\"></app-accept-peer-connections-modal>\n</div>\n","import { Component, Signal } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../../../models/app.model';\nimport { selectPeerError, selectPeerServerConnected } from '../../../../selectors/peer.selectors';\nimport { PeerActions } from '../../../../actions/peer.actions';\n\n@Component({\n  selector: 'app-peer-server-status-chip',\n  templateUrl: './peer-server-status-chip.component.html',\n  styleUrls: ['./peer-server-status-chip.component.scss'],\n})\nexport class PeerServerStatusChipComponent {\n  public connected: Signal<boolean | undefined>;\n  public serverError: Signal<string | undefined>;\n  constructor(private store: Store<AppState>) {\n    this.connected = toSignal(this.store.select(selectPeerServerConnected));\n    this.serverError = toSignal(this.store.select(selectPeerError));\n  }\n\n  reconnect(): void {\n    if (!this.connected()) {\n      this.store.dispatch(PeerActions.connectPeerServer());\n    }\n  }\n}\n","<button \n  class=\"badge h-auto\" \n  [ngClass]=\"{'badge-neutral': !connected(), 'badge-success': connected(), 'badge-error': serverError()}\"\n  (click)=\"reconnect()\"\n  >\n  {{'STREAM.peerStatus' | translate}}: \n  <ng-container *ngIf=\"connected() === undefined && !serverError(); else state\">{{'STREAM.connecting' | translate}}</ng-container>\n    <ng-template #state>\n      {{(connected() ? 'STREAM.online' : 'STREAM.offline') | translate}}\n    </ng-template>\n</button>\n","import { Component, Input, WritableSignal, signal } from '@angular/core';\nimport { fadeOutOnLeaveAnimation, slideInUpOnEnterAnimation } from 'angular-animations';\n\n@Component({\n  selector: 'app-room-id',\n  templateUrl: './room-id.component.html',\n  styleUrls: ['./room-id.component.scss'],\n  animations: [\n    slideInUpOnEnterAnimation(),\n    fadeOutOnLeaveAnimation()\n  ]\n})\nexport class RoomIdComponent {\n  @Input() roomId?: string;\n  public showToast: WritableSignal<boolean> = signal(false);\n\n  showCopiedToClipboard(): void {\n    this.showToast.set(true);\n    setTimeout(() => this.showToast.set(false), 1500)\n  }\n}\n","<div \n  class=\"badge h-auto badge-primary text-xl sm:text-2xl md:text-4xl lg:text-6xl cursor-pointer tooltip tooltip-bottom\" \n  *ngIf=\"roomId\" \n  ngxClipboard \n  [cbContent]=\"roomId\"\n  [attr.data-tip]=\"'STREAM.copyIdTip' | translate\"\n  (click)=\"showCopiedToClipboard()\">\n    {{'STREAM.sessionId' | translate}}: {{roomId.toUpperCase()}}\n</div>\n\n<div class=\"toast z-10\" @slideInUpOnEnter @fadeOutOnLeave *ngIf=\"showToast()\">\n  <div class=\"alert alert-info\" translate>STREAM.sessionIdCopied</div>\n</div>","import { Component, Signal } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { AppState } from '../../../../models/app.model';\nimport { selectPeerError, selectSocketServerConnected } from '../../../../selectors/peer.selectors';\nimport { PeerActions } from '../../../../actions/peer.actions';\n\n@Component({\n  selector: 'app-socket-server-status-chip',\n  templateUrl: './socket-server-status-chip.component.html',\n  styleUrls: ['./socket-server-status-chip.component.scss'],\n})\nexport class SocketServerStatusChipComponent {\n  public connected: Signal<boolean | undefined>;\n  public serverError: Signal<string | undefined>;\n  constructor(private store: Store<AppState>) {\n    this.connected = toSignal(this.store.select(selectSocketServerConnected));\n    this.serverError = toSignal(this.store.select(selectPeerError));\n  }\n\n  reconnect(): void {\n    if (!this.connected()) {\n      this.store.dispatch(PeerActions.connectSocketServer());\n    }\n  }\n}\n","<button \n  class=\"badge h-auto\"\n  [ngClass]=\"{'badge-neutral': !connected(), 'badge-success': connected(), 'badge-error': serverError()}\"\n  (click)=\"reconnect()\"\n  >\n    {{'STREAM.serverStatus' | translate}}: \n    <ng-container *ngIf=\"connected() === undefined; else state\">{{'STREAM.connecting' | translate}}</ng-container>\n    <ng-template #state>\n      {{(connected() ? 'STREAM.online' : 'STREAM.offline') | translate}}\n    </ng-template>\n</button>","import { Component, OnDestroy, OnInit, Signal, computed } from '@angular/core';\nimport { toObservable, toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport { slideInRightOnEnterAnimation, slideOutRightOnLeaveAnimation } from 'angular-animations';\nimport { Observable, Subject, takeUntil } from 'rxjs';\nimport { AppState } from '../../../../models/app.model';\nimport { RecognitionActions } from '../../../../models/recognition.model';\nimport { recognitionConnectedSelector, recognitionPausedSelector } from '../../../../selectors/recognition.selector';\nimport { ObsConnectionService } from '../../../../services/obs-connection/obs-connection.service';\nimport { RecognitionService } from '../../../media/services/recognition.service';\n\n@Component({\n  selector: 'app-stream-captions',\n  templateUrl: './stream-captions.component.html',\n  styleUrls: ['./stream-captions.component.scss'],\n  animations: [\n    slideInRightOnEnterAnimation(),\n    slideOutRightOnLeaveAnimation()\n  ]\n})\nexport class StreamCaptionsComponent implements OnInit, OnDestroy {\n  \n  public recognitionConnected: Signal<boolean | undefined>;\n  public recognitionPaused: Signal<boolean | undefined>;\n  public liveText: Signal<string>;\n  \n  private liveText$: Observable<string>;\n  private onDestroy$: Subject<void> = new Subject<void>();\n  constructor(private store: Store<AppState>,\n              private recognitionService: RecognitionService,\n              private obs: ObsConnectionService) {\n    this.recognitionConnected = toSignal(this.store.select(recognitionConnectedSelector));\n    this.recognitionPaused = toSignal(this.store.select(recognitionPausedSelector));\n    this.liveText = computed(() => (this.recognitionConnected() || this.recognitionPaused()) ? this.recognitionService.getLiveOutput('stream')() : '')\n    this.liveText$ = toObservable(this.liveText);\n  }\n\n  ngOnInit(): void {\n    this.liveText$.pipe(\n      takeUntil(this.onDestroy$)\n    ).subscribe((live) => {\n      this.obs.sendCaption(live);\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.recognitionConnected()) {\n      this.store.dispatch(RecognitionActions.disconnectRecognition({id: 'stream'}));\n    }\n    this.onDestroy$.next();\n  }\n}\n","<div class=\"drawer drawer-end overflow-y-hidden relative\">\n  <input #enable id=\"drawer-enable\" type=\"checkbox\" class=\"drawer-toggle\" />\n    <div class=\"drawer-content absolute top-0 bottom-0 left-0 right-0\">\n      <app-recognized-live-text\n        [text]=\"liveText\" \n        *ngIf=\"liveText()\"\n      ></app-recognized-live-text>\n      <div *ngIf=\"recognitionPaused()\" class=\"badge badge-warning px-6 py-3 text-center h-auto fixed top-1/2 left-1/2 -translate-y-1/2 -translate-x-1/2\" translate>HINTS.recognitionPaused</div>\n    <label for=\"drawer-enable\" class=\"drawer-button btn btn-ghost btn-half-circle-left btn-info fixed top-1/2 right-0\" *ngIf=\"recognitionConnected() || recognitionPaused()\" @slideInRightOnEnter @slideOutRightOnLeave>\n      <ng-icon class=\"text-2xl\" name=\"heroChevronLeft\"></ng-icon>\n    </label>\n  </div>\n  <div class=\"drawer-side\" @slideOutRightOnLeave>\n    <label for=\"drawer-enable\" class=\"drawer-overlay opacity-0\"></label>\n    <app-recognition-control-sidebar\n      [showFullscreen]=\"false\"\n      [showTextFlow]=\"false\"\n    ></app-recognition-control-sidebar>\n  </div>\n</div>","import { Component, ElementRef, EventEmitter, Output, Renderer2, Signal, ViewChild } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store, select } from '@ngrx/store';\nimport { AppState } from '../../../../models/app.model';\nimport { ObsConnectionState } from '../../../../reducers/obs.reducer';\nimport { selectObsConnected } from '../../../../selectors/obs.selectors';\nimport { map } from 'rxjs';\n\n@Component({\n  selector: 'app-third-party-connections',\n  templateUrl: './third-party-connections.component.html',\n  styleUrls: ['./third-party-connections.component.scss'],\n})\nexport class ThirdPartyConnectionsComponent {\n\n  @Output() openStateChanged: EventEmitter<boolean> = new EventEmitter<boolean>(false);\n  @ViewChild('checkbox', {static: true}) checkbox!: ElementRef<HTMLInputElement>;\n  public obsConnected: Signal<boolean | undefined>;\n  \n  constructor(private store: Store<AppState>,\n              private renderer: Renderer2) {\n    this.obsConnected = toSignal(this.store.pipe(select(selectObsConnected), map((conn) => conn === ObsConnectionState.connected)));\n  }\n\n  toggle(): void {\n    const newState = this.checkbox.nativeElement.checked ? false : true\n    if (newState) {\n      this.renderer.setAttribute(this.checkbox.nativeElement, 'checked', 'true');\n    } else {\n      this.renderer.removeAttribute(this.checkbox.nativeElement, 'checked');\n    }\n    console.log('toggle', newState);\n    this.openStateChanged.emit(newState);\n  }\n}\n","<div class=\"collapse collapse-arrow bg-base-100\">\n  <input #checkbox type=\"checkbox\" />\n  <div class=\"collapse-title flex flex-row items-center gap-3\" (click)=\"toggle()\">\n    <div class=\"text-xl\" translate>CONNECTIONS.externalConnections</div>\n    <div class=\"badge badge-success h-auto\" *ngIf=\"obsConnected() && !checkbox.checked\" translate>CONNECTIONS.obsStudio</div>\n  </div>\n  <div class=\"collapse-content overflow-y-auto\">\n    <app-connect-obs></app-connect-obs>\n  </div>\n</div>\n","import { Component, HostListener, OnDestroy, Signal, WritableSignal, computed, effect, signal } from '@angular/core';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Store, select } from '@ngrx/store';\nimport { Observable, Subject, filter, interval, map, take, takeWhile, tap } from 'rxjs';\nimport { PeerActions } from '../../../../actions/peer.actions';\nimport { ComponentCanDeactivate } from '../../../../guards/active-stream/active-stream.guard';\nimport { AppActions, AppState } from '../../../../models/app.model';\nimport { selectBroadcastEndedTimestamp, selectHostOnline, selectIsViewing, selectJoinCode, selectPeerError, selectPeerServerConnected, selectSocketServerConnected } from '../../../../selectors/peer.selectors';\n\n@Component({\n  selector: 'app-view-broadcast',\n  templateUrl: './view-broadcast.component.html',\n  styleUrls: ['./view-broadcast.component.scss'],\n})\nexport class ViewBroadcastComponent implements ComponentCanDeactivate, OnDestroy {\n  @HostListener('window:beforeunload')\n  public joinCode: Signal<string | undefined>;\n  public isViewing: Signal<boolean | undefined>;\n  public formGroup: FormGroup;\n  public hostOnline: Signal<boolean | undefined>;\n  public verifyJoinCodeTimer?: Observable<number>;\n  public showLeaveBroadcastDialog: WritableSignal<boolean> = signal(false);\n  public dialogClosedSubject: Subject<boolean> = new Subject<boolean>();\n  public connected: Signal<boolean | undefined>;\n  public serverError: Signal<string | undefined>;\n  public broadcastEndedTimestamp: Signal<number | undefined>;\n\n  public readonly HOST_ONLINE_TIMEOUT_SECONDS = 30;\n\n  private roomId: string;\n\n  constructor(private route: ActivatedRoute,\n              private router: Router,\n              private fb: FormBuilder,\n              private store: Store<AppState>) {\n    this.roomId = this.route.snapshot.params['id'].toLowerCase();\n    this.joinCode = toSignal(this.store.select(selectJoinCode));\n    this.isViewing = toSignal(this.store.select(selectIsViewing));\n    this.hostOnline = toSignal(this.store.select(selectHostOnline));\n    this.serverError = toSignal(this.store.select(selectPeerError));\n    this.broadcastEndedTimestamp = toSignal(this.store.select(selectBroadcastEndedTimestamp));\n    \n    const socketConnected: Signal<boolean | undefined> = toSignal(this.store.select(selectSocketServerConnected));\n    const peerConnected: Signal<boolean | undefined> = toSignal(this.store.select(selectPeerServerConnected));\n    this.connected = computed(() => socketConnected() && peerConnected())\n    \n    this.formGroup = this.fb.group({\n      joinCode: this.fb.control<string>('', [Validators.required, Validators.minLength(4), Validators.maxLength(4)])\n    })\n\n    if ('joinCode' in this.route.snapshot.queryParams && this.route.snapshot.queryParams['joinCode'] !== this.joinCode()) {\n      this._updateJoinCodeAndConnect(this.route.snapshot.queryParams['joinCode'].toLowerCase());\n    } else {\n      this._joinRoom();\n    }\n\n    effect(() => {\n      if (this.isViewing()) {\n        this.store.dispatch(AppActions.hideFooter())\n      } else {\n        this.store.dispatch(AppActions.showFooter())\n      }\n    }, {allowSignalWrites: true})\n  }\n\n  canDeactivate(): boolean | Observable<boolean> {\n    if (this.isViewing() && this.hostOnline()) {\n      this.showLeaveBroadcastDialog.set(true);\n      return this.dialogClosedSubject.asObservable().pipe(\n        take(1),\n        tap(() => this.showLeaveBroadcastDialog.set(false))\n      )\n    }\n    return true;\n  }\n\n  ngOnDestroy(): void {\n    if (this.isViewing() || this.broadcastEndedTimestamp()) {\n      this.store.dispatch(PeerActions.leaveBroadcastRoom());\n    }\n    this.store.dispatch(AppActions.showFooter());\n  }\n\n  rejoin(): void {\n    this.formGroup.updateValueAndValidity();\n    if (this.formGroup.valid) {\n      const newCode = this.formGroup.value.joinCode;\n      this._updateQueryParamsCode(newCode);\n      this._updateJoinCodeAndConnect(newCode);\n    } else {\n      this.formGroup.markAllAsTouched();\n    }\n  }\n\n  leaveSessionDialogClosed(confirmed: boolean): void {\n    this.dialogClosedSubject.next(confirmed);\n  }\n\n  private _updateQueryParamsCode(joinCode: string): void {\n    this.router.navigate([], { relativeTo: this.route, queryParams: { joinCode }, queryParamsHandling: 'merge'})\n  }\n\n  private _joinRoom(): void {\n    if (!this.connected()) {\n      this.store.pipe(\n        select(selectPeerServerConnected),\n        filter((connected) => !!connected),\n        take(1),\n      ).subscribe(() => {\n        this.store.dispatch(PeerActions.joinBroadcastRoom({id: this.roomId }))\n      })\n      this.store.dispatch(PeerActions.connectSocketServer())\n    } else {\n      this.store.dispatch(PeerActions.joinBroadcastRoom({id: this.roomId }))\n    }\n    \n    this.verifyJoinCodeTimer = interval(1000).pipe(\n      takeWhile((value) => (value < this.HOST_ONLINE_TIMEOUT_SECONDS && this.hostOnline() === undefined)),\n      map((value) => value + 1)\n    );\n  }\n\n  private _updateJoinCodeAndConnect(updatedJoinCode: string): void {\n    this.store.dispatch(PeerActions.setJoinCode({joinCode: updatedJoinCode}));\n    this.store.select(selectJoinCode).pipe(\n      filter((code) => (code === updatedJoinCode)),\n      take(1)\n    ).subscribe(() => {\n      this._joinRoom();\n    });\n  }\n}\n","<div class=\"flex flex-col w-full h-full\">\n  <ng-container *ngIf=\"connected(); else connectingToServer\">\n    <ng-container *ngIf=\"joinCode() as code; else setJoinCode\">\n      <div class=\"flex flex-row items-center justify-between p-3\" *ngIf=\"isViewing()\">\n        <div class=\"badge h-auto\" [ngClass]=\"{'badge-success': hostOnline(), 'badge-info': !hostOnline()}\">{{(hostOnline() ? 'STREAM.connected' : 'HINTS.verifyingConnection') | translate}}</div>\n        <div class=\"text-sm text-accent flex flex-row text-center\" *ngIf=\"!hostOnline()\" translate>HINTS.hostConnecting</div>\n        <app-leave-session [showDialog]=\"showLeaveBroadcastDialog()\" (dialogClosed)=\"leaveSessionDialogClosed($event)\"></app-leave-session>\n      </div>\n\n      <div class=\"flex flex-row items-center justify-end p-3\" *ngIf=\"broadcastEndedTimestamp()\">\n        <button class=\"btn btn-primary\" [routerLink]=\"['..']\" translate>BUTTONS.goBack</button>\n      </div>\n\n      <div class=\"flex flex-col basis-full self-center justify-center px-3 text-center\" *ngIf=\"broadcastEndedTimestamp() as ts\">\n        <div *ngIf=\"ts > 1; else noRoomFound\">\n          {{ 'STREAM.broadcastEnded' | translate }} {{ ts | timeago }}.\n        </div>\n        <ng-template #noRoomFound>\n          <div translate>STREAM.noSessionForRoom</div>\n        </ng-template>\n      </div>\n  \n      <app-broadcast-render *ngIf=\"hostOnline()\" class=\"flex basis-full overflow-y-hidden\"></app-broadcast-render>\n\n      <div class=\"flex flex-col basis-full self-center justify-center px-3 text-center\" *ngIf=\"!broadcastEndedTimestamp() && !hostOnline() && verifyJoinCodeTimer && (verifyJoinCodeTimer | async) as elapsed\">\n        <ng-container *ngIf=\"hostOnline() === undefined; else hostDisconnected\">\n          <span *ngIf=\"elapsed < HOST_ONLINE_TIMEOUT_SECONDS; else timedOut\">Time left: {{(HOST_ONLINE_TIMEOUT_SECONDS - elapsed)}}</span>\n          <ng-template #timedOut>\n            <span translate>STREAM.noSessionForRoom</span>\n          </ng-template>\n        </ng-container>\n\n        <ng-template #hostDisconnected>\n          <span translate>STREAM.hostOffline</span>\n        </ng-template>\n      </div>\n      \n    </ng-container>\n  </ng-container>\n  <ng-template #connectingToServer>\n    <div class=\"flex flex-col basis-full justify-center items-center gap-12\">\n      <div class=\"text-2xl text-error-content w-1/2 text-center\" translate>STREAM.connectionPendingHint</div>\n      <app-socket-server-status-chip></app-socket-server-status-chip>\n      <app-peer-server-status-chip></app-peer-server-status-chip>\n    </div>\n  </ng-template>\n  <ng-template #setJoinCode>\n    <div class=\"flex basis-full justify-center\">\n      <form class=\"flex flex-col gap-12 p-3 sm:p-12 max-w-2xl\" [formGroup]=\"formGroup\" (submit)=\"rejoin()\">\n        \n        <div class=\"text-3xl sm:text-5xl text-center\" translate>STREAM.joinCodeRequired</div>\n\n        <div class=\"flex flex-row flex-wrap items-center justify-between gap-12 sm:gap-24\">\n          \n          <div class=\"form-control\">\n            <label class=\"label\">\n              <span class=\"label-text\" [ngClass]=\"{'text-error': formGroup.controls['joinCode'].invalid && formGroup.controls['joinCode'].touched}\" translate>STREAM.joinCode</span>\n            </label>\n            <input type=\"text\" class=\"input input-bordered input-lg\" [ngClass]=\"{'input-error': formGroup.controls['joinCode'].invalid && formGroup.controls['joinCode'].touched}\" placeholder=\"E5F6\" formControlName=\"joinCode\" />\n            <label class=\"label no-height\">\n              <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['joinCode'].hasError('invalid') && formGroup.controls['joinCode'].touched\">Invalid ID</span>\n              <span class=\"label-alt-text text-error text-xs\" *ngIf=\"formGroup.controls['joinCode'].hasError('required') && formGroup.controls['joinCode'].touched\">Required</span>\n            </label>\n          </div>\n\n          <div class=\"flex flex-row gap-3\">\n            <button class=\"btn btn-lg btn-primary mt-3\" translate>BUTTONS.connect</button>\n            <button class=\"btn btn-lg mt-3\" translate type=\"button\" [routerLink]=\"['..']\">BUTTONS.cancel</button>\n          </div>\n        </div>\n      </form>\n    </div>\n  </ng-template>\n</div>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PeerLandingComponent } from './components/peer-landing/peer-landing.component';\nimport { ViewBroadcastComponent } from './components/view-broadcast/view-broadcast.component';\nimport { activeStreamGuard } from '../../guards/active-stream/active-stream.guard';\n\nconst routes: Routes = [\n  { path: '', component: PeerLandingComponent, canDeactivate: [activeStreamGuard] },\n  { path: ':id', component: ViewBroadcastComponent, canDeactivate: [activeStreamGuard] }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class PeerRoutingModule { }\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\n\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { NgIconsModule } from '@ng-icons/core';\nimport { EffectsModule } from '@ngrx/effects';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ClipboardModule } from 'ngx-clipboard';\nimport { PeerEffects } from '../../effects/peer.effects';\nimport { MediaModule } from '../media/media.module';\nimport { AcceptPeerConnectionsModalComponent } from './components/accept-peer-connections-modal/accept-peer-connections-modal.component';\nimport { BroadcastRenderComponent } from './components/broadcast-render/broadcast-render.component';\nimport { BroadcastRoomComponent } from './components/broadcast-room/broadcast-room.component';\nimport { ConnectedPeerCountChipComponent } from './components/connected-peer-count-chip/connected-peer-count-chip.component';\nimport { EndBroadcastComponent } from './components/end-broadcast/end-broadcast.component';\nimport { JoinCodeComponent } from './components/join-code/join-code.component';\nimport { LeaveSessionComponent } from './components/leave-session/leave-session.component';\nimport { PeerLandingComponent } from './components/peer-landing/peer-landing.component';\nimport { PeerServerStatusChipComponent } from './components/peer-server-status-chip/peer-server-status-chip.component';\nimport { RoomIdComponent } from './components/room-id/room-id.component';\nimport { SocketServerStatusChipComponent } from './components/socket-server-status-chip/socket-server-status-chip.component';\nimport { ViewBroadcastComponent } from './components/view-broadcast/view-broadcast.component';\nimport { PeerRoutingModule } from './peer-routing.module';\nimport { TimeagoModule } from 'ngx-timeago';\nimport { SocketDebugComponent } from '../../standalone/socket-debug/socket-debug.component';\nimport { ConnectObsComponent } from './components/connect-obs/connect-obs.component';\nimport { ThirdPartyConnectionsComponent } from './components/third-party-connections/third-party-connections.component';\nimport { ObsEffects } from '../../effects/obs.effects';\nimport { ObsConnectionStatusChipComponent } from './components/obs-connection-status-chip/obs-connection-status-chip.component';\nimport { SharedUiModule } from 'shared-ui';\nimport { StreamCaptionsComponent } from './components/stream-captions/stream-captions.component';\n\n@NgModule({\n  declarations: [\n    EndBroadcastComponent,\n    LeaveSessionComponent,\n    PeerLandingComponent,\n    SocketServerStatusChipComponent,\n    PeerServerStatusChipComponent,\n    ViewBroadcastComponent,\n    ConnectedPeerCountChipComponent,\n    RoomIdComponent,\n    JoinCodeComponent,\n    BroadcastRoomComponent,\n    BroadcastRenderComponent,\n    AcceptPeerConnectionsModalComponent,\n    ConnectObsComponent,\n    ThirdPartyConnectionsComponent,\n    ObsConnectionStatusChipComponent,\n    StreamCaptionsComponent,\n  ],\n  imports: [\n    CommonModule,\n    PeerRoutingModule,\n    RouterModule,\n    ReactiveFormsModule,\n    NgIconsModule,\n    SharedUiModule,\n    TranslateModule.forChild({ extend: true }),\n    EffectsModule.forFeature([PeerEffects, ObsEffects]),\n    MediaModule,\n    ClipboardModule,\n    TimeagoModule,\n    SocketDebugComponent,\n  ],\n})\nexport class PeerModule {}\n","import { Injectable, Signal, WritableSignal, signal } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { Socket, SocketIoConfig } from 'ngx-socket-io';\nimport Peer, { DataConnection, PeerJSOption } from 'peerjs';\nimport { BehaviorSubject, Observable, ReplaySubject, Subject, catchError, filter, of, take, timeout } from 'rxjs';\nimport { PeerActions } from '../../../actions/peer.actions';\nimport { CacheService } from '../../../services/cache/cache.service';\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { selectConnectedPeerCount, selectJoinCode, selectPeerServerConnected } from '../../../selectors/peer.selectors';\nimport { AppState } from '../../../models/app.model';\nimport { RecognitionStatus } from '../../../models/recognition.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PeerService {\n\n  public liveText$: BehaviorSubject<string> = new BehaviorSubject<string>('');\n  public textOutput$: BehaviorSubject<string[]> = new BehaviorSubject<string[]>([]);\n\n  private readonly CACHE_PERSIST_MINS = 60;\n\n  private readonly SOCKET_URL: string;\n  private readonly SOCKET_PORT: number;\n  private readonly PEER_URL: string;\n  private readonly PEER_PORT: number;\n  private readonly STUN_SERVER: string;\n  private readonly TURN_SERVER: string;\n  private readonly TURN_PASS: string;\n  private readonly SOCKET_CONFIG: SocketIoConfig;\n\n  private CONNECT_OPTS: PeerJSOption;\n  private myBroadcast = false;\n  private myId?: string;\n  private roomId: ReplaySubject<string | undefined> = new ReplaySubject();\n  private sessionJoinCode: Signal<string | undefined>;\n  private socket!: Socket;\n  private peer?: Peer;\n  private peerMap: Map<string, DataConnection> = new Map();\n  private peerServerConnected: Signal<boolean | undefined>;\n  private peerCount: Signal<number | undefined>;\n  \n  constructor(private store: Store<AppState>,\n              private cache: CacheService) { \n    this.SOCKET_URL = process.env['ZIP_SOCKET_SERVER'] || 'localhost';\n    this.SOCKET_PORT = process.env['ZIP_SOCKET_PORT'] ? Number(process.env['ZIP_SOCKET_PORT']) : 3000;\n    this.SOCKET_CONFIG = {\n      url: `${this.SOCKET_URL}:${this.SOCKET_PORT}`,\n      options: {\n        reconnectionAttempts: 10,\n      }\n    }\n    this.PEER_URL = process.env['ZIP_PEER_SERVER'] || 'localhost';\n    this.PEER_PORT = process.env['ZIP_PEER_PORT'] ? Number(process.env['ZIP_PEER_PORT']) : 9000;\n    this.STUN_SERVER = process.env['ZIP_STUN_SERVER'] || 'localhost:19302';\n    this.TURN_SERVER = process.env['ZIP_TURN_SERVER'] || 'localhost:3478';\n    this.TURN_PASS = process.env['ZIP_TURN_PASSWORD'] || 'coturn';\n    this.CONNECT_OPTS = {\n      debug: 0,\n      host: this.PEER_URL,\n      port: this.PEER_PORT,\n      secure: (this.PEER_URL !== 'localhost'),\n      config: {\n        iceServers: [{\n          urls: [\n            `stun:stun1.l.google.com:19302`,\n            `stun:stun2.l.google.com:19302`,\n            `stun:${this.STUN_SERVER}`,\n            `turn:${this.TURN_SERVER}`\n          ],\n          credential: this.TURN_PASS\n        }\n        ]\n      }\n    }\n    this.peerServerConnected = toSignal(this.store.select(selectPeerServerConnected));\n    this.sessionJoinCode = toSignal(this.store.select(selectJoinCode))\n    this.peerCount = toSignal(this.store.select(selectConnectedPeerCount));\n\n    const cached = this.cache.load('userId')\n    if (cached?.id) {\n      this.myId = cached.id;\n    }\n    // console.log(`Socket Server: ${this.SOCKET_URL}:${this.SOCKET_PORT}`);\n    // console.log(`Peer Server: ${this.PEER_URL}:${this.PEER_PORT}`)\n    \n  }\n\n  connectSocket(): Observable<string> {\n    if (this.socket) {\n      this.socket.removeAllListeners();\n    }\n    this.socket = new Socket(this.SOCKET_CONFIG);\n    \n    const sub = new Subject<string>();\n    this.socket.on('connect', () => {\n      // console.log('socket connected');\n      this.socket.emit('setId', { id: this.myId });\n      this.store.dispatch(PeerActions.socketServerConnected())\n      if (this.myId) {\n        sub.next(this.myId);\n        if (!this.peerServerConnected()) {\n          this.store.dispatch(PeerActions.connectPeerServer());\n        }\n      }\n    });\n    this.socket.on('disconnect', () => this.store.dispatch(PeerActions.socketServerDisconnected()))\n    this.socket.on('error', (err: any) => {\n      sub.error(err.message);\n      // console.log('error', err);\n      this.store.dispatch(PeerActions.socketServerError({error: err.message}))\n    })\n    this.socket.on('endBroadcast', () => this._disconnectAllPeers());\n    this.socket.on('message', (data: any) => {\n      // console.log('message', data);\n      switch (data.message) {\n        case 'room joined': {\n          if (data.room) {\n            // console.log('nexting room id', data.room);\n            this.cache.save({key: 'roomId', data: { room: data.room, myBroadcast: this.myBroadcast }, expirationMins: this.CACHE_PERSIST_MINS});\n            this.roomId.next(data.room);\n          }\n          break;\n        }\n        case 'set user id': {\n          // console.log('set user id', data.id, this.myId)\n          if (this.myId) {\n            this.socket.emit('setId', { id: this.myId })\n            if (data.id === this.myId) {\n              sub.next(this.myId);\n            }\n          } else if (data.id) {\n            this.myId = data.id;\n            // console.log('SAVING USER ID', data.id)\n            this.cache.save({key: 'userId', data: { id: data.id }, expirationMins: this.CACHE_PERSIST_MINS})\n            sub.next(data.id);\n          }\n          if (!this.peerServerConnected() && this.myId) {\n            this.store.dispatch(PeerActions.connectPeerServer());\n          }\n          break;\n        }\n        case 'user joined room': {\n          if (data.user && data.user !== this.myId) {\n            if (!this.peer) {\n              throw new Error('Cannot connect to peer - peer server connection not established');\n            }\n            if (this.myBroadcast) {\n              this._connectToPeer(data.user);\n            } else {\n              // console.log('not my broadcast, peer connected', data.user)\n            }\n          }\n          break;\n        }\n        case 'user left room': {\n          if (data.user) {\n            // console.log('disconnect from peer!', data)\n            const connection: DataConnection | undefined = this.peerMap.get(data.user);\n            if (connection) {\n              connection.addListener('close', () => {\n                // console.log('closed!');\n                this.peerMap.delete(data.user);\n              })\n              connection.close();\n            }\n          }\n          break;\n        }\n        case 'connect clients': {\n          if (data.clients) {\n            const clientIds: string[] = data.clients;\n            // console.log('clientIds', clientIds, this.myId);\n            for (const id of clientIds) {\n              if (id !== this.myId) {\n                this._connectToPeer(id);\n              }\n            }\n          }\n          break;\n        }\n        case 'broadcast expired':\n        case 'broadcast ended': {\n          if (data.expiredAt) {\n            this.store.dispatch(PeerActions.setBroadcastEndedAt({endedAt: data.expiredAt}))\n          }\n          break;\n        }\n        default: {\n          console.warn('UNHANDLED MESSAGE!!!', data);\n          break;\n        }\n      }\n      \n    })\n    \n    return sub.asObservable().pipe(timeout(30000), take(1));\n  }\n\n  disconnectSocket(): Observable<boolean> {\n    const sub = new Subject<boolean>();\n    this.socket.removeListener('disconnect');\n    this.socket.on('disconnect', () => {\n      sub.next(true);\n    });\n    setTimeout(() => this.socket.disconnect(), 1)\n    return sub.asObservable().pipe(timeout(500), take(1));\n  }\n\n  joinRoom(data?: { room: string, myBroadcast?: boolean }): Observable<string> {\n    this.myBroadcast = !(data?.room); // If we do not have a room ID, we are creating a broadcast\n    if (!data?.room) {\n      const fromCache = this.cache.load('roomId');\n      if (fromCache?.room) {\n        data = { room: fromCache.room, myBroadcast: fromCache?.myBroadcast }\n      }\n      if (fromCache?.myBroadcast !== undefined) {\n        this.myBroadcast = fromCache.myBroadcast;\n      }\n    }\n    if (this.myBroadcast) {\n      const fromCache = this.cache.load('joinCode');\n      let joinCode: string;\n      if (fromCache) {\n        joinCode = fromCache.joinCode;\n      } else {\n        joinCode = this._generateJoinCode();\n        this.cache.save({key: 'joinCode', data: { joinCode }})\n      }\n      this.store.dispatch(PeerActions.setJoinCode({joinCode}));\n    }\n    this.socket.volatile().emit('join', { room: data?.room, myBroadcast: this.myBroadcast });\n    return this.roomId.asObservable().pipe(filter((v) => !!v)) as Observable<string>;\n  }\n\n  sendServerMessage(data: any) {\n    this.socket.volatile().emit('message', data);\n  }\n\n  connectPeerServer(): Observable<string> {\n    if (!this.myId) {\n      throw new Error('Must obtain ID from socket server');\n    }\n    if (this.peer?.id === this.myId && !this.peer.disconnected) {\n      // console.log('peer server connection already exists and appears to be connected!!!');\n      return of(this.myId);\n    }\n    const sub: ReplaySubject<string> = new ReplaySubject<string>();\n    this.CONNECT_OPTS.config!.iceServers![0].username = this.myId;\n    this.peer = new Peer(this.myId, this.CONNECT_OPTS);\n    this.peer.addListener('open', () => {\n      this.store.dispatch(PeerActions.peerServerConnected());\n      sub.next(this.myId as string);\n    });\n    this.peer.addListener('disconnected', () => {\n      if (this.peerServerConnected()) {\n        this.store.dispatch(PeerActions.peerServerDisconnected());\n      }\n    });\n    this.peer.once('error', (err: any) => {\n      // console.log(err.message);\n      this.store.dispatch(PeerActions.peerServerError({error: err.message}));\n      this._reconnectPeerServer();\n    })\n    this.peer.addListener('connection', (connection: DataConnection) => {\n      // console.log('incoming connection!', connection);\n      this.peerMap.set(connection.connectionId, connection);\n      this._handlePeerData(connection);\n    })\n    return sub.asObservable().pipe(take(1));\n  }\n\n  disconnectPeerServer(): Observable<boolean> {\n    if (!this.peer) {\n      throw new Error('Peer not connected')\n    }\n    const sub: Subject<boolean> = new Subject<boolean>();\n    this.peer.removeListener('close');\n    this.peer.addListener('disconnected', () => {\n      sub.next(true);\n    });\n    setTimeout(() => {\n      this.peer!.disconnect();\n      // console.log('peer disconnected');\n    }, 1);\n    return sub.asObservable().pipe(take(1));\n  }\n\n  sendData(peerId: string, data: any): void {\n    const connection: DataConnection | undefined = this.peerMap.get(peerId);\n    if (!connection) {\n      throw new Error(`connection ${peerId} not found`)\n    } else {\n      connection.send(data)\n    }\n  }\n\n  broadcastData(data: any): void {\n    for (const conn of this.peerMap.values()) {\n      conn.send(data);\n    }\n  }\n\n  endBroadcast(): Observable<void> {\n    const sub = new ReplaySubject<void>();\n    const fromCache = this.cache.load('roomId');\n    const room: string | undefined = fromCache?.room;\n    if (!room) {\n      throw new Error('No room defined for broadcast');\n    }\n    this.cache.remove('roomId');\n    this.cache.remove('joinCode');\n    this.socket.once('endBroadcast', () => {\n      // console.log('endbroadcast response recieved');\n      sub.next();\n      sub.complete();\n    });\n    this.socket.emit('endBroadcast', { room });\n    return sub;\n  }\n\n  leaveSession(): void {\n    // console.log('leaveSession', this.peerMap.size);\n    this.cache.remove('roomId');\n    this.cache.remove('joinCode');\n    this.peerMap.forEach((connection: DataConnection) => {\n      // console.log('peer', id);\n      connection.close();\n    });\n    this.textOutput$.next([]);\n    this.liveText$.next('')\n    this.peerMap.clear();\n  }\n\n  private _reconnectPeerServer(tryNumber?: number): void {\n    let thisTry = tryNumber || 0;\n    const timerId = setTimeout(() => {\n      if (this.peer?.disconnected && thisTry < 5) {\n        this.peer.once('error', () => {\n          this._reconnectPeerServer(++thisTry);\n        })\n        this.peer!.once('open', () => {\n          thisTry = 0;\n          clearTimeout(timerId)\n        })\n        this.peer?.reconnect();\n      } else if (thisTry < 5) {\n        this._reconnectPeerServer(++thisTry);\n      } else {\n        this.store.dispatch(PeerActions.connectPeerServerFailure({error: 'Peer server connection lost.'}))\n        thisTry = 0;\n        clearTimeout(timerId);\n      }\n    }, (thisTry * 1000) + 150);\n  }\n\n  private _connectToPeer(peerId: string): void {\n    const connection = this.peer!.connect(peerId);\n    this._handlePeerData(connection);\n    this.peerMap.set(peerId, connection);\n    this._updateConnectedPeerCount();\n    connection.on('close', () => {\n      // console.log('connection closed', peerId)\n      this.peerMap.delete(peerId);\n      this._updateConnectedPeerCount();\n    })\n  }\n\n  private _updateConnectedPeerCount(): void {\n    if (this.peerMap.size !== this.peerCount()) {\n      this.store.dispatch(PeerActions.updateConnectedPeerCount({count: this.peerMap.size}));\n    }\n  }\n\n  private _disconnectAllPeers(): void {\n    for (const conn of this.peerMap.values()) {\n      conn.close();\n    }\n    this.peerMap.clear();\n    this._updateConnectedPeerCount();\n  }\n\n  private _generateJoinCode(): string {\n    let outString = '';\n    const inOptions = 'acdefghjkmnpqrstuvwxyz2345679';\n    for (let j = 0; j < 4; j++) {\n      outString += inOptions.charAt(Math.floor(Math.random() * inOptions.length));\n    }\n    return outString;\n  }\n\n  private _handlePeerData(connection: DataConnection) {\n    \n    connection.on('close', () => {\n      // console.log('connection closed');\n      if (!this.myBroadcast) {\n        this.store.dispatch(PeerActions.setHostStatus({hostOnline: false}));\n      }\n      connection.removeAllListeners();\n    });\n    \n    connection.on('open', () => {\n      // console.log('peer connection opened', this.myBroadcast);\n      if (this.myBroadcast) {\n        // console.log('must validate join code', this.sessionJoinCode());\n        connection.send({request: 'joinCode'})\n      }\n    });\n    \n    connection.on('data', (data: any) => {\n      if (data?.request) {\n        switch (data.request) {\n          case 'joinCode':\n            connection.send({request: 'validateJoinCode', joinCode: this.sessionJoinCode()});\n            break;\n          case 'validateJoinCode':\n            if (this._verifyJoinCode(data.joinCode)) {\n              // console.log('join code verified')\n              connection.send({response: 'valid'})\n            } else {\n              // console.log('closing connection');\n              connection.send({response: 'invalid'})\n            }\n            break;\n          case 'disconnect':\n            // console.log('disconnect requested');\n            connection.close();\n            this.store.dispatch(PeerActions.setHostStatus({hostOnline: false}));\n            break;\n          case 'hostOffline':\n            // console.log('host offline');\n            this.store.dispatch(PeerActions.setHostStatus({hostOnline: false}));\n            break;\n        }\n      } else if (data?.response) {\n        switch (data.response) {\n          case 'valid':\n            // console.log('join code valid!');\n            this.store.dispatch(PeerActions.setHostStatus({hostOnline: true}));\n            break;\n          case 'invalid':\n            connection.close();\n            this.store.dispatch(PeerActions.clearJoinCode());\n            break;\n        }\n      } else if ('recognition' in data && 'type' in data) {\n        switch (data.type) {\n          case 'live': \n            this.liveText$.next(data.recognition);\n            break;\n          case 'segment':\n            this.textOutput$.next(data.recognition);\n            break;\n        }\n      } else if (data?.type === 'status' && 'status' in data) {\n        this.store.dispatch(PeerActions.setBroadcastPausedState({paused: data.status === RecognitionStatus.paused}))\n      } else {\n        console.warn(`UNHANDLED DATA`, data)\n      }\n    })\n  }\n\n  private _verifyJoinCode(incomingCode?: string): boolean {\n    const thisCode = this.sessionJoinCode();\n    return !!(thisCode && incomingCode && thisCode === incomingCode.toLowerCase())\n  }\n  \n}\n","import { Injectable } from '@angular/core';\nimport { SessionStorageSaveOptions } from '../../models/cache.model';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CacheService {\n\n  save(options: SessionStorageSaveOptions) {\n    // Set default values for optionals\n    options.expirationMins = options.expirationMins || 0\n\n    // Set expiration date in miliseconds\n    const expirationMS = options.expirationMins !== 0 ? options.expirationMins * 60 * 1000 : 0\n\n    const record = {\n        value: typeof options.data === 'string' ? options.data : JSON.stringify(options.data),\n        expiration: expirationMS !== 0 ? new Date().getTime() + expirationMS : null,\n        hasExpiration: expirationMS !== 0 ? true : false\n    }\n    sessionStorage.setItem(options.key, JSON.stringify(record))\n  }\n\n  load(key: string) {\n      // Get cached data from sessionStorage\n      const item = sessionStorage.getItem(key)\n      if (item !== null) {\n          const record = JSON.parse(item)\n          const now = new Date().getTime()\n          // Expired data will return null\n          if (!record || (record.hasExpiration && record.expiration <= now)) {\n              return null\n          } else {\n              return JSON.parse(record.value)\n          }\n      }\n      return null\n  }\n\n  remove(key: string) {\n      sessionStorage.removeItem(key)\n  }\n\n  cleansessionStorage() {\n      sessionStorage.clear()\n  }\n}\n","import { Injectable, Signal } from '@angular/core';\n\nimport { toSignal } from '@angular/core/rxjs-interop';\nimport { Store } from '@ngrx/store';\nimport OBSWebSocket from 'obs-websocket-js';\nimport { Observable, from, timeout } from 'rxjs';\nimport { ObsActions } from '../../actions/obs.actions';\nimport { AppState } from '../../models/app.model';\nimport { selectObsStreamActive } from '../../selectors/obs.selectors';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ObsConnectionService {\n\n  private obs: OBSWebSocket;\n  private isStreaming: Signal<boolean | undefined>;\n  constructor(private store: Store<AppState>) { \n    this.obs = new OBSWebSocket();\n    this.obs.on('ConnectionClosed', () => this.store.dispatch(ObsActions.disconnectSuccess()))\n    this.obs.on('ConnectionError', (err) => this.store.dispatch(ObsActions.errorReceived({error: err.message || 'Unknown Error Occurred'})))\n    this.obs.on('Identified', () => this._addObsListeners());\n    this.isStreaming = toSignal(this.store.select(selectObsStreamActive));\n  }\n\n  connect({ip, port, password}: {ip: string, port: number, password: string | null}): Observable<any> {\n    const url = `ws://${ip}:${port}`;\n    const pass: string | undefined = password ? password : undefined;\n    return from(this.obs.connect(url, pass)).pipe(timeout(5000))\n  }\n\n  disconnect(): Observable<void> {\n    this.obs.removeListener('ConnectionClosed');\n    this.obs.removeListener('ConnectionError');\n    return from(this.obs.disconnect());\n  }\n\n  async sendCaption(captionText: string): Promise<void> {\n    if (this.isStreaming()) {\n      this.obs.call<\"SendStreamCaption\">('SendStreamCaption', {captionText})\n    }\n  }\n\n  private _addObsListeners(): void {\n    this.obs.call<\"GetStreamStatus\">('GetStreamStatus').then((status) => {\n      this.store.dispatch(ObsActions.setStreamingActive({active: status.outputActive}));\n    });\n    this.obs.on<\"StreamStateChanged\">('StreamStateChanged', (status) => {\n      this.store.dispatch(ObsActions.setStreamingActive({active: status.outputActive}));\n    })\n  }\n  \n}\n","import { CommonModule } from '@angular/common';\nimport { Component, Signal } from '@angular/core';\nimport { Store, select } from '@ngrx/store';\nimport { AppState } from '../../models/app.model';\nimport { PeerActions } from '../../actions/peer.actions';\nimport { selectPeerState } from '../../selectors/peer.selectors';\nimport { map } from 'rxjs';\nimport { toSignal } from '@angular/core/rxjs-interop';\n\n@Component({\n  selector: 'app-socket-debug',\n  standalone: true,\n  imports: [\n    CommonModule,\n  ],\n  templateUrl: './socket-debug.component.html',\n  styleUrls: ['./socket-debug.component.scss'],\n})\nexport class SocketDebugComponent {\n  private userId: Signal<string | undefined>;\n  constructor(private store: Store<AppState>) {\n    this.userId = toSignal(this.store.pipe(select(selectPeerState), map((state) => state.id)));\n  }\n\n  sendSocketDisconnected(): void {\n    console.log('dispatching socket disconnected');\n    this.store.dispatch(PeerActions.socketServerDisconnected());\n  }\n\n  sendUserIdAssigned(): void {\n    console.log('dispatching socketUserIdAssigned', this.userId());\n    this.store.dispatch(PeerActions.socketServerUserIdAssigned({id: this.userId() || ''}))\n  }\n\n  sendConnectPeerServer(): void {\n    this.store.dispatch(PeerActions.connectPeerServer());\n  }\n}\n","<div class=\"flex flex-col gap-3 bg-transparent\">\n  <button class=\"btn btn-sm\" (click)=\"sendSocketDisconnected()\">Socket Disconnected Event</button>\n  <button class=\"btn btn-sm\" (click)=\"sendUserIdAssigned()\">User Id Assigned Event</button>\n  <button class=\"btn btn-sm\" (click)=\"sendConnectPeerServer()\">Connect Peer Server Event</button>\n</div>\n",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory();\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\troot.CryptoJS = factory();\n\t}\n}(this, function () {\n\n\t/*globals window, global, require*/\n\n\t/**\n\t * CryptoJS core components.\n\t */\n\tvar CryptoJS = CryptoJS || (function (Math, undefined) {\n\n\t    var crypto;\n\n\t    // Native crypto from window (Browser)\n\t    if (typeof window !== 'undefined' && window.crypto) {\n\t        crypto = window.crypto;\n\t    }\n\n\t    // Native crypto in web worker (Browser)\n\t    if (typeof self !== 'undefined' && self.crypto) {\n\t        crypto = self.crypto;\n\t    }\n\n\t    // Native crypto from worker\n\t    if (typeof globalThis !== 'undefined' && globalThis.crypto) {\n\t        crypto = globalThis.crypto;\n\t    }\n\n\t    // Native (experimental IE 11) crypto from window (Browser)\n\t    if (!crypto && typeof window !== 'undefined' && window.msCrypto) {\n\t        crypto = window.msCrypto;\n\t    }\n\n\t    // Native crypto from global (NodeJS)\n\t    if (!crypto && typeof global !== 'undefined' && global.crypto) {\n\t        crypto = global.crypto;\n\t    }\n\n\t    // Native crypto import via require (NodeJS)\n\t    if (!crypto && typeof require === 'function') {\n\t        try {\n\t            crypto = require('crypto');\n\t        } catch (err) {}\n\t    }\n\n\t    /*\n\t     * Cryptographically secure pseudorandom number generator\n\t     *\n\t     * As Math.random() is cryptographically not safe to use\n\t     */\n\t    var cryptoSecureRandomInt = function () {\n\t        if (crypto) {\n\t            // Use getRandomValues method (Browser)\n\t            if (typeof crypto.getRandomValues === 'function') {\n\t                try {\n\t                    return crypto.getRandomValues(new Uint32Array(1))[0];\n\t                } catch (err) {}\n\t            }\n\n\t            // Use randomBytes method (NodeJS)\n\t            if (typeof crypto.randomBytes === 'function') {\n\t                try {\n\t                    return crypto.randomBytes(4).readInt32LE();\n\t                } catch (err) {}\n\t            }\n\t        }\n\n\t        throw new Error('Native crypto module could not be used to get secure random number.');\n\t    };\n\n\t    /*\n\t     * Local polyfill of Object.create\n\n\t     */\n\t    var create = Object.create || (function () {\n\t        function F() {}\n\n\t        return function (obj) {\n\t            var subtype;\n\n\t            F.prototype = obj;\n\n\t            subtype = new F();\n\n\t            F.prototype = null;\n\n\t            return subtype;\n\t        };\n\t    }());\n\n\t    /**\n\t     * CryptoJS namespace.\n\t     */\n\t    var C = {};\n\n\t    /**\n\t     * Library namespace.\n\t     */\n\t    var C_lib = C.lib = {};\n\n\t    /**\n\t     * Base object for prototypal inheritance.\n\t     */\n\t    var Base = C_lib.Base = (function () {\n\n\n\t        return {\n\t            /**\n\t             * Creates a new object that inherits from this object.\n\t             *\n\t             * @param {Object} overrides Properties to copy into the new object.\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         field: 'value',\n\t             *\n\t             *         method: function () {\n\t             *         }\n\t             *     });\n\t             */\n\t            extend: function (overrides) {\n\t                // Spawn\n\t                var subtype = create(this);\n\n\t                // Augment\n\t                if (overrides) {\n\t                    subtype.mixIn(overrides);\n\t                }\n\n\t                // Create default initializer\n\t                if (!subtype.hasOwnProperty('init') || this.init === subtype.init) {\n\t                    subtype.init = function () {\n\t                        subtype.$super.init.apply(this, arguments);\n\t                    };\n\t                }\n\n\t                // Initializer's prototype is the subtype object\n\t                subtype.init.prototype = subtype;\n\n\t                // Reference supertype\n\t                subtype.$super = this;\n\n\t                return subtype;\n\t            },\n\n\t            /**\n\t             * Extends this object and runs the init method.\n\t             * Arguments to create() will be passed to init().\n\t             *\n\t             * @return {Object} The new object.\n\t             *\n\t             * @static\n\t             *\n\t             * @example\n\t             *\n\t             *     var instance = MyType.create();\n\t             */\n\t            create: function () {\n\t                var instance = this.extend();\n\t                instance.init.apply(instance, arguments);\n\n\t                return instance;\n\t            },\n\n\t            /**\n\t             * Initializes a newly created object.\n\t             * Override this method to add some logic when your objects are created.\n\t             *\n\t             * @example\n\t             *\n\t             *     var MyType = CryptoJS.lib.Base.extend({\n\t             *         init: function () {\n\t             *             // ...\n\t             *         }\n\t             *     });\n\t             */\n\t            init: function () {\n\t            },\n\n\t            /**\n\t             * Copies properties into this object.\n\t             *\n\t             * @param {Object} properties The properties to mix in.\n\t             *\n\t             * @example\n\t             *\n\t             *     MyType.mixIn({\n\t             *         field: 'value'\n\t             *     });\n\t             */\n\t            mixIn: function (properties) {\n\t                for (var propertyName in properties) {\n\t                    if (properties.hasOwnProperty(propertyName)) {\n\t                        this[propertyName] = properties[propertyName];\n\t                    }\n\t                }\n\n\t                // IE won't copy toString using the loop above\n\t                if (properties.hasOwnProperty('toString')) {\n\t                    this.toString = properties.toString;\n\t                }\n\t            },\n\n\t            /**\n\t             * Creates a copy of this object.\n\t             *\n\t             * @return {Object} The clone.\n\t             *\n\t             * @example\n\t             *\n\t             *     var clone = instance.clone();\n\t             */\n\t            clone: function () {\n\t                return this.init.prototype.extend(this);\n\t            }\n\t        };\n\t    }());\n\n\t    /**\n\t     * An array of 32-bit words.\n\t     *\n\t     * @property {Array} words The array of 32-bit words.\n\t     * @property {number} sigBytes The number of significant bytes in this word array.\n\t     */\n\t    var WordArray = C_lib.WordArray = Base.extend({\n\t        /**\n\t         * Initializes a newly created word array.\n\t         *\n\t         * @param {Array} words (Optional) An array of 32-bit words.\n\t         * @param {number} sigBytes (Optional) The number of significant bytes in the words.\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.create();\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607]);\n\t         *     var wordArray = CryptoJS.lib.WordArray.create([0x00010203, 0x04050607], 6);\n\t         */\n\t        init: function (words, sigBytes) {\n\t            words = this.words = words || [];\n\n\t            if (sigBytes != undefined) {\n\t                this.sigBytes = sigBytes;\n\t            } else {\n\t                this.sigBytes = words.length * 4;\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts this word array to a string.\n\t         *\n\t         * @param {Encoder} encoder (Optional) The encoding strategy to use. Default: CryptoJS.enc.Hex\n\t         *\n\t         * @return {string} The stringified word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     var string = wordArray + '';\n\t         *     var string = wordArray.toString();\n\t         *     var string = wordArray.toString(CryptoJS.enc.Utf8);\n\t         */\n\t        toString: function (encoder) {\n\t            return (encoder || Hex).stringify(this);\n\t        },\n\n\t        /**\n\t         * Concatenates a word array to this word array.\n\t         *\n\t         * @param {WordArray} wordArray The word array to append.\n\t         *\n\t         * @return {WordArray} This word array.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray1.concat(wordArray2);\n\t         */\n\t        concat: function (wordArray) {\n\t            // Shortcuts\n\t            var thisWords = this.words;\n\t            var thatWords = wordArray.words;\n\t            var thisSigBytes = this.sigBytes;\n\t            var thatSigBytes = wordArray.sigBytes;\n\n\t            // Clamp excess bits\n\t            this.clamp();\n\n\t            // Concat\n\t            if (thisSigBytes % 4) {\n\t                // Copy one byte at a time\n\t                for (var i = 0; i < thatSigBytes; i++) {\n\t                    var thatByte = (thatWords[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                    thisWords[(thisSigBytes + i) >>> 2] |= thatByte << (24 - ((thisSigBytes + i) % 4) * 8);\n\t                }\n\t            } else {\n\t                // Copy one word at a time\n\t                for (var j = 0; j < thatSigBytes; j += 4) {\n\t                    thisWords[(thisSigBytes + j) >>> 2] = thatWords[j >>> 2];\n\t                }\n\t            }\n\t            this.sigBytes += thatSigBytes;\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Removes insignificant bits.\n\t         *\n\t         * @example\n\t         *\n\t         *     wordArray.clamp();\n\t         */\n\t        clamp: function () {\n\t            // Shortcuts\n\t            var words = this.words;\n\t            var sigBytes = this.sigBytes;\n\n\t            // Clamp\n\t            words[sigBytes >>> 2] &= 0xffffffff << (32 - (sigBytes % 4) * 8);\n\t            words.length = Math.ceil(sigBytes / 4);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this word array.\n\t         *\n\t         * @return {WordArray} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = wordArray.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone.words = this.words.slice(0);\n\n\t            return clone;\n\t        },\n\n\t        /**\n\t         * Creates a word array filled with random bytes.\n\t         *\n\t         * @param {number} nBytes The number of random bytes to generate.\n\t         *\n\t         * @return {WordArray} The random word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.lib.WordArray.random(16);\n\t         */\n\t        random: function (nBytes) {\n\t            var words = [];\n\n\t            for (var i = 0; i < nBytes; i += 4) {\n\t                words.push(cryptoSecureRandomInt());\n\t            }\n\n\t            return new WordArray.init(words, nBytes);\n\t        }\n\t    });\n\n\t    /**\n\t     * Encoder namespace.\n\t     */\n\t    var C_enc = C.enc = {};\n\n\t    /**\n\t     * Hex encoding strategy.\n\t     */\n\t    var Hex = C_enc.Hex = {\n\t        /**\n\t         * Converts a word array to a hex string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The hex string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var hexString = CryptoJS.enc.Hex.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var hexChars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                hexChars.push((bite >>> 4).toString(16));\n\t                hexChars.push((bite & 0x0f).toString(16));\n\t            }\n\n\t            return hexChars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a hex string to a word array.\n\t         *\n\t         * @param {string} hexStr The hex string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Hex.parse(hexString);\n\t         */\n\t        parse: function (hexStr) {\n\t            // Shortcut\n\t            var hexStrLength = hexStr.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < hexStrLength; i += 2) {\n\t                words[i >>> 3] |= parseInt(hexStr.substr(i, 2), 16) << (24 - (i % 8) * 4);\n\t            }\n\n\t            return new WordArray.init(words, hexStrLength / 2);\n\t        }\n\t    };\n\n\t    /**\n\t     * Latin1 encoding strategy.\n\t     */\n\t    var Latin1 = C_enc.Latin1 = {\n\t        /**\n\t         * Converts a word array to a Latin1 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Latin1 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var latin1String = CryptoJS.enc.Latin1.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\n\t            // Convert\n\t            var latin1Chars = [];\n\t            for (var i = 0; i < sigBytes; i++) {\n\t                var bite = (words[i >>> 2] >>> (24 - (i % 4) * 8)) & 0xff;\n\t                latin1Chars.push(String.fromCharCode(bite));\n\t            }\n\n\t            return latin1Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Latin1 string to a word array.\n\t         *\n\t         * @param {string} latin1Str The Latin1 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Latin1.parse(latin1String);\n\t         */\n\t        parse: function (latin1Str) {\n\t            // Shortcut\n\t            var latin1StrLength = latin1Str.length;\n\n\t            // Convert\n\t            var words = [];\n\t            for (var i = 0; i < latin1StrLength; i++) {\n\t                words[i >>> 2] |= (latin1Str.charCodeAt(i) & 0xff) << (24 - (i % 4) * 8);\n\t            }\n\n\t            return new WordArray.init(words, latin1StrLength);\n\t        }\n\t    };\n\n\t    /**\n\t     * UTF-8 encoding strategy.\n\t     */\n\t    var Utf8 = C_enc.Utf8 = {\n\t        /**\n\t         * Converts a word array to a UTF-8 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The UTF-8 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var utf8String = CryptoJS.enc.Utf8.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            try {\n\t                return decodeURIComponent(escape(Latin1.stringify(wordArray)));\n\t            } catch (e) {\n\t                throw new Error('Malformed UTF-8 data');\n\t            }\n\t        },\n\n\t        /**\n\t         * Converts a UTF-8 string to a word array.\n\t         *\n\t         * @param {string} utf8Str The UTF-8 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Utf8.parse(utf8String);\n\t         */\n\t        parse: function (utf8Str) {\n\t            return Latin1.parse(unescape(encodeURIComponent(utf8Str)));\n\t        }\n\t    };\n\n\t    /**\n\t     * Abstract buffered block algorithm template.\n\t     *\n\t     * The property blockSize must be implemented in a concrete subtype.\n\t     *\n\t     * @property {number} _minBufferSize The number of blocks that should be kept unprocessed in the buffer. Default: 0\n\t     */\n\t    var BufferedBlockAlgorithm = C_lib.BufferedBlockAlgorithm = Base.extend({\n\t        /**\n\t         * Resets this block algorithm's data buffer to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm.reset();\n\t         */\n\t        reset: function () {\n\t            // Initial values\n\t            this._data = new WordArray.init();\n\t            this._nDataBytes = 0;\n\t        },\n\n\t        /**\n\t         * Adds new data to this block algorithm's buffer.\n\t         *\n\t         * @param {WordArray|string} data The data to append. Strings are converted to a WordArray using UTF-8.\n\t         *\n\t         * @example\n\t         *\n\t         *     bufferedBlockAlgorithm._append('data');\n\t         *     bufferedBlockAlgorithm._append(wordArray);\n\t         */\n\t        _append: function (data) {\n\t            // Convert string to WordArray, else assume WordArray already\n\t            if (typeof data == 'string') {\n\t                data = Utf8.parse(data);\n\t            }\n\n\t            // Append\n\t            this._data.concat(data);\n\t            this._nDataBytes += data.sigBytes;\n\t        },\n\n\t        /**\n\t         * Processes available data blocks.\n\t         *\n\t         * This method invokes _doProcessBlock(offset), which must be implemented by a concrete subtype.\n\t         *\n\t         * @param {boolean} doFlush Whether all blocks and partial blocks should be processed.\n\t         *\n\t         * @return {WordArray} The processed data.\n\t         *\n\t         * @example\n\t         *\n\t         *     var processedData = bufferedBlockAlgorithm._process();\n\t         *     var processedData = bufferedBlockAlgorithm._process(!!'flush');\n\t         */\n\t        _process: function (doFlush) {\n\t            var processedWords;\n\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\t            var dataSigBytes = data.sigBytes;\n\t            var blockSize = this.blockSize;\n\t            var blockSizeBytes = blockSize * 4;\n\n\t            // Count blocks ready\n\t            var nBlocksReady = dataSigBytes / blockSizeBytes;\n\t            if (doFlush) {\n\t                // Round up to include partial blocks\n\t                nBlocksReady = Math.ceil(nBlocksReady);\n\t            } else {\n\t                // Round down to include only full blocks,\n\t                // less the number of blocks that must remain in the buffer\n\t                nBlocksReady = Math.max((nBlocksReady | 0) - this._minBufferSize, 0);\n\t            }\n\n\t            // Count words ready\n\t            var nWordsReady = nBlocksReady * blockSize;\n\n\t            // Count bytes ready\n\t            var nBytesReady = Math.min(nWordsReady * 4, dataSigBytes);\n\n\t            // Process blocks\n\t            if (nWordsReady) {\n\t                for (var offset = 0; offset < nWordsReady; offset += blockSize) {\n\t                    // Perform concrete-algorithm logic\n\t                    this._doProcessBlock(dataWords, offset);\n\t                }\n\n\t                // Remove processed words\n\t                processedWords = dataWords.splice(0, nWordsReady);\n\t                data.sigBytes -= nBytesReady;\n\t            }\n\n\t            // Return processed words\n\t            return new WordArray.init(processedWords, nBytesReady);\n\t        },\n\n\t        /**\n\t         * Creates a copy of this object.\n\t         *\n\t         * @return {Object} The clone.\n\t         *\n\t         * @example\n\t         *\n\t         *     var clone = bufferedBlockAlgorithm.clone();\n\t         */\n\t        clone: function () {\n\t            var clone = Base.clone.call(this);\n\t            clone._data = this._data.clone();\n\n\t            return clone;\n\t        },\n\n\t        _minBufferSize: 0\n\t    });\n\n\t    /**\n\t     * Abstract hasher template.\n\t     *\n\t     * @property {number} blockSize The number of 32-bit words this hasher operates on. Default: 16 (512 bits)\n\t     */\n\t    var Hasher = C_lib.Hasher = BufferedBlockAlgorithm.extend({\n\t        /**\n\t         * Configuration options.\n\t         */\n\t        cfg: Base.extend(),\n\n\t        /**\n\t         * Initializes a newly created hasher.\n\t         *\n\t         * @param {Object} cfg (Optional) The configuration options to use for this hash computation.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hasher = CryptoJS.algo.SHA256.create();\n\t         */\n\t        init: function (cfg) {\n\t            // Apply config defaults\n\t            this.cfg = this.cfg.extend(cfg);\n\n\t            // Set initial values\n\t            this.reset();\n\t        },\n\n\t        /**\n\t         * Resets this hasher to its initial state.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.reset();\n\t         */\n\t        reset: function () {\n\t            // Reset data buffer\n\t            BufferedBlockAlgorithm.reset.call(this);\n\n\t            // Perform concrete-hasher logic\n\t            this._doReset();\n\t        },\n\n\t        /**\n\t         * Updates this hasher with a message.\n\t         *\n\t         * @param {WordArray|string} messageUpdate The message to append.\n\t         *\n\t         * @return {Hasher} This hasher.\n\t         *\n\t         * @example\n\t         *\n\t         *     hasher.update('message');\n\t         *     hasher.update(wordArray);\n\t         */\n\t        update: function (messageUpdate) {\n\t            // Append\n\t            this._append(messageUpdate);\n\n\t            // Update the hash\n\t            this._process();\n\n\t            // Chainable\n\t            return this;\n\t        },\n\n\t        /**\n\t         * Finalizes the hash computation.\n\t         * Note that the finalize operation is effectively a destructive, read-once operation.\n\t         *\n\t         * @param {WordArray|string} messageUpdate (Optional) A final message update.\n\t         *\n\t         * @return {WordArray} The hash.\n\t         *\n\t         * @example\n\t         *\n\t         *     var hash = hasher.finalize();\n\t         *     var hash = hasher.finalize('message');\n\t         *     var hash = hasher.finalize(wordArray);\n\t         */\n\t        finalize: function (messageUpdate) {\n\t            // Final message update\n\t            if (messageUpdate) {\n\t                this._append(messageUpdate);\n\t            }\n\n\t            // Perform concrete-hasher logic\n\t            var hash = this._doFinalize();\n\n\t            return hash;\n\t        },\n\n\t        blockSize: 512/32,\n\n\t        /**\n\t         * Creates a shortcut function to a hasher's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to create a helper for.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var SHA256 = CryptoJS.lib.Hasher._createHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHelper: function (hasher) {\n\t            return function (message, cfg) {\n\t                return new hasher.init(cfg).finalize(message);\n\t            };\n\t        },\n\n\t        /**\n\t         * Creates a shortcut function to the HMAC's object interface.\n\t         *\n\t         * @param {Hasher} hasher The hasher to use in this HMAC helper.\n\t         *\n\t         * @return {Function} The shortcut function.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var HmacSHA256 = CryptoJS.lib.Hasher._createHmacHelper(CryptoJS.algo.SHA256);\n\t         */\n\t        _createHmacHelper: function (hasher) {\n\t            return function (message, key) {\n\t                return new C_algo.HMAC.init(hasher, key).finalize(message);\n\t            };\n\t        }\n\t    });\n\n\t    /**\n\t     * Algorithm namespace.\n\t     */\n\t    var C_algo = C.algo = {};\n\n\t    return C;\n\t}(Math));\n\n\n\treturn CryptoJS;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function () {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var C_enc = C.enc;\n\n\t    /**\n\t     * Base64 encoding strategy.\n\t     */\n\t    var Base64 = C_enc.Base64 = {\n\t        /**\n\t         * Converts a word array to a Base64 string.\n\t         *\n\t         * @param {WordArray} wordArray The word array.\n\t         *\n\t         * @return {string} The Base64 string.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var base64String = CryptoJS.enc.Base64.stringify(wordArray);\n\t         */\n\t        stringify: function (wordArray) {\n\t            // Shortcuts\n\t            var words = wordArray.words;\n\t            var sigBytes = wordArray.sigBytes;\n\t            var map = this._map;\n\n\t            // Clamp excess bits\n\t            wordArray.clamp();\n\n\t            // Convert\n\t            var base64Chars = [];\n\t            for (var i = 0; i < sigBytes; i += 3) {\n\t                var byte1 = (words[i >>> 2]       >>> (24 - (i % 4) * 8))       & 0xff;\n\t                var byte2 = (words[(i + 1) >>> 2] >>> (24 - ((i + 1) % 4) * 8)) & 0xff;\n\t                var byte3 = (words[(i + 2) >>> 2] >>> (24 - ((i + 2) % 4) * 8)) & 0xff;\n\n\t                var triplet = (byte1 << 16) | (byte2 << 8) | byte3;\n\n\t                for (var j = 0; (j < 4) && (i + j * 0.75 < sigBytes); j++) {\n\t                    base64Chars.push(map.charAt((triplet >>> (6 * (3 - j))) & 0x3f));\n\t                }\n\t            }\n\n\t            // Add padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                while (base64Chars.length % 4) {\n\t                    base64Chars.push(paddingChar);\n\t                }\n\t            }\n\n\t            return base64Chars.join('');\n\t        },\n\n\t        /**\n\t         * Converts a Base64 string to a word array.\n\t         *\n\t         * @param {string} base64Str The Base64 string.\n\t         *\n\t         * @return {WordArray} The word array.\n\t         *\n\t         * @static\n\t         *\n\t         * @example\n\t         *\n\t         *     var wordArray = CryptoJS.enc.Base64.parse(base64String);\n\t         */\n\t        parse: function (base64Str) {\n\t            // Shortcuts\n\t            var base64StrLength = base64Str.length;\n\t            var map = this._map;\n\t            var reverseMap = this._reverseMap;\n\n\t            if (!reverseMap) {\n\t                    reverseMap = this._reverseMap = [];\n\t                    for (var j = 0; j < map.length; j++) {\n\t                        reverseMap[map.charCodeAt(j)] = j;\n\t                    }\n\t            }\n\n\t            // Ignore padding\n\t            var paddingChar = map.charAt(64);\n\t            if (paddingChar) {\n\t                var paddingIndex = base64Str.indexOf(paddingChar);\n\t                if (paddingIndex !== -1) {\n\t                    base64StrLength = paddingIndex;\n\t                }\n\t            }\n\n\t            // Convert\n\t            return parseLoop(base64Str, base64StrLength, reverseMap);\n\n\t        },\n\n\t        _map: 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t    };\n\n\t    function parseLoop(base64Str, base64StrLength, reverseMap) {\n\t      var words = [];\n\t      var nBytes = 0;\n\t      for (var i = 0; i < base64StrLength; i++) {\n\t          if (i % 4) {\n\t              var bits1 = reverseMap[base64Str.charCodeAt(i - 1)] << ((i % 4) * 2);\n\t              var bits2 = reverseMap[base64Str.charCodeAt(i)] >>> (6 - (i % 4) * 2);\n\t              var bitsCombined = bits1 | bits2;\n\t              words[nBytes >>> 2] |= bitsCombined << (24 - (nBytes % 4) * 8);\n\t              nBytes++;\n\t          }\n\t      }\n\t      return WordArray.create(words, nBytes);\n\t    }\n\t}());\n\n\n\treturn CryptoJS.enc.Base64;\n\n}));",";(function (root, factory) {\n\tif (typeof exports === \"object\") {\n\t\t// CommonJS\n\t\tmodule.exports = exports = factory(require(\"./core\"));\n\t}\n\telse if (typeof define === \"function\" && define.amd) {\n\t\t// AMD\n\t\tdefine([\"./core\"], factory);\n\t}\n\telse {\n\t\t// Global (browser)\n\t\tfactory(root.CryptoJS);\n\t}\n}(this, function (CryptoJS) {\n\n\t(function (Math) {\n\t    // Shortcuts\n\t    var C = CryptoJS;\n\t    var C_lib = C.lib;\n\t    var WordArray = C_lib.WordArray;\n\t    var Hasher = C_lib.Hasher;\n\t    var C_algo = C.algo;\n\n\t    // Initialization and round constants tables\n\t    var H = [];\n\t    var K = [];\n\n\t    // Compute constants\n\t    (function () {\n\t        function isPrime(n) {\n\t            var sqrtN = Math.sqrt(n);\n\t            for (var factor = 2; factor <= sqrtN; factor++) {\n\t                if (!(n % factor)) {\n\t                    return false;\n\t                }\n\t            }\n\n\t            return true;\n\t        }\n\n\t        function getFractionalBits(n) {\n\t            return ((n - (n | 0)) * 0x100000000) | 0;\n\t        }\n\n\t        var n = 2;\n\t        var nPrime = 0;\n\t        while (nPrime < 64) {\n\t            if (isPrime(n)) {\n\t                if (nPrime < 8) {\n\t                    H[nPrime] = getFractionalBits(Math.pow(n, 1 / 2));\n\t                }\n\t                K[nPrime] = getFractionalBits(Math.pow(n, 1 / 3));\n\n\t                nPrime++;\n\t            }\n\n\t            n++;\n\t        }\n\t    }());\n\n\t    // Reusable object\n\t    var W = [];\n\n\t    /**\n\t     * SHA-256 hash algorithm.\n\t     */\n\t    var SHA256 = C_algo.SHA256 = Hasher.extend({\n\t        _doReset: function () {\n\t            this._hash = new WordArray.init(H.slice(0));\n\t        },\n\n\t        _doProcessBlock: function (M, offset) {\n\t            // Shortcut\n\t            var H = this._hash.words;\n\n\t            // Working variables\n\t            var a = H[0];\n\t            var b = H[1];\n\t            var c = H[2];\n\t            var d = H[3];\n\t            var e = H[4];\n\t            var f = H[5];\n\t            var g = H[6];\n\t            var h = H[7];\n\n\t            // Computation\n\t            for (var i = 0; i < 64; i++) {\n\t                if (i < 16) {\n\t                    W[i] = M[offset + i] | 0;\n\t                } else {\n\t                    var gamma0x = W[i - 15];\n\t                    var gamma0  = ((gamma0x << 25) | (gamma0x >>> 7))  ^\n\t                                  ((gamma0x << 14) | (gamma0x >>> 18)) ^\n\t                                   (gamma0x >>> 3);\n\n\t                    var gamma1x = W[i - 2];\n\t                    var gamma1  = ((gamma1x << 15) | (gamma1x >>> 17)) ^\n\t                                  ((gamma1x << 13) | (gamma1x >>> 19)) ^\n\t                                   (gamma1x >>> 10);\n\n\t                    W[i] = gamma0 + W[i - 7] + gamma1 + W[i - 16];\n\t                }\n\n\t                var ch  = (e & f) ^ (~e & g);\n\t                var maj = (a & b) ^ (a & c) ^ (b & c);\n\n\t                var sigma0 = ((a << 30) | (a >>> 2)) ^ ((a << 19) | (a >>> 13)) ^ ((a << 10) | (a >>> 22));\n\t                var sigma1 = ((e << 26) | (e >>> 6)) ^ ((e << 21) | (e >>> 11)) ^ ((e << 7)  | (e >>> 25));\n\n\t                var t1 = h + sigma1 + ch + K[i] + W[i];\n\t                var t2 = sigma0 + maj;\n\n\t                h = g;\n\t                g = f;\n\t                f = e;\n\t                e = (d + t1) | 0;\n\t                d = c;\n\t                c = b;\n\t                b = a;\n\t                a = (t1 + t2) | 0;\n\t            }\n\n\t            // Intermediate hash value\n\t            H[0] = (H[0] + a) | 0;\n\t            H[1] = (H[1] + b) | 0;\n\t            H[2] = (H[2] + c) | 0;\n\t            H[3] = (H[3] + d) | 0;\n\t            H[4] = (H[4] + e) | 0;\n\t            H[5] = (H[5] + f) | 0;\n\t            H[6] = (H[6] + g) | 0;\n\t            H[7] = (H[7] + h) | 0;\n\t        },\n\n\t        _doFinalize: function () {\n\t            // Shortcuts\n\t            var data = this._data;\n\t            var dataWords = data.words;\n\n\t            var nBitsTotal = this._nDataBytes * 8;\n\t            var nBitsLeft = data.sigBytes * 8;\n\n\t            // Add padding\n\t            dataWords[nBitsLeft >>> 5] |= 0x80 << (24 - nBitsLeft % 32);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 14] = Math.floor(nBitsTotal / 0x100000000);\n\t            dataWords[(((nBitsLeft + 64) >>> 9) << 4) + 15] = nBitsTotal;\n\t            data.sigBytes = dataWords.length * 4;\n\n\t            // Hash final blocks\n\t            this._process();\n\n\t            // Return final computed hash\n\t            return this._hash;\n\t        },\n\n\t        clone: function () {\n\t            var clone = Hasher.clone.call(this);\n\t            clone._hash = this._hash.clone();\n\n\t            return clone;\n\t        }\n\t    });\n\n\t    /**\n\t     * Shortcut function to the hasher's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     *\n\t     * @return {WordArray} The hash.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hash = CryptoJS.SHA256('message');\n\t     *     var hash = CryptoJS.SHA256(wordArray);\n\t     */\n\t    C.SHA256 = Hasher._createHelper(SHA256);\n\n\t    /**\n\t     * Shortcut function to the HMAC's object interface.\n\t     *\n\t     * @param {WordArray|string} message The message to hash.\n\t     * @param {WordArray|string} key The secret key.\n\t     *\n\t     * @return {WordArray} The HMAC.\n\t     *\n\t     * @static\n\t     *\n\t     * @example\n\t     *\n\t     *     var hmac = CryptoJS.HmacSHA256(message, key);\n\t     */\n\t    C.HmacSHA256 = Hasher._createHmacHelper(SHA256);\n\t}(Math));\n\n\n\treturn CryptoJS.SHA256;\n\n}));","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","// https://github.com/maxogden/websocket-stream/blob/48dc3ddf943e5ada668c31ccd94e9186f02fafbd/ws-fallback.js\n\nvar ws = null\n\nif (typeof WebSocket !== 'undefined') {\n  ws = WebSocket\n} else if (typeof MozWebSocket !== 'undefined') {\n  ws = MozWebSocket\n} else if (typeof global !== 'undefined') {\n  ws = global.WebSocket || global.MozWebSocket\n} else if (typeof window !== 'undefined') {\n  ws = window.WebSocket || window.MozWebSocket\n} else if (typeof self !== 'undefined') {\n  ws = self.WebSocket || self.MozWebSocket\n}\n\nexport default ws\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","var BufferBuilder = require('./bufferbuilder').BufferBuilder;\r\nvar binaryFeatures = require('./bufferbuilder').binaryFeatures;\r\n\r\nvar BinaryPack = {\r\n  unpack: function (data) {\r\n    var unpacker = new Unpacker(data);\r\n    return unpacker.unpack();\r\n  },\r\n  pack: function (data) {\r\n    var packer = new Packer();\r\n    packer.pack(data);\r\n    var buffer = packer.getBuffer();\r\n    return buffer;\r\n  }\r\n};\r\n\r\nmodule.exports = BinaryPack;\r\n\r\nfunction Unpacker (data) {\r\n  // Data is ArrayBuffer\r\n  this.index = 0;\r\n  this.dataBuffer = data;\r\n  this.dataView = new Uint8Array(this.dataBuffer);\r\n  this.length = this.dataBuffer.byteLength;\r\n}\r\n\r\nUnpacker.prototype.unpack = function () {\r\n  var type = this.unpack_uint8();\r\n  if (type < 0x80) {\r\n    return type;\r\n  } else if ((type ^ 0xe0) < 0x20) {\r\n    return (type ^ 0xe0) - 0x20;\r\n  }\r\n\r\n  var size;\r\n  if ((size = type ^ 0xa0) <= 0x0f) {\r\n    return this.unpack_raw(size);\r\n  } else if ((size = type ^ 0xb0) <= 0x0f) {\r\n    return this.unpack_string(size);\r\n  } else if ((size = type ^ 0x90) <= 0x0f) {\r\n    return this.unpack_array(size);\r\n  } else if ((size = type ^ 0x80) <= 0x0f) {\r\n    return this.unpack_map(size);\r\n  }\r\n\r\n  switch (type) {\r\n    case 0xc0:\r\n      return null;\r\n    case 0xc1:\r\n      return undefined;\r\n    case 0xc2:\r\n      return false;\r\n    case 0xc3:\r\n      return true;\r\n    case 0xca:\r\n      return this.unpack_float();\r\n    case 0xcb:\r\n      return this.unpack_double();\r\n    case 0xcc:\r\n      return this.unpack_uint8();\r\n    case 0xcd:\r\n      return this.unpack_uint16();\r\n    case 0xce:\r\n      return this.unpack_uint32();\r\n    case 0xcf:\r\n      return this.unpack_uint64();\r\n    case 0xd0:\r\n      return this.unpack_int8();\r\n    case 0xd1:\r\n      return this.unpack_int16();\r\n    case 0xd2:\r\n      return this.unpack_int32();\r\n    case 0xd3:\r\n      return this.unpack_int64();\r\n    case 0xd4:\r\n      return undefined;\r\n    case 0xd5:\r\n      return undefined;\r\n    case 0xd6:\r\n      return undefined;\r\n    case 0xd7:\r\n      return undefined;\r\n    case 0xd8:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_string(size);\r\n    case 0xd9:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_string(size);\r\n    case 0xda:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_raw(size);\r\n    case 0xdb:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_raw(size);\r\n    case 0xdc:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_array(size);\r\n    case 0xdd:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_array(size);\r\n    case 0xde:\r\n      size = this.unpack_uint16();\r\n      return this.unpack_map(size);\r\n    case 0xdf:\r\n      size = this.unpack_uint32();\r\n      return this.unpack_map(size);\r\n  }\r\n};\r\n\r\nUnpacker.prototype.unpack_uint8 = function () {\r\n  var byte = this.dataView[this.index] & 0xff;\r\n  this.index++;\r\n  return byte;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint16 = function () {\r\n  var bytes = this.read(2);\r\n  var uint16 =\r\n    ((bytes[0] & 0xff) * 256) + (bytes[1] & 0xff);\r\n  this.index += 2;\r\n  return uint16;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint32 = function () {\r\n  var bytes = this.read(4);\r\n  var uint32 =\r\n    ((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n    bytes[3];\r\n  this.index += 4;\r\n  return uint32;\r\n};\r\n\r\nUnpacker.prototype.unpack_uint64 = function () {\r\n  var bytes = this.read(8);\r\n  var uint64 =\r\n    ((((((bytes[0] * 256 +\r\n      bytes[1]) * 256 +\r\n      bytes[2]) * 256 +\r\n      bytes[3]) * 256 +\r\n      bytes[4]) * 256 +\r\n      bytes[5]) * 256 +\r\n      bytes[6]) * 256 +\r\n    bytes[7];\r\n  this.index += 8;\r\n  return uint64;\r\n};\r\n\r\nUnpacker.prototype.unpack_int8 = function () {\r\n  var uint8 = this.unpack_uint8();\r\n  return (uint8 < 0x80) ? uint8 : uint8 - (1 << 8);\r\n};\r\n\r\nUnpacker.prototype.unpack_int16 = function () {\r\n  var uint16 = this.unpack_uint16();\r\n  return (uint16 < 0x8000) ? uint16 : uint16 - (1 << 16);\r\n};\r\n\r\nUnpacker.prototype.unpack_int32 = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  return (uint32 < Math.pow(2, 31)) ? uint32\r\n    : uint32 - Math.pow(2, 32);\r\n};\r\n\r\nUnpacker.prototype.unpack_int64 = function () {\r\n  var uint64 = this.unpack_uint64();\r\n  return (uint64 < Math.pow(2, 63)) ? uint64\r\n    : uint64 - Math.pow(2, 64);\r\n};\r\n\r\nUnpacker.prototype.unpack_raw = function (size) {\r\n  if (this.length < this.index + size) {\r\n    throw new Error('BinaryPackFailure: index is out of range' +\r\n      ' ' + this.index + ' ' + size + ' ' + this.length);\r\n  }\r\n  var buf = this.dataBuffer.slice(this.index, this.index + size);\r\n  this.index += size;\r\n\r\n  // buf = util.bufferToString(buf);\r\n\r\n  return buf;\r\n};\r\n\r\nUnpacker.prototype.unpack_string = function (size) {\r\n  var bytes = this.read(size);\r\n  var i = 0;\r\n  var str = '';\r\n  var c;\r\n  var code;\r\n\r\n  while (i < size) {\r\n    c = bytes[i];\r\n    if (c < 128) {\r\n      str += String.fromCharCode(c);\r\n      i++;\r\n    } else if ((c ^ 0xc0) < 32) {\r\n      code = ((c ^ 0xc0) << 6) | (bytes[i + 1] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 2;\r\n    } else {\r\n      code = ((c & 15) << 12) | ((bytes[i + 1] & 63) << 6) |\r\n        (bytes[i + 2] & 63);\r\n      str += String.fromCharCode(code);\r\n      i += 3;\r\n    }\r\n  }\r\n\r\n  this.index += size;\r\n  return str;\r\n};\r\n\r\nUnpacker.prototype.unpack_array = function (size) {\r\n  var objects = new Array(size);\r\n  for (var i = 0; i < size; i++) {\r\n    objects[i] = this.unpack();\r\n  }\r\n  return objects;\r\n};\r\n\r\nUnpacker.prototype.unpack_map = function (size) {\r\n  var map = {};\r\n  for (var i = 0; i < size; i++) {\r\n    var key = this.unpack();\r\n    var value = this.unpack();\r\n    map[key] = value;\r\n  }\r\n  return map;\r\n};\r\n\r\nUnpacker.prototype.unpack_float = function () {\r\n  var uint32 = this.unpack_uint32();\r\n  var sign = uint32 >> 31;\r\n  var exp = ((uint32 >> 23) & 0xff) - 127;\r\n  var fraction = (uint32 & 0x7fffff) | 0x800000;\r\n  return (sign === 0 ? 1 : -1) *\r\n    fraction * Math.pow(2, exp - 23);\r\n};\r\n\r\nUnpacker.prototype.unpack_double = function () {\r\n  var h32 = this.unpack_uint32();\r\n  var l32 = this.unpack_uint32();\r\n  var sign = h32 >> 31;\r\n  var exp = ((h32 >> 20) & 0x7ff) - 1023;\r\n  var hfrac = (h32 & 0xfffff) | 0x100000;\r\n  var frac = hfrac * Math.pow(2, exp - 20) +\r\n    l32 * Math.pow(2, exp - 52);\r\n  return (sign === 0 ? 1 : -1) * frac;\r\n};\r\n\r\nUnpacker.prototype.read = function (length) {\r\n  var j = this.index;\r\n  if (j + length <= this.length) {\r\n    return this.dataView.subarray(j, j + length);\r\n  } else {\r\n    throw new Error('BinaryPackFailure: read index out of range');\r\n  }\r\n};\r\n\r\nfunction Packer () {\r\n  this.bufferBuilder = new BufferBuilder();\r\n}\r\n\r\nPacker.prototype.getBuffer = function () {\r\n  return this.bufferBuilder.getBuffer();\r\n};\r\n\r\nPacker.prototype.pack = function (value) {\r\n  var type = typeof (value);\r\n  if (type === 'string') {\r\n    this.pack_string(value);\r\n  } else if (type === 'number') {\r\n    if (Math.floor(value) === value) {\r\n      this.pack_integer(value);\r\n    } else {\r\n      this.pack_double(value);\r\n    }\r\n  } else if (type === 'boolean') {\r\n    if (value === true) {\r\n      this.bufferBuilder.append(0xc3);\r\n    } else if (value === false) {\r\n      this.bufferBuilder.append(0xc2);\r\n    }\r\n  } else if (type === 'undefined') {\r\n    this.bufferBuilder.append(0xc0);\r\n  } else if (type === 'object') {\r\n    if (value === null) {\r\n      this.bufferBuilder.append(0xc0);\r\n    } else {\r\n      var constructor = value.constructor;\r\n      if (constructor == Array) {\r\n        this.pack_array(value);\r\n      } else if (constructor == Blob || constructor == File || value instanceof Blob || value instanceof File) {\r\n        this.pack_bin(value);\r\n      } else if (constructor == ArrayBuffer) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value));\r\n        } else {\r\n          this.pack_bin(value);\r\n        }\r\n      } else if ('BYTES_PER_ELEMENT' in value) {\r\n        if (binaryFeatures.useArrayBufferView) {\r\n          this.pack_bin(new Uint8Array(value.buffer));\r\n        } else {\r\n          this.pack_bin(value.buffer);\r\n        }\r\n      } else if ((constructor == Object) || (constructor.toString().startsWith('class'))) {\r\n        this.pack_object(value);\r\n      } else if (constructor == Date) {\r\n        this.pack_string(value.toString());\r\n      } else if (typeof value.toBinaryPack === 'function') {\r\n        this.bufferBuilder.append(value.toBinaryPack());\r\n      } else {\r\n        throw new Error('Type \"' + constructor.toString() + '\" not yet supported');\r\n      }\r\n    }\r\n  } else {\r\n    throw new Error('Type \"' + type + '\" not yet supported');\r\n  }\r\n  this.bufferBuilder.flush();\r\n};\r\n\r\nPacker.prototype.pack_bin = function (blob) {\r\n  var length = blob.length || blob.byteLength || blob.size;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xa0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xda);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdb);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(blob);\r\n};\r\n\r\nPacker.prototype.pack_string = function (str) {\r\n  var length = utf8Length(str);\r\n\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0xb0 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xd8);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xd9);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  this.bufferBuilder.append(str);\r\n};\r\n\r\nPacker.prototype.pack_array = function (ary) {\r\n  var length = ary.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x90 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xdc);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdd);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var i = 0; i < length; i++) {\r\n    this.pack(ary[i]);\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_integer = function (num) {\r\n  if (num >= -0x20 && num <= 0x7f) {\r\n    this.bufferBuilder.append(num & 0xff);\r\n  } else if (num >= 0x00 && num <= 0xff) {\r\n    this.bufferBuilder.append(0xcc);\r\n    this.pack_uint8(num);\r\n  } else if (num >= -0x80 && num <= 0x7f) {\r\n    this.bufferBuilder.append(0xd0);\r\n    this.pack_int8(num);\r\n  } else if (num >= 0x0000 && num <= 0xffff) {\r\n    this.bufferBuilder.append(0xcd);\r\n    this.pack_uint16(num);\r\n  } else if (num >= -0x8000 && num <= 0x7fff) {\r\n    this.bufferBuilder.append(0xd1);\r\n    this.pack_int16(num);\r\n  } else if (num >= 0x00000000 && num <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xce);\r\n    this.pack_uint32(num);\r\n  } else if (num >= -0x80000000 && num <= 0x7fffffff) {\r\n    this.bufferBuilder.append(0xd2);\r\n    this.pack_int32(num);\r\n  } else if (num >= -0x8000000000000000 && num <= 0x7FFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xd3);\r\n    this.pack_int64(num);\r\n  } else if (num >= 0x0000000000000000 && num <= 0xFFFFFFFFFFFFFFFF) {\r\n    this.bufferBuilder.append(0xcf);\r\n    this.pack_uint64(num);\r\n  } else {\r\n    throw new Error('Invalid integer');\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_double = function (num) {\r\n  var sign = 0;\r\n  if (num < 0) {\r\n    sign = 1;\r\n    num = -num;\r\n  }\r\n  var exp = Math.floor(Math.log(num) / Math.LN2);\r\n  var frac0 = num / Math.pow(2, exp) - 1;\r\n  var frac1 = Math.floor(frac0 * Math.pow(2, 52));\r\n  var b32 = Math.pow(2, 32);\r\n  var h32 = (sign << 31) | ((exp + 1023) << 20) |\r\n    (frac1 / b32) & 0x0fffff;\r\n  var l32 = frac1 % b32;\r\n  this.bufferBuilder.append(0xcb);\r\n  this.pack_int32(h32);\r\n  this.pack_int32(l32);\r\n};\r\n\r\nPacker.prototype.pack_object = function (obj) {\r\n  var keys = Object.keys(obj);\r\n  var length = keys.length;\r\n  if (length <= 0x0f) {\r\n    this.pack_uint8(0x80 + length);\r\n  } else if (length <= 0xffff) {\r\n    this.bufferBuilder.append(0xde);\r\n    this.pack_uint16(length);\r\n  } else if (length <= 0xffffffff) {\r\n    this.bufferBuilder.append(0xdf);\r\n    this.pack_uint32(length);\r\n  } else {\r\n    throw new Error('Invalid length');\r\n  }\r\n  for (var prop in obj) {\r\n    if (obj.hasOwnProperty(prop)) {\r\n      this.pack(prop);\r\n      this.pack(obj[prop]);\r\n    }\r\n  }\r\n};\r\n\r\nPacker.prototype.pack_uint8 = function (num) {\r\n  this.bufferBuilder.append(num);\r\n};\r\n\r\nPacker.prototype.pack_uint16 = function (num) {\r\n  this.bufferBuilder.append(num >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_uint32 = function (num) {\r\n  var n = num & 0xffffffff;\r\n  this.bufferBuilder.append((n & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((n & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((n & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((n & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_uint64 = function (num) {\r\n  var high = num / Math.pow(2, 32);\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int8 = function (num) {\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int16 = function (num) {\r\n  this.bufferBuilder.append((num & 0xff00) >> 8);\r\n  this.bufferBuilder.append(num & 0xff);\r\n};\r\n\r\nPacker.prototype.pack_int32 = function (num) {\r\n  this.bufferBuilder.append((num >>> 24) & 0xff);\r\n  this.bufferBuilder.append((num & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((num & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((num & 0x000000ff));\r\n};\r\n\r\nPacker.prototype.pack_int64 = function (num) {\r\n  var high = Math.floor(num / Math.pow(2, 32));\r\n  var low = num % Math.pow(2, 32);\r\n  this.bufferBuilder.append((high & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((high & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((high & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((high & 0x000000ff));\r\n  this.bufferBuilder.append((low & 0xff000000) >>> 24);\r\n  this.bufferBuilder.append((low & 0x00ff0000) >>> 16);\r\n  this.bufferBuilder.append((low & 0x0000ff00) >>> 8);\r\n  this.bufferBuilder.append((low & 0x000000ff));\r\n};\r\n\r\nfunction _utf8Replace (m) {\r\n  var code = m.charCodeAt(0);\r\n\r\n  if (code <= 0x7ff) return '00';\r\n  if (code <= 0xffff) return '000';\r\n  if (code <= 0x1fffff) return '0000';\r\n  if (code <= 0x3ffffff) return '00000';\r\n  return '000000';\r\n}\r\n\r\nfunction utf8Length (str) {\r\n  if (str.length > 600) {\r\n    // Blob method faster for large strings\r\n    return (new Blob([str])).size;\r\n  } else {\r\n    return str.replace(/[^\\u0000-\\u007F]/g, _utf8Replace).length;\r\n  }\r\n}\r\n","var binaryFeatures = {};\r\nbinaryFeatures.useBlobBuilder = (function () {\r\n  try {\r\n    new Blob([]);\r\n    return false;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nbinaryFeatures.useArrayBufferView = !binaryFeatures.useBlobBuilder && (function () {\r\n  try {\r\n    return (new Blob([new Uint8Array([])])).size === 0;\r\n  } catch (e) {\r\n    return true;\r\n  }\r\n})();\r\n\r\nmodule.exports.binaryFeatures = binaryFeatures;\r\nvar BlobBuilder = module.exports.BlobBuilder;\r\nif (typeof window !== 'undefined') {\r\n  BlobBuilder = module.exports.BlobBuilder = window.WebKitBlobBuilder ||\r\n    window.MozBlobBuilder || window.MSBlobBuilder || window.BlobBuilder;\r\n}\r\n\r\nfunction BufferBuilder () {\r\n  this._pieces = [];\r\n  this._parts = [];\r\n}\r\n\r\nBufferBuilder.prototype.append = function (data) {\r\n  if (typeof data === 'number') {\r\n    this._pieces.push(data);\r\n  } else {\r\n    this.flush();\r\n    this._parts.push(data);\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.flush = function () {\r\n  if (this._pieces.length > 0) {\r\n    var buf = new Uint8Array(this._pieces);\r\n    if (!binaryFeatures.useArrayBufferView) {\r\n      buf = buf.buffer;\r\n    }\r\n    this._parts.push(buf);\r\n    this._pieces = [];\r\n  }\r\n};\r\n\r\nBufferBuilder.prototype.getBuffer = function () {\r\n  this.flush();\r\n  if (binaryFeatures.useBlobBuilder) {\r\n    var builder = new BlobBuilder();\r\n    for (var i = 0, ii = this._parts.length; i < ii; i++) {\r\n      builder.append(this._parts[i]);\r\n    }\r\n    return builder.getBlob();\r\n  } else {\r\n    return new Blob(this._parts);\r\n  }\r\n};\r\n\r\nmodule.exports.BufferBuilder = BufferBuilder;\r\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n","import { asyncScheduler } from '../scheduler/async';\nimport { timer } from './timer';\nexport function interval(period = 0, scheduler = asyncScheduler) {\n    if (period < 0) {\n        period = 0;\n    }\n    return timer(period, period, scheduler);\n}\n","import { operate } from '../util/lift';\nimport { createOperatorSubscriber } from './OperatorSubscriber';\nexport function takeWhile(predicate, inclusive = false) {\n    return operate((source, subscriber) => {\n        let index = 0;\n        source.subscribe(createOperatorSubscriber(subscriber, (value) => {\n            const result = predicate(value, index++);\n            (result || inclusive) && subscriber.next(value);\n            !result && subscriber.complete();\n        }));\n    });\n}\n","/* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n        ? '/' + headerExtension.direction\n        : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n\n// Parses a=crypto lines into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#dictionary-rtcsrtpsdesparameters-members\nSDPUtils.parseCryptoLine = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    tag: parseInt(parts[0], 10),\n    cryptoSuite: parts[1],\n    keyParams: parts[2],\n    sessionParams: parts.slice(3),\n  };\n};\n\nSDPUtils.writeCryptoLine = function(parameters) {\n  return 'a=crypto:' + parameters.tag + ' ' +\n    parameters.cryptoSuite + ' ' +\n    (typeof parameters.keyParams === 'object'\n      ? SDPUtils.writeCryptoKeyParams(parameters.keyParams)\n      : parameters.keyParams) +\n    (parameters.sessionParams ? ' ' + parameters.sessionParams.join(' ') : '') +\n    '\\r\\n';\n};\n\n// Parses the crypto key parameters into\n//   https://rawgit.com/aboba/edgertc/master/msortc-rs4.html#rtcsrtpkeyparam*\nSDPUtils.parseCryptoKeyParams = function(keyParams) {\n  if (keyParams.indexOf('inline:') !== 0) {\n    return null;\n  }\n  var parts = keyParams.substr(7).split('|');\n  return {\n    keyMethod: 'inline',\n    keySalt: parts[0],\n    lifeTime: parts[1],\n    mkiValue: parts[2] ? parts[2].split(':')[0] : undefined,\n    mkiLength: parts[2] ? parts[2].split(':')[1] : undefined,\n  };\n};\n\nSDPUtils.writeCryptoKeyParams = function(keyParams) {\n  return keyParams.keyMethod + ':'\n    + keyParams.keySalt +\n    (keyParams.lifeTime ? '|' + keyParams.lifeTime : '') +\n    (keyParams.mkiValue && keyParams.mkiLength\n      ? '|' + keyParams.mkiValue + ':' + keyParams.mkiLength\n      : '');\n};\n\n// Extracts all SDES paramters.\nSDPUtils.getCryptoParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=crypto:');\n  return lines.map(SDPUtils.parseCryptoLine);\n};\n\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var ufrag = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-ufrag:')[0];\n  var pwd = SDPUtils.matchPrefix(mediaSection + sessionpart,\n    'a=ice-pwd:')[0];\n  if (!(ufrag && pwd)) {\n    return null;\n  }\n  return {\n    usernameFragment: ufrag.substr(12),\n    password: pwd.substr(10),\n  };\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n      mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n        mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(parts) {\n      return parts.attribute === 'cname';\n    });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n    .map(function(line) {\n      var parts = line.substr(17).split(' ');\n      return parts.map(function(part) {\n        return parseInt(part, 10);\n      });\n    });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(obj) {\n      return obj.attribute === 'cname';\n    })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n    .map(function(line) {\n      return SDPUtils.parseSsrcMedia(line);\n    })\n    .filter(function(msidParts) {\n      return msidParts.attribute === 'msid';\n    });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// SCTP\n// parses draft-ietf-mmusic-sctp-sdp-26 first and falls back\n// to draft-ietf-mmusic-sctp-sdp-05\nSDPUtils.parseSctpDescription = function(mediaSection) {\n  var mline = SDPUtils.parseMLine(mediaSection);\n  var maxSizeLine = SDPUtils.matchPrefix(mediaSection, 'a=max-message-size:');\n  var maxMessageSize;\n  if (maxSizeLine.length > 0) {\n    maxMessageSize = parseInt(maxSizeLine[0].substr(19), 10);\n  }\n  if (isNaN(maxMessageSize)) {\n    maxMessageSize = 65536;\n  }\n  var sctpPort = SDPUtils.matchPrefix(mediaSection, 'a=sctp-port:');\n  if (sctpPort.length > 0) {\n    return {\n      port: parseInt(sctpPort[0].substr(12), 10),\n      protocol: mline.fmt,\n      maxMessageSize: maxMessageSize\n    };\n  }\n  var sctpMapLines = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:');\n  if (sctpMapLines.length > 0) {\n    var parts = SDPUtils.matchPrefix(mediaSection, 'a=sctpmap:')[0]\n      .substr(10)\n      .split(' ');\n    return {\n      port: parseInt(parts[0], 10),\n      protocol: parts[1],\n      maxMessageSize: maxMessageSize\n    };\n  }\n};\n\n// SCTP\n// outputs the draft-ietf-mmusic-sctp-sdp-26 version that all browsers\n// support by now receiving in this format, unless we originally parsed\n// as the draft-ietf-mmusic-sctp-sdp-05 format (indicated by the m-line\n// protocol of DTLS/SCTP -- without UDP/ or TCP/)\nSDPUtils.writeSctpDescription = function(media, sctp) {\n  var output = [];\n  if (media.protocol !== 'DTLS/SCTP') {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.protocol + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctp-port:' + sctp.port + '\\r\\n'\n    ];\n  } else {\n    output = [\n      'm=' + media.kind + ' 9 ' + media.protocol + ' ' + sctp.port + '\\r\\n',\n      'c=IN IP4 0.0.0.0\\r\\n',\n      'a=sctpmap:' + sctp.port + ' ' + sctp.protocol + ' 65535\\r\\n'\n    ];\n  }\n  if (sctp.maxMessageSize !== undefined) {\n    output.push('a=max-message-size:' + sctp.maxMessageSize + '\\r\\n');\n  }\n  return output.join('');\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n    transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n    transceiver.dtlsTransport.getLocalParameters(),\n    type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter =\n  adapterFactory({window: typeof window === 'undefined' ? undefined : window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      if (browserDetails.version === null) {\n        logging('Chrome shim can not determine version, not shimming.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      chromeShim.shimGetUserMedia(window, browserDetails);\n      chromeShim.shimMediaStream(window, browserDetails);\n      chromeShim.shimPeerConnection(window, browserDetails);\n      chromeShim.shimOnTrack(window, browserDetails);\n      chromeShim.shimAddTrackRemoveTrack(window, browserDetails);\n      chromeShim.shimGetSendersWithDtmf(window, browserDetails);\n      chromeShim.shimGetStats(window, browserDetails);\n      chromeShim.shimSenderReceiverGetStats(window, browserDetails);\n      chromeShim.fixNegotiationNeeded(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      // Must be called before shimPeerConnection.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      firefoxShim.shimGetUserMedia(window, browserDetails);\n      firefoxShim.shimPeerConnection(window, browserDetails);\n      firefoxShim.shimOnTrack(window, browserDetails);\n      firefoxShim.shimRemoveStream(window, browserDetails);\n      firefoxShim.shimSenderGetStats(window, browserDetails);\n      firefoxShim.shimReceiverGetStats(window, browserDetails);\n      firefoxShim.shimRTCDataChannel(window, browserDetails);\n      firefoxShim.shimAddTransceiver(window, browserDetails);\n      firefoxShim.shimGetParameters(window, browserDetails);\n      firefoxShim.shimCreateOffer(window, browserDetails);\n      firefoxShim.shimCreateAnswer(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimConnectionState(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window, browserDetails);\n      edgeShim.shimGetDisplayMedia(window, browserDetails);\n      edgeShim.shimPeerConnection(window, browserDetails);\n      edgeShim.shimReplaceTrack(window, browserDetails);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      // Must be called before shimCallbackAPI.\n      commonShim.shimAddIceCandidateNullOrEmpty(window, browserDetails);\n\n      safariShim.shimRTCIceServerUrls(window, browserDetails);\n      safariShim.shimCreateOfferLegacy(window, browserDetails);\n      safariShim.shimCallbacksAPI(window, browserDetails);\n      safariShim.shimLocalStreamsAPI(window, browserDetails);\n      safariShim.shimRemoteStreamsAPI(window, browserDetails);\n      safariShim.shimTrackEventTransceiver(window, browserDetails);\n      safariShim.shimGetUserMedia(window, browserDetails);\n      safariShim.shimAudioContext(window, browserDetails);\n\n      commonShim.shimRTCIceCandidate(window, browserDetails);\n      commonShim.shimMaxMessageSize(window, browserDetails);\n      commonShim.shimSendThrowTypeError(window, browserDetails);\n      commonShim.removeExtmapAllowMixed(window, browserDetails);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        if (!this._ontrackpoly) {\n          this._ontrackpoly = (e) => {\n            // onaddstream does not fire when a track is added to an existing\n            // stream. But stream.onaddtrack is implemented so we use that.\n            e.stream.addEventListener('addtrack', te => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === te.track.id);\n              } else {\n                receiver = {track: te.track};\n              }\n\n              const event = new Event('track');\n              event.track = te.track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n            e.stream.getTracks().forEach(track => {\n              let receiver;\n              if (window.RTCPeerConnection.prototype.getReceivers) {\n                receiver = this.getReceivers()\n                  .find(r => r.track && r.track.id === track.id);\n              } else {\n                receiver = {track};\n              }\n              const event = new Event('track');\n              event.track = track;\n              event.receiver = receiver;\n              event.transceiver = {receiver};\n              event.streams = [e.stream];\n              this.dispatchEvent(event);\n            });\n          };\n          this.addEventListener('addstream', this._ontrackpoly);\n        }\n        return origSetRemoteDescription.apply(this, arguments);\n      };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack =\n        function addTrack(track, stream) {\n          let sender = origAddTrack.apply(this, arguments);\n          if (!sender) {\n            sender = shimSenderWithDtmf(this, track);\n            this._senders.push(sender);\n          }\n          return sender;\n        };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack =\n        function removeTrack(sender) {\n          origRemoveTrack.apply(this, arguments);\n          const idx = this._senders.indexOf(sender);\n          if (idx !== -1) {\n            this._senders.splice(idx, 1);\n          }\n        };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        this._senders = this._senders || [];\n        origRemoveStream.apply(this, [stream]);\n\n        stream.getTracks().forEach(track => {\n          const sender = this._senders.find(s => s.track === track);\n          if (sender) { // remove sender\n            this._senders.splice(this._senders.indexOf(sender), 1);\n          }\n        });\n      };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimGetStats(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof selector !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        onSucc(makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        selector]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function getStats() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        utils.filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers =\n        function getReceivers() {\n          const receivers = origGetReceivers.apply(this, []);\n          receivers.forEach(receiver => receiver._pc = this);\n          return receivers;\n        };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function getStats() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        utils.filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      return Object.keys(this._shimmedLocalStreams)\n        .map(streamId => this._shimmedLocalStreams[streamId][0]);\n    };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (!stream) {\n        return origAddTrack.apply(this, arguments);\n      }\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n      const sender = origAddTrack.apply(this, arguments);\n      if (!this._shimmedLocalStreams[stream.id]) {\n        this._shimmedLocalStreams[stream.id] = [stream, sender];\n      } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n        this._shimmedLocalStreams[stream.id].push(sender);\n      }\n      return sender;\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      delete this._shimmedLocalStreams[stream.id];\n      return origRemoveStream.apply(this, arguments);\n    };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n      if (sender) {\n        Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n          const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n          if (idx !== -1) {\n            this._shimmedLocalStreams[streamId].splice(idx, 1);\n          }\n          if (this._shimmedLocalStreams[streamId].length === 1) {\n            delete this._shimmedLocalStreams[streamId];\n          }\n        });\n      }\n      return origRemoveTrack.apply(this, arguments);\n    };\n}\n\nexport function shimAddTrackRemoveTrack(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams =\n    function getLocalStreams() {\n      const nativeStreams = origGetLocalStreams.apply(this);\n      this._reverseStreams = this._reverseStreams || {};\n      return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n    };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n\n      origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n      delete this._reverseStreams[(this._streams[stream.id] ?\n          this._streams[stream.id].id : stream.id)];\n      delete this._streams[stream.id];\n    };\n\n  window.RTCPeerConnection.prototype.addTrack =\n    function addTrack(track, stream) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      const streams = [].slice.call(arguments, 1);\n      if (streams.length !== 1 ||\n          !streams[0].getTracks().find(t => t === track)) {\n        // this is not fully correct but all we can manage without\n        // [[associated MediaStreams]] internal slot.\n        throw new DOMException(\n          'The adapter.js addTrack polyfill only supports a single ' +\n          ' stream which is associated with the specified track.',\n          'NotSupportedError');\n      }\n\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n\n      this._streams = this._streams || {};\n      this._reverseStreams = this._reverseStreams || {};\n      const oldStream = this._streams[stream.id];\n      if (oldStream) {\n        // this is using odd Chrome behaviour, use with caution:\n        // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n        // Note: we rely on the high-level addTrack/dtmf shim to\n        // create the sender with a dtmf sender.\n        oldStream.addTrack(track);\n\n        // Trigger ONN async.\n        Promise.resolve().then(() => {\n          this.dispatchEvent(new Event('negotiationneeded'));\n        });\n      } else {\n        const newStream = new window.MediaStream([track]);\n        this._streams[stream.id] = newStream;\n        this._reverseStreams[newStream.id] = stream;\n        this.addStream(newStream);\n      }\n      return this.getSenders().find(s => s.track === track);\n    };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    const methodObj = {[method]() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    }};\n    window.RTCPeerConnection.prototype[method] = methodObj[method];\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription =\n    function setLocalDescription() {\n      if (!arguments.length || !arguments[0].type) {\n        return origSetLocalDescription.apply(this, arguments);\n      }\n      arguments[0] = replaceExternalStreamId(this, arguments[0]);\n      return origSetLocalDescription.apply(this, arguments);\n    };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack =\n    function removeTrack(sender) {\n      if (this.signalingState === 'closed') {\n        throw new DOMException(\n          'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n          'InvalidStateError');\n      }\n      // We can not yet check for sender instanceof RTCRtpSender\n      // since we shim RTPSender. So we check if sender._pc is set.\n      if (!sender._pc) {\n        throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n            'does not implement interface RTCRtpSender.', 'TypeError');\n      }\n      const isLocal = sender._pc === this;\n      if (!isLocal) {\n        throw new DOMException('Sender was not created by this connection.',\n            'InvalidAccessError');\n      }\n\n      // Search for the native stream the senders track belongs to.\n      this._streams = this._streams || {};\n      let stream;\n      Object.keys(this._streams).forEach(streamid => {\n        const hasTrack = this._streams[streamid].getTracks()\n          .find(track => sender.track === track);\n        if (hasTrack) {\n          stream = this._streams[streamid];\n        }\n      });\n\n      if (stream) {\n        if (stream.getTracks().length === 1) {\n          // if this is the last track of the stream, remove the stream. This\n          // takes care of any shimmed _senders.\n          this.removeStream(this._reverseStreams[stream.id]);\n        } else {\n          // relying on the same odd chrome behaviour as above.\n          stream.removeTrack(sender.track);\n        }\n        this.dispatchEvent(new Event('negotiationneeded'));\n      }\n    };\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  if (browserDetails.version < 53) {\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n}\n\n// Attempt to fix ONN in plan-b mode.\nexport function fixNegotiationNeeded(window, browserDetails) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (browserDetails.version < 72 || (pc.getConfiguration &&\n        pc.getConfiguration().sdpSemantics === 'plan-b')) {\n      if (pc.signalingState !== 'stable') {\n        return;\n      }\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      return getSourceId(constraints)\n        .then(sourceId => {\n          const widthSpecified = constraints.video && constraints.video.width;\n          const heightSpecified = constraints.video &&\n            constraints.video.height;\n          const frameRateSpecified = constraints.video &&\n            constraints.video.frameRate;\n          constraints.video = {\n            mandatory: {\n              chromeMediaSource: 'desktop',\n              chromeMediaSourceId: sourceId,\n              maxFrameRate: frameRateSpecified || 3\n            }\n          };\n          if (widthSpecified) {\n            constraints.video.mandatory.maxWidth = widthSpecified;\n          }\n          if (heightSpecified) {\n            constraints.video.mandatory.maxHeight = heightSpecified;\n          }\n          return window.navigator.mediaDevices.getUserMedia(constraints);\n        });\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  if (navigator.mediaDevices.getUserMedia) {\n    const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(cs) {\n      return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n        if (c.audio && !stream.getAudioTracks().length ||\n            c.video && !stream.getVideoTracks().length) {\n          stream.getTracks().forEach(track => {\n            track.stop();\n          });\n          throw new DOMException('', 'NotFoundError');\n        }\n        return stream;\n      }, e => Promise.reject(shimError_(e))));\n    };\n  }\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function RTCIceCandidate(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function toJSON() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window, browserDetails) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    if (!description || !description.sdp) {\n      return false;\n    }\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n    function setRemoteDescription() {\n      this._sctp = null;\n      // Chrome decided to not expose .sctp in plan-b mode.\n      // As usual, adapter.js has to do an 'ugly worakaround'\n      // to cover up the mess.\n      if (browserDetails.browser === 'chrome' && browserDetails.version >= 76) {\n        const {sdpSemantics} = this.getConfiguration();\n        if (sdpSemantics === 'plan-b') {\n          Object.defineProperty(this, 'sctp', {\n            get() {\n              return typeof this._sctp === 'undefined' ? null : this._sctp;\n            },\n            enumerable: true,\n            configurable: true,\n          });\n        }\n      }\n\n      if (sctpInDescription(arguments[0])) {\n        // Check if the remote is FF.\n        const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n        // Get the maximum message size the local peer is capable of sending\n        const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n        // Get the maximum message size of the remote peer.\n        const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n        // Determine final maximum message size\n        let maxMessageSize;\n        if (canSendMMS === 0 && remoteMMS === 0) {\n          maxMessageSize = Number.POSITIVE_INFINITY;\n        } else if (canSendMMS === 0 || remoteMMS === 0) {\n          maxMessageSize = Math.max(canSendMMS, remoteMMS);\n        } else {\n          maxMessageSize = Math.min(canSendMMS, remoteMMS);\n        }\n\n        // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n        // attribute.\n        const sctp = {};\n        Object.defineProperty(sctp, 'maxMessageSize', {\n          get() {\n            return maxMessageSize;\n          }\n        });\n        this._sctp = sctp;\n      }\n\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function send() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel =\n    function createDataChannel() {\n      const dataChannel = origCreateDataChannel.apply(this, arguments);\n      wrapDcSend(dataChannel, this);\n      return dataChannel;\n    };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeExtmapAllowMixed(window, browserDetails) {\n  /* remove a=extmap-allow-mixed for webrtc.org < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  if (browserDetails.browser === 'safari' && browserDetails.version >= 605) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription =\n  function setRemoteDescription(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      const sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n      // Safari enforces read-only-ness of RTCSessionDescription fields.\n      if (window.RTCSessionDescription &&\n          desc instanceof window.RTCSessionDescription) {\n        arguments[0] = new window.RTCSessionDescription({\n          type: desc.type,\n          sdp,\n        });\n      } else {\n        desc.sdp = sdp;\n      }\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n\nexport function shimAddIceCandidateNullOrEmpty(window, browserDetails) {\n  // Support for addIceCandidate(null or undefined)\n  // as well as addIceCandidate({candidate: \"\", ...})\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=978582\n  // Note: must be called before other polyfills which change the signature.\n  if (!(window.RTCPeerConnection && window.RTCPeerConnection.prototype)) {\n    return;\n  }\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  if (!nativeAddIceCandidate || nativeAddIceCandidate.length === 0) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.addIceCandidate =\n    function addIceCandidate() {\n      if (!arguments[0]) {\n        if (arguments[1]) {\n          arguments[1].apply(null);\n        }\n        return Promise.resolve();\n      }\n      // Firefox 68+ emits and processes {candidate: \"\", ...}, ignore\n      // in older versions.\n      // Native support for ignoring exists for Chrome M77+.\n      // Safari ignores as well, exact version unknown but works in the same\n      // version that also ignores addIceCandidate(null).\n      if (((browserDetails.browser === 'chrome' && browserDetails.version < 78)\n           || (browserDetails.browser === 'firefox'\n               && browserDetails.version < 68)\n           || (browserDetails.browser === 'safari'))\n          && arguments[0] && arguments[0].candidate === '') {\n        return Promise.resolve();\n      }\n      return nativeAddIceCandidate.apply(this, arguments);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function RTCIceCandidate(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function RTCSessionDescription(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function RTCPeerConnection(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      let urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window, browserDetails) {\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  if (browserDetails.version < 53) {\n    // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n    ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n        .forEach(function(method) {\n          const nativeMethod = window.RTCPeerConnection.prototype[method];\n          const methodObj = {[method]() {\n            arguments[0] = new ((method === 'addIceCandidate') ?\n                window.RTCIceCandidate :\n                window.RTCSessionDescription)(arguments[0]);\n            return nativeMethod.apply(this, arguments);\n          }};\n          window.RTCPeerConnection.prototype[method] = methodObj[method];\n        });\n  }\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function getStats() {\n    const [selector, onSucc, onErr] = arguments;\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function getSenders() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function addTrack() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function getStats() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function getReceivers() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function getStats() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream =\n    function removeStream(stream) {\n      utils.deprecated('removeStream', 'removeTrack');\n      this.getSenders().forEach(sender => {\n        if (sender.track && stream.getTracks().includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n\nexport function shimAddTransceiver(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origAddTransceiver = window.RTCPeerConnection.prototype.addTransceiver;\n  if (origAddTransceiver) {\n    window.RTCPeerConnection.prototype.addTransceiver =\n      function addTransceiver() {\n        this.setParametersPromises = [];\n        const initParameters = arguments[1];\n        const shouldPerformCheck = initParameters &&\n                                  'sendEncodings' in initParameters;\n        if (shouldPerformCheck) {\n          // If sendEncodings params are provided, validate grammar\n          initParameters.sendEncodings.forEach((encodingParam) => {\n            if ('rid' in encodingParam) {\n              const ridRegex = /^[a-z0-9]{0,16}$/i;\n              if (!ridRegex.test(encodingParam.rid)) {\n                throw new TypeError('Invalid RID value provided.');\n              }\n            }\n            if ('scaleResolutionDownBy' in encodingParam) {\n              if (!(parseFloat(encodingParam.scaleResolutionDownBy) >= 1.0)) {\n                throw new RangeError('scale_resolution_down_by must be >= 1.0');\n              }\n            }\n            if ('maxFramerate' in encodingParam) {\n              if (!(parseFloat(encodingParam.maxFramerate) >= 0)) {\n                throw new RangeError('max_framerate must be >= 0.0');\n              }\n            }\n          });\n        }\n        const transceiver = origAddTransceiver.apply(this, arguments);\n        if (shouldPerformCheck) {\n          // Check if the init options were applied. If not we do this in an\n          // asynchronous way and save the promise reference in a global object.\n          // This is an ugly hack, but at the same time is way more robust than\n          // checking the sender parameters before and after the createOffer\n          // Also note that after the createoffer we are not 100% sure that\n          // the params were asynchronously applied so we might miss the\n          // opportunity to recreate offer.\n          const {sender} = transceiver;\n          const params = sender.getParameters();\n          if (!('encodings' in params) ||\n              // Avoid being fooled by patched getParameters() below.\n              (params.encodings.length === 1 &&\n               Object.keys(params.encodings[0]).length === 0)) {\n            params.encodings = initParameters.sendEncodings;\n            sender.sendEncodings = initParameters.sendEncodings;\n            this.setParametersPromises.push(sender.setParameters(params)\n              .then(() => {\n                delete sender.sendEncodings;\n              }).catch(() => {\n                delete sender.sendEncodings;\n              })\n            );\n          }\n        }\n        return transceiver;\n      };\n  }\n}\n\nexport function shimGetParameters(window) {\n  if (!(typeof window === 'object' && window.RTCRtpSender)) {\n    return;\n  }\n  const origGetParameters = window.RTCRtpSender.prototype.getParameters;\n  if (origGetParameters) {\n    window.RTCRtpSender.prototype.getParameters =\n      function getParameters() {\n        const params = origGetParameters.apply(this, arguments);\n        if (!('encodings' in params)) {\n          params.encodings = [].concat(this.sendEncodings || [{}]);\n        }\n        return params;\n      };\n  }\n}\n\nexport function shimCreateOffer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function createOffer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateOffer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n\nexport function shimCreateAnswer(window) {\n  // https://github.com/webrtcHacks/adapter/issues/998#issuecomment-516921647\n  // Firefox ignores the init sendEncodings options passed to addTransceiver\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1396918\n  if (!(typeof window === 'object' && window.RTCPeerConnection)) {\n    return;\n  }\n  const origCreateAnswer = window.RTCPeerConnection.prototype.createAnswer;\n  window.RTCPeerConnection.prototype.createAnswer = function createAnswer() {\n    if (this.setParametersPromises && this.setParametersPromises.length) {\n      return Promise.all(this.setParametersPromises)\n      .then(() => {\n        return origCreateAnswer.apply(this, arguments);\n      })\n      .finally(() => {\n        this.setParametersPromises = [];\n      });\n    }\n    return origCreateAnswer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    function getDisplayMedia(constraints) {\n      if (!(constraints && constraints.video)) {\n        const err = new DOMException('getDisplayMedia without video ' +\n            'constraints is undefined');\n        err.name = 'NotFoundError';\n        // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n        err.code = 8;\n        return Promise.reject(err);\n      }\n      if (constraints.video === true) {\n        constraints.video = {mediaSource: preferredMediaSource};\n      } else {\n        constraints.video.mediaSource = preferredMediaSource;\n      }\n      return window.navigator.mediaDevices.getUserMedia(constraints);\n    };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window, browserDetails) {\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams =\n      function getLocalStreams() {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        return this._localStreams;\n      };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function addStream(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      // Try to emulate Chrome's behaviour of adding in audio-video order.\n      // Safari orders by track id.\n      stream.getAudioTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n      stream.getVideoTracks().forEach(track => _addTrack.call(this, track,\n        stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack =\n      function addTrack(track, ...streams) {\n        if (streams) {\n          streams.forEach((stream) => {\n            if (!this._localStreams) {\n              this._localStreams = [stream];\n            } else if (!this._localStreams.includes(stream)) {\n              this._localStreams.push(stream);\n            }\n          });\n        }\n        return _addTrack.apply(this, arguments);\n      };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream =\n      function removeStream(stream) {\n        if (!this._localStreams) {\n          this._localStreams = [];\n        }\n        const index = this._localStreams.indexOf(stream);\n        if (index === -1) {\n          return;\n        }\n        this._localStreams.splice(index, 1);\n        const tracks = stream.getTracks();\n        this.getSenders().forEach(sender => {\n          if (tracks.includes(sender.track)) {\n            this.removeTrack(sender);\n          }\n        });\n      };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams =\n      function getRemoteStreams() {\n        return this._remoteStreams ? this._remoteStreams : [];\n      };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription =\n      function setRemoteDescription() {\n        const pc = this;\n        if (!this._onaddstreampoly) {\n          this.addEventListener('track', this._onaddstreampoly = function(e) {\n            e.streams.forEach(stream => {\n              if (!pc._remoteStreams) {\n                pc._remoteStreams = [];\n              }\n              if (pc._remoteStreams.indexOf(stream) >= 0) {\n                return;\n              }\n              pc._remoteStreams.push(stream);\n              const event = new Event('addstream');\n              event.stream = stream;\n              pc.dispatchEvent(event);\n            });\n          });\n        }\n        return origSetRemoteDescription.apply(pc, arguments);\n      };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const origCreateOffer = prototype.createOffer;\n  const origCreateAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer =\n    function createOffer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateOffer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  prototype.createAnswer =\n    function createAnswer(successCallback, failureCallback) {\n      const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n      const promise = origCreateAnswer.apply(this, [options]);\n      if (!failureCallback) {\n        return promise;\n      }\n      promise.then(successCallback, failureCallback);\n      return Promise.resolve();\n    };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function getUserMedia(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection =\n    function RTCPeerConnection(pcConfig, pcConstraints) {\n      if (pcConfig && pcConfig.iceServers) {\n        const newIceServers = [];\n        for (let i = 0; i < pcConfig.iceServers.length; i++) {\n          let server = pcConfig.iceServers[i];\n          if (!server.hasOwnProperty('urls') &&\n              server.hasOwnProperty('url')) {\n            utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n            server = JSON.parse(JSON.stringify(server));\n            server.urls = server.url;\n            delete server.url;\n            newIceServers.push(server);\n          } else {\n            newIceServers.push(pcConfig.iceServers[i]);\n          }\n        }\n        pcConfig.iceServers = newIceServers;\n      }\n      return new OrigPeerConnection(pcConfig, pcConstraints);\n    };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in OrigPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      'receiver' in window.RTCTrackEvent.prototype &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer =\n    function createOffer(offerOptions) {\n      if (offerOptions) {\n        if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveAudio =\n            !!offerOptions.offerToReceiveAudio;\n        }\n        const audioTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'audio');\n        if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n          if (audioTransceiver.direction === 'sendrecv') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('sendonly');\n            } else {\n              audioTransceiver.direction = 'sendonly';\n            }\n          } else if (audioTransceiver.direction === 'recvonly') {\n            if (audioTransceiver.setDirection) {\n              audioTransceiver.setDirection('inactive');\n            } else {\n              audioTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveAudio === true &&\n            !audioTransceiver) {\n          this.addTransceiver('audio');\n        }\n\n        if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n          // support bit values\n          offerOptions.offerToReceiveVideo =\n            !!offerOptions.offerToReceiveVideo;\n        }\n        const videoTransceiver = this.getTransceivers().find(transceiver =>\n          transceiver.receiver.track.kind === 'video');\n        if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n          if (videoTransceiver.direction === 'sendrecv') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('sendonly');\n            } else {\n              videoTransceiver.direction = 'sendonly';\n            }\n          } else if (videoTransceiver.direction === 'recvonly') {\n            if (videoTransceiver.setDirection) {\n              videoTransceiver.setDirection('inactive');\n            } else {\n              videoTransceiver.direction = 'inactive';\n            }\n          }\n        } else if (offerOptions.offerToReceiveVideo === true &&\n            !videoTransceiver) {\n          this.addTransceiver('video');\n        }\n      }\n      return origCreateOffer.apply(this, arguments);\n    };\n}\n\nexport function shimAudioContext(window) {\n  if (typeof window !== 'object' || window.AudioContext) {\n    return;\n  }\n  window.AudioContext = window.webkitAudioContext;\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        if (cb.handleEvent) {\n          cb.handleEvent(modifiedEvent);\n        } else {\n          cb(modifiedEvent);\n        }\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    if (!this._eventMap[eventNameToWrap]) {\n      this._eventMap[eventNameToWrap] = new Map();\n    }\n    this._eventMap[eventNameToWrap].set(cb, wrappedCallback);\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[eventNameToWrap]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    if (!this._eventMap[eventNameToWrap].has(cb)) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[eventNameToWrap].get(cb);\n    this._eventMap[eventNameToWrap].delete(cb);\n    if (this._eventMap[eventNameToWrap].size === 0) {\n      delete this._eventMap[eventNameToWrap];\n    }\n    if (Object.keys(this._eventMap).length === 0) {\n      delete this._eventMap;\n    }\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  const {navigator} = window;\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia ||\n      (window.isSecureContext === false && window.webkitRTCPeerConnection &&\n       !window.RTCIceGatherer)) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    // Chrome 74 removed webkitGetUserMedia on http as well so we need the\n    // more complicated fallback to webkitRTCPeerConnection.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n    result.supportsUnifiedPlan = window.RTCRtpTransceiver &&\n        'currentDirection' in window.RTCRtpTransceiver.prototype;\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Checks if something is an object.\n *\n * @param {*} val The something you want to check.\n * @return true if val is an object, false otherwise.\n */\nfunction isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]';\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (!isObject(data)) {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObj = isObject(data[key]);\n    const value = isObj ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObj && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n\n/* iterates the stats graph recursively. */\nexport function walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nexport function filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\n","/* (ignored) */","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n","// imported from https://github.com/component/has-cors\nlet value = false;\ntry {\n    value = typeof XMLHttpRequest !== 'undefined' &&\n        'withCredentials' in new XMLHttpRequest();\n}\ncatch (err) {\n    // if XMLHttp support is disabled in IE then it will throw\n    // when trying to create\n}\nexport const hasCORS = value;\n","// imported from https://github.com/galkn/querystring\n/**\n * Compiles a querystring\n * Returns string representation of the object\n *\n * @param {Object}\n * @api private\n */\nexport function encode(obj) {\n    let str = '';\n    for (let i in obj) {\n        if (obj.hasOwnProperty(i)) {\n            if (str.length)\n                str += '&';\n            str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\n        }\n    }\n    return str;\n}\n/**\n * Parses a simple querystring into an object\n *\n * @param {String} qs\n * @api private\n */\nexport function decode(qs) {\n    let qry = {};\n    let pairs = qs.split('&');\n    for (let i = 0, l = pairs.length; i < l; i++) {\n        let pair = pairs[i].split('=');\n        qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n    }\n    return qry;\n}\n","// imported from https://github.com/galkn/parseuri\n/**\n * Parses a URI\n *\n * Note: we could also have used the built-in URL object, but it isn't supported on all platforms.\n *\n * See:\n * - https://developer.mozilla.org/en-US/docs/Web/API/URL\n * - https://caniuse.com/url\n * - https://www.rfc-editor.org/rfc/rfc3986#appendix-B\n *\n * History of the parse() method:\n * - first commit: https://github.com/socketio/socket.io-client/commit/4ee1d5d94b3906a9c052b459f1a818b15f38f91c\n * - export into its own module: https://github.com/socketio/engine.io-client/commit/de2c561e4564efeb78f1bdb1ba39ef81b2822cb3\n * - reimport: https://github.com/socketio/engine.io-client/commit/df32277c3f6d622eec5ed09f493cae3f3391d242\n *\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\n * @api private\n */\nconst re = /^(?:(?![^:@\\/?#]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@\\/?#]*)(?::([^:@\\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\nconst parts = [\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\n];\nexport function parse(str) {\n    const src = str, b = str.indexOf('['), e = str.indexOf(']');\n    if (b != -1 && e != -1) {\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\n    }\n    let m = re.exec(str || ''), uri = {}, i = 14;\n    while (i--) {\n        uri[parts[i]] = m[i] || '';\n    }\n    if (b != -1 && e != -1) {\n        uri.source = src;\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\n        uri.ipv6uri = true;\n    }\n    uri.pathNames = pathNames(uri, uri['path']);\n    uri.queryKey = queryKey(uri, uri['query']);\n    return uri;\n}\nfunction pathNames(obj, path) {\n    const regx = /\\/{2,9}/g, names = path.replace(regx, \"/\").split(\"/\");\n    if (path.slice(0, 1) == '/' || path.length === 0) {\n        names.splice(0, 1);\n    }\n    if (path.slice(-1) == '/') {\n        names.splice(names.length - 1, 1);\n    }\n    return names;\n}\nfunction queryKey(uri, query) {\n    const data = {};\n    query.replace(/(?:^|&)([^&=]*)=?([^&]*)/g, function ($0, $1, $2) {\n        if ($1) {\n            data[$1] = $2;\n        }\n    });\n    return data;\n}\n","// imported from https://github.com/unshiftio/yeast\n'use strict';\nconst alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split(''), length = 64, map = {};\nlet seed = 0, i = 0, prev;\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nexport function encode(num) {\n    let encoded = '';\n    do {\n        encoded = alphabet[num % length] + encoded;\n        num = Math.floor(num / length);\n    } while (num > 0);\n    return encoded;\n}\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nexport function decode(str) {\n    let decoded = 0;\n    for (i = 0; i < str.length; i++) {\n        decoded = decoded * length + map[str.charAt(i)];\n    }\n    return decoded;\n}\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nexport function yeast() {\n    const now = encode(+new Date());\n    if (now !== prev)\n        return seed = 0, prev = now;\n    return now + '.' + encode(seed++);\n}\n//\n// Map each character to its index.\n//\nfor (; i < length; i++)\n    map[alphabet[i]] = i;\n","export const globalThisShim = (() => {\n    if (typeof self !== \"undefined\") {\n        return self;\n    }\n    else if (typeof window !== \"undefined\") {\n        return window;\n    }\n    else {\n        return Function(\"return this\")();\n    }\n})();\n","import { Socket } from \"./socket.js\";\nexport { Socket };\nexport const protocol = Socket.protocol;\nexport { Transport } from \"./transport.js\";\nexport { transports } from \"./transports/index.js\";\nexport { installTimerFunctions } from \"./util.js\";\nexport { parse } from \"./contrib/parseuri.js\";\nexport { nextTick } from \"./transports/websocket-constructor.js\";\n","import { transports } from \"./transports/index.js\";\nimport { installTimerFunctions, byteLength } from \"./util.js\";\nimport { decode } from \"./contrib/parseqs.js\";\nimport { parse } from \"./contrib/parseuri.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { protocol } from \"engine.io-parser\";\nexport class Socket extends Emitter {\n    /**\n     * Socket constructor.\n     *\n     * @param {String|Object} uri - uri or options\n     * @param {Object} opts - options\n     */\n    constructor(uri, opts = {}) {\n        super();\n        this.writeBuffer = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = null;\n        }\n        if (uri) {\n            uri = parse(uri);\n            opts.hostname = uri.host;\n            opts.secure = uri.protocol === \"https\" || uri.protocol === \"wss\";\n            opts.port = uri.port;\n            if (uri.query)\n                opts.query = uri.query;\n        }\n        else if (opts.host) {\n            opts.hostname = parse(opts.host).host;\n        }\n        installTimerFunctions(this, opts);\n        this.secure =\n            null != opts.secure\n                ? opts.secure\n                : typeof location !== \"undefined\" && \"https:\" === location.protocol;\n        if (opts.hostname && !opts.port) {\n            // if no port is specified manually, use the protocol default\n            opts.port = this.secure ? \"443\" : \"80\";\n        }\n        this.hostname =\n            opts.hostname ||\n                (typeof location !== \"undefined\" ? location.hostname : \"localhost\");\n        this.port =\n            opts.port ||\n                (typeof location !== \"undefined\" && location.port\n                    ? location.port\n                    : this.secure\n                        ? \"443\"\n                        : \"80\");\n        this.transports = opts.transports || [\n            \"polling\",\n            \"websocket\",\n            \"webtransport\",\n        ];\n        this.writeBuffer = [];\n        this.prevBufferLen = 0;\n        this.opts = Object.assign({\n            path: \"/engine.io\",\n            agent: false,\n            withCredentials: false,\n            upgrade: true,\n            timestampParam: \"t\",\n            rememberUpgrade: false,\n            addTrailingSlash: true,\n            rejectUnauthorized: true,\n            perMessageDeflate: {\n                threshold: 1024,\n            },\n            transportOptions: {},\n            closeOnBeforeunload: false,\n        }, opts);\n        this.opts.path =\n            this.opts.path.replace(/\\/$/, \"\") +\n                (this.opts.addTrailingSlash ? \"/\" : \"\");\n        if (typeof this.opts.query === \"string\") {\n            this.opts.query = decode(this.opts.query);\n        }\n        // set on handshake\n        this.id = null;\n        this.upgrades = null;\n        this.pingInterval = null;\n        this.pingTimeout = null;\n        // set on heartbeat\n        this.pingTimeoutTimer = null;\n        if (typeof addEventListener === \"function\") {\n            if (this.opts.closeOnBeforeunload) {\n                // Firefox closes the connection when the \"beforeunload\" event is emitted but not Chrome. This event listener\n                // ensures every browser behaves the same (no \"disconnect\" event at the Socket.IO level when the page is\n                // closed/reloaded)\n                this.beforeunloadEventListener = () => {\n                    if (this.transport) {\n                        // silently close the transport\n                        this.transport.removeAllListeners();\n                        this.transport.close();\n                    }\n                };\n                addEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n            }\n            if (this.hostname !== \"localhost\") {\n                this.offlineEventListener = () => {\n                    this.onClose(\"transport close\", {\n                        description: \"network connection lost\",\n                    });\n                };\n                addEventListener(\"offline\", this.offlineEventListener, false);\n            }\n        }\n        this.open();\n    }\n    /**\n     * Creates transport of the given type.\n     *\n     * @param {String} name - transport name\n     * @return {Transport}\n     * @private\n     */\n    createTransport(name) {\n        const query = Object.assign({}, this.opts.query);\n        // append engine.io protocol identifier\n        query.EIO = protocol;\n        // transport name\n        query.transport = name;\n        // session id if we already have one\n        if (this.id)\n            query.sid = this.id;\n        const opts = Object.assign({}, this.opts, {\n            query,\n            socket: this,\n            hostname: this.hostname,\n            secure: this.secure,\n            port: this.port,\n        }, this.opts.transportOptions[name]);\n        return new transports[name](opts);\n    }\n    /**\n     * Initializes transport to use and starts probe.\n     *\n     * @private\n     */\n    open() {\n        let transport;\n        if (this.opts.rememberUpgrade &&\n            Socket.priorWebsocketSuccess &&\n            this.transports.indexOf(\"websocket\") !== -1) {\n            transport = \"websocket\";\n        }\n        else if (0 === this.transports.length) {\n            // Emit error on next tick so it can be listened to\n            this.setTimeoutFn(() => {\n                this.emitReserved(\"error\", \"No transports available\");\n            }, 0);\n            return;\n        }\n        else {\n            transport = this.transports[0];\n        }\n        this.readyState = \"opening\";\n        // Retry with the next transport if the transport is disabled (jsonp: false)\n        try {\n            transport = this.createTransport(transport);\n        }\n        catch (e) {\n            this.transports.shift();\n            this.open();\n            return;\n        }\n        transport.open();\n        this.setTransport(transport);\n    }\n    /**\n     * Sets the current transport. Disables the existing one (if any).\n     *\n     * @private\n     */\n    setTransport(transport) {\n        if (this.transport) {\n            this.transport.removeAllListeners();\n        }\n        // set up transport\n        this.transport = transport;\n        // set up transport listeners\n        transport\n            .on(\"drain\", this.onDrain.bind(this))\n            .on(\"packet\", this.onPacket.bind(this))\n            .on(\"error\", this.onError.bind(this))\n            .on(\"close\", (reason) => this.onClose(\"transport close\", reason));\n    }\n    /**\n     * Probes a transport.\n     *\n     * @param {String} name - transport name\n     * @private\n     */\n    probe(name) {\n        let transport = this.createTransport(name);\n        let failed = false;\n        Socket.priorWebsocketSuccess = false;\n        const onTransportOpen = () => {\n            if (failed)\n                return;\n            transport.send([{ type: \"ping\", data: \"probe\" }]);\n            transport.once(\"packet\", (msg) => {\n                if (failed)\n                    return;\n                if (\"pong\" === msg.type && \"probe\" === msg.data) {\n                    this.upgrading = true;\n                    this.emitReserved(\"upgrading\", transport);\n                    if (!transport)\n                        return;\n                    Socket.priorWebsocketSuccess = \"websocket\" === transport.name;\n                    this.transport.pause(() => {\n                        if (failed)\n                            return;\n                        if (\"closed\" === this.readyState)\n                            return;\n                        cleanup();\n                        this.setTransport(transport);\n                        transport.send([{ type: \"upgrade\" }]);\n                        this.emitReserved(\"upgrade\", transport);\n                        transport = null;\n                        this.upgrading = false;\n                        this.flush();\n                    });\n                }\n                else {\n                    const err = new Error(\"probe error\");\n                    // @ts-ignore\n                    err.transport = transport.name;\n                    this.emitReserved(\"upgradeError\", err);\n                }\n            });\n        };\n        function freezeTransport() {\n            if (failed)\n                return;\n            // Any callback called by transport should be ignored since now\n            failed = true;\n            cleanup();\n            transport.close();\n            transport = null;\n        }\n        // Handle any error that happens while probing\n        const onerror = (err) => {\n            const error = new Error(\"probe error: \" + err);\n            // @ts-ignore\n            error.transport = transport.name;\n            freezeTransport();\n            this.emitReserved(\"upgradeError\", error);\n        };\n        function onTransportClose() {\n            onerror(\"transport closed\");\n        }\n        // When the socket is closed while we're probing\n        function onclose() {\n            onerror(\"socket closed\");\n        }\n        // When the socket is upgraded while we're probing\n        function onupgrade(to) {\n            if (transport && to.name !== transport.name) {\n                freezeTransport();\n            }\n        }\n        // Remove all listeners on the transport and on self\n        const cleanup = () => {\n            transport.removeListener(\"open\", onTransportOpen);\n            transport.removeListener(\"error\", onerror);\n            transport.removeListener(\"close\", onTransportClose);\n            this.off(\"close\", onclose);\n            this.off(\"upgrading\", onupgrade);\n        };\n        transport.once(\"open\", onTransportOpen);\n        transport.once(\"error\", onerror);\n        transport.once(\"close\", onTransportClose);\n        this.once(\"close\", onclose);\n        this.once(\"upgrading\", onupgrade);\n        if (this.upgrades.indexOf(\"webtransport\") !== -1 &&\n            name !== \"webtransport\") {\n            // favor WebTransport\n            this.setTimeoutFn(() => {\n                if (!failed) {\n                    transport.open();\n                }\n            }, 200);\n        }\n        else {\n            transport.open();\n        }\n    }\n    /**\n     * Called when connection is deemed open.\n     *\n     * @private\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        Socket.priorWebsocketSuccess = \"websocket\" === this.transport.name;\n        this.emitReserved(\"open\");\n        this.flush();\n        // we check for `readyState` in case an `open`\n        // listener already closed the socket\n        if (\"open\" === this.readyState && this.opts.upgrade) {\n            let i = 0;\n            const l = this.upgrades.length;\n            for (; i < l; i++) {\n                this.probe(this.upgrades[i]);\n            }\n        }\n    }\n    /**\n     * Handles a packet.\n     *\n     * @private\n     */\n    onPacket(packet) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            this.emitReserved(\"packet\", packet);\n            // Socket is live - any packet counts\n            this.emitReserved(\"heartbeat\");\n            switch (packet.type) {\n                case \"open\":\n                    this.onHandshake(JSON.parse(packet.data));\n                    break;\n                case \"ping\":\n                    this.resetPingTimeout();\n                    this.sendPacket(\"pong\");\n                    this.emitReserved(\"ping\");\n                    this.emitReserved(\"pong\");\n                    break;\n                case \"error\":\n                    const err = new Error(\"server error\");\n                    // @ts-ignore\n                    err.code = packet.data;\n                    this.onError(err);\n                    break;\n                case \"message\":\n                    this.emitReserved(\"data\", packet.data);\n                    this.emitReserved(\"message\", packet.data);\n                    break;\n            }\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon handshake completion.\n     *\n     * @param {Object} data - handshake obj\n     * @private\n     */\n    onHandshake(data) {\n        this.emitReserved(\"handshake\", data);\n        this.id = data.sid;\n        this.transport.query.sid = data.sid;\n        this.upgrades = this.filterUpgrades(data.upgrades);\n        this.pingInterval = data.pingInterval;\n        this.pingTimeout = data.pingTimeout;\n        this.maxPayload = data.maxPayload;\n        this.onOpen();\n        // In case open handler closes socket\n        if (\"closed\" === this.readyState)\n            return;\n        this.resetPingTimeout();\n    }\n    /**\n     * Sets and resets ping timeout timer based on server pings.\n     *\n     * @private\n     */\n    resetPingTimeout() {\n        this.clearTimeoutFn(this.pingTimeoutTimer);\n        this.pingTimeoutTimer = this.setTimeoutFn(() => {\n            this.onClose(\"ping timeout\");\n        }, this.pingInterval + this.pingTimeout);\n        if (this.opts.autoUnref) {\n            this.pingTimeoutTimer.unref();\n        }\n    }\n    /**\n     * Called on `drain` event\n     *\n     * @private\n     */\n    onDrain() {\n        this.writeBuffer.splice(0, this.prevBufferLen);\n        // setting prevBufferLen = 0 is very important\n        // for example, when upgrading, upgrade packet is sent over,\n        // and a nonzero prevBufferLen could cause problems on `drain`\n        this.prevBufferLen = 0;\n        if (0 === this.writeBuffer.length) {\n            this.emitReserved(\"drain\");\n        }\n        else {\n            this.flush();\n        }\n    }\n    /**\n     * Flush write buffers.\n     *\n     * @private\n     */\n    flush() {\n        if (\"closed\" !== this.readyState &&\n            this.transport.writable &&\n            !this.upgrading &&\n            this.writeBuffer.length) {\n            const packets = this.getWritablePackets();\n            this.transport.send(packets);\n            // keep track of current length of writeBuffer\n            // splice writeBuffer and callbackBuffer on `drain`\n            this.prevBufferLen = packets.length;\n            this.emitReserved(\"flush\");\n        }\n    }\n    /**\n     * Ensure the encoded size of the writeBuffer is below the maxPayload value sent by the server (only for HTTP\n     * long-polling)\n     *\n     * @private\n     */\n    getWritablePackets() {\n        const shouldCheckPayloadSize = this.maxPayload &&\n            this.transport.name === \"polling\" &&\n            this.writeBuffer.length > 1;\n        if (!shouldCheckPayloadSize) {\n            return this.writeBuffer;\n        }\n        let payloadSize = 1; // first packet type\n        for (let i = 0; i < this.writeBuffer.length; i++) {\n            const data = this.writeBuffer[i].data;\n            if (data) {\n                payloadSize += byteLength(data);\n            }\n            if (i > 0 && payloadSize > this.maxPayload) {\n                return this.writeBuffer.slice(0, i);\n            }\n            payloadSize += 2; // separator + packet type\n        }\n        return this.writeBuffer;\n    }\n    /**\n     * Sends a message.\n     *\n     * @param {String} msg - message.\n     * @param {Object} options.\n     * @param {Function} callback function.\n     * @return {Socket} for chaining.\n     */\n    write(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    send(msg, options, fn) {\n        this.sendPacket(\"message\", msg, options, fn);\n        return this;\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param {String} type: packet type.\n     * @param {String} data.\n     * @param {Object} options.\n     * @param {Function} fn - callback function.\n     * @private\n     */\n    sendPacket(type, data, options, fn) {\n        if (\"function\" === typeof data) {\n            fn = data;\n            data = undefined;\n        }\n        if (\"function\" === typeof options) {\n            fn = options;\n            options = null;\n        }\n        if (\"closing\" === this.readyState || \"closed\" === this.readyState) {\n            return;\n        }\n        options = options || {};\n        options.compress = false !== options.compress;\n        const packet = {\n            type: type,\n            data: data,\n            options: options,\n        };\n        this.emitReserved(\"packetCreate\", packet);\n        this.writeBuffer.push(packet);\n        if (fn)\n            this.once(\"flush\", fn);\n        this.flush();\n    }\n    /**\n     * Closes the connection.\n     */\n    close() {\n        const close = () => {\n            this.onClose(\"forced close\");\n            this.transport.close();\n        };\n        const cleanupAndClose = () => {\n            this.off(\"upgrade\", cleanupAndClose);\n            this.off(\"upgradeError\", cleanupAndClose);\n            close();\n        };\n        const waitForUpgrade = () => {\n            // wait for upgrade to finish since we can't send packets while pausing a transport\n            this.once(\"upgrade\", cleanupAndClose);\n            this.once(\"upgradeError\", cleanupAndClose);\n        };\n        if (\"opening\" === this.readyState || \"open\" === this.readyState) {\n            this.readyState = \"closing\";\n            if (this.writeBuffer.length) {\n                this.once(\"drain\", () => {\n                    if (this.upgrading) {\n                        waitForUpgrade();\n                    }\n                    else {\n                        close();\n                    }\n                });\n            }\n            else if (this.upgrading) {\n                waitForUpgrade();\n            }\n            else {\n                close();\n            }\n        }\n        return this;\n    }\n    /**\n     * Called upon transport error\n     *\n     * @private\n     */\n    onError(err) {\n        Socket.priorWebsocketSuccess = false;\n        this.emitReserved(\"error\", err);\n        this.onClose(\"transport error\", err);\n    }\n    /**\n     * Called upon transport close.\n     *\n     * @private\n     */\n    onClose(reason, description) {\n        if (\"opening\" === this.readyState ||\n            \"open\" === this.readyState ||\n            \"closing\" === this.readyState) {\n            // clear timers\n            this.clearTimeoutFn(this.pingTimeoutTimer);\n            // stop event from firing again for transport\n            this.transport.removeAllListeners(\"close\");\n            // ensure transport won't stay open\n            this.transport.close();\n            // ignore further transport communication\n            this.transport.removeAllListeners();\n            if (typeof removeEventListener === \"function\") {\n                removeEventListener(\"beforeunload\", this.beforeunloadEventListener, false);\n                removeEventListener(\"offline\", this.offlineEventListener, false);\n            }\n            // set ready state\n            this.readyState = \"closed\";\n            // clear session id\n            this.id = null;\n            // emit close event\n            this.emitReserved(\"close\", reason, description);\n            // clean buffers after, so users can still\n            // grab the buffers on `close` event\n            this.writeBuffer = [];\n            this.prevBufferLen = 0;\n        }\n    }\n    /**\n     * Filters upgrades, returning only those matching client transports.\n     *\n     * @param {Array} upgrades - server upgrades\n     * @private\n     */\n    filterUpgrades(upgrades) {\n        const filteredUpgrades = [];\n        let i = 0;\n        const j = upgrades.length;\n        for (; i < j; i++) {\n            if (~this.transports.indexOf(upgrades[i]))\n                filteredUpgrades.push(upgrades[i]);\n        }\n        return filteredUpgrades;\n    }\n}\nSocket.protocol = protocol;\n","import { decodePacket } from \"engine.io-parser\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions } from \"./util.js\";\nimport { encode } from \"./contrib/parseqs.js\";\nclass TransportError extends Error {\n    constructor(reason, description, context) {\n        super(reason);\n        this.description = description;\n        this.context = context;\n        this.type = \"TransportError\";\n    }\n}\nexport class Transport extends Emitter {\n    /**\n     * Transport abstract constructor.\n     *\n     * @param {Object} opts - options\n     * @protected\n     */\n    constructor(opts) {\n        super();\n        this.writable = false;\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.query = opts.query;\n        this.socket = opts.socket;\n    }\n    /**\n     * Emits an error.\n     *\n     * @param {String} reason\n     * @param description\n     * @param context - the error context\n     * @return {Transport} for chaining\n     * @protected\n     */\n    onError(reason, description, context) {\n        super.emitReserved(\"error\", new TransportError(reason, description, context));\n        return this;\n    }\n    /**\n     * Opens the transport.\n     */\n    open() {\n        this.readyState = \"opening\";\n        this.doOpen();\n        return this;\n    }\n    /**\n     * Closes the transport.\n     */\n    close() {\n        if (this.readyState === \"opening\" || this.readyState === \"open\") {\n            this.doClose();\n            this.onClose();\n        }\n        return this;\n    }\n    /**\n     * Sends multiple packets.\n     *\n     * @param {Array} packets\n     */\n    send(packets) {\n        if (this.readyState === \"open\") {\n            this.write(packets);\n        }\n        else {\n            // this might happen if the transport was silently closed in the beforeunload event handler\n        }\n    }\n    /**\n     * Called upon open\n     *\n     * @protected\n     */\n    onOpen() {\n        this.readyState = \"open\";\n        this.writable = true;\n        super.emitReserved(\"open\");\n    }\n    /**\n     * Called with data.\n     *\n     * @param {String} data\n     * @protected\n     */\n    onData(data) {\n        const packet = decodePacket(data, this.socket.binaryType);\n        this.onPacket(packet);\n    }\n    /**\n     * Called with a decoded packet.\n     *\n     * @protected\n     */\n    onPacket(packet) {\n        super.emitReserved(\"packet\", packet);\n    }\n    /**\n     * Called upon close.\n     *\n     * @protected\n     */\n    onClose(details) {\n        this.readyState = \"closed\";\n        super.emitReserved(\"close\", details);\n    }\n    /**\n     * Pauses the transport, in order not to lose packets during an upgrade.\n     *\n     * @param onPause\n     */\n    pause(onPause) { }\n    createUri(schema, query = {}) {\n        return (schema +\n            \"://\" +\n            this._hostname() +\n            this._port() +\n            this.opts.path +\n            this._query(query));\n    }\n    _hostname() {\n        const hostname = this.opts.hostname;\n        return hostname.indexOf(\":\") === -1 ? hostname : \"[\" + hostname + \"]\";\n    }\n    _port() {\n        if (this.opts.port &&\n            ((this.opts.secure && Number(this.opts.port !== 443)) ||\n                (!this.opts.secure && Number(this.opts.port) !== 80))) {\n            return \":\" + this.opts.port;\n        }\n        else {\n            return \"\";\n        }\n    }\n    _query(query) {\n        const encodedQuery = encode(query);\n        return encodedQuery.length ? \"?\" + encodedQuery : \"\";\n    }\n}\n","import { Polling } from \"./polling.js\";\nimport { WS } from \"./websocket.js\";\nimport { WT } from \"./webtransport.js\";\nexport const transports = {\n    websocket: WS,\n    webtransport: WT,\n    polling: Polling,\n};\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { encodePayload, decodePayload } from \"engine.io-parser\";\nimport { createCookieJar, XHR as XMLHttpRequest, } from \"./xmlhttprequest.js\";\nimport { Emitter } from \"@socket.io/component-emitter\";\nimport { installTimerFunctions, pick } from \"../util.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nfunction empty() { }\nconst hasXHR2 = (function () {\n    const xhr = new XMLHttpRequest({\n        xdomain: false,\n    });\n    return null != xhr.responseType;\n})();\nexport class Polling extends Transport {\n    /**\n     * XHR Polling constructor.\n     *\n     * @param {Object} opts\n     * @package\n     */\n    constructor(opts) {\n        super(opts);\n        this.polling = false;\n        if (typeof location !== \"undefined\") {\n            const isSSL = \"https:\" === location.protocol;\n            let port = location.port;\n            // some user agents have empty `location.port`\n            if (!port) {\n                port = isSSL ? \"443\" : \"80\";\n            }\n            this.xd =\n                (typeof location !== \"undefined\" &&\n                    opts.hostname !== location.hostname) ||\n                    port !== opts.port;\n        }\n        /**\n         * XHR supports binary\n         */\n        const forceBase64 = opts && opts.forceBase64;\n        this.supportsBinary = hasXHR2 && !forceBase64;\n        if (this.opts.withCredentials) {\n            this.cookieJar = createCookieJar();\n        }\n    }\n    get name() {\n        return \"polling\";\n    }\n    /**\n     * Opens the socket (triggers polling). We write a PING message to determine\n     * when the transport is open.\n     *\n     * @protected\n     */\n    doOpen() {\n        this.poll();\n    }\n    /**\n     * Pauses polling.\n     *\n     * @param {Function} onPause - callback upon buffers are flushed and transport is paused\n     * @package\n     */\n    pause(onPause) {\n        this.readyState = \"pausing\";\n        const pause = () => {\n            this.readyState = \"paused\";\n            onPause();\n        };\n        if (this.polling || !this.writable) {\n            let total = 0;\n            if (this.polling) {\n                total++;\n                this.once(\"pollComplete\", function () {\n                    --total || pause();\n                });\n            }\n            if (!this.writable) {\n                total++;\n                this.once(\"drain\", function () {\n                    --total || pause();\n                });\n            }\n        }\n        else {\n            pause();\n        }\n    }\n    /**\n     * Starts polling cycle.\n     *\n     * @private\n     */\n    poll() {\n        this.polling = true;\n        this.doPoll();\n        this.emitReserved(\"poll\");\n    }\n    /**\n     * Overloads onData to detect payloads.\n     *\n     * @protected\n     */\n    onData(data) {\n        const callback = (packet) => {\n            // if its the first message we consider the transport open\n            if (\"opening\" === this.readyState && packet.type === \"open\") {\n                this.onOpen();\n            }\n            // if its a close packet, we close the ongoing requests\n            if (\"close\" === packet.type) {\n                this.onClose({ description: \"transport closed by the server\" });\n                return false;\n            }\n            // otherwise bypass onData and handle the message\n            this.onPacket(packet);\n        };\n        // decode payload\n        decodePayload(data, this.socket.binaryType).forEach(callback);\n        // if an event did not trigger closing\n        if (\"closed\" !== this.readyState) {\n            // if we got data we're not polling\n            this.polling = false;\n            this.emitReserved(\"pollComplete\");\n            if (\"open\" === this.readyState) {\n                this.poll();\n            }\n            else {\n            }\n        }\n    }\n    /**\n     * For polling, send a close packet.\n     *\n     * @protected\n     */\n    doClose() {\n        const close = () => {\n            this.write([{ type: \"close\" }]);\n        };\n        if (\"open\" === this.readyState) {\n            close();\n        }\n        else {\n            // in case we're trying to close while\n            // handshaking is in progress (GH-164)\n            this.once(\"open\", close);\n        }\n    }\n    /**\n     * Writes a packets payload.\n     *\n     * @param {Array} packets - data packets\n     * @protected\n     */\n    write(packets) {\n        this.writable = false;\n        encodePayload(packets, (data) => {\n            this.doWrite(data, () => {\n                this.writable = true;\n                this.emitReserved(\"drain\");\n            });\n        });\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"https\" : \"http\";\n        const query = this.query || {};\n        // cache busting is forced\n        if (false !== this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        if (!this.supportsBinary && !query.sid) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Creates a request.\n     *\n     * @param {String} method\n     * @private\n     */\n    request(opts = {}) {\n        Object.assign(opts, { xd: this.xd, cookieJar: this.cookieJar }, this.opts);\n        return new Request(this.uri(), opts);\n    }\n    /**\n     * Sends data.\n     *\n     * @param {String} data to send.\n     * @param {Function} called upon flush.\n     * @private\n     */\n    doWrite(data, fn) {\n        const req = this.request({\n            method: \"POST\",\n            data: data,\n        });\n        req.on(\"success\", fn);\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr post error\", xhrStatus, context);\n        });\n    }\n    /**\n     * Starts a poll cycle.\n     *\n     * @private\n     */\n    doPoll() {\n        const req = this.request();\n        req.on(\"data\", this.onData.bind(this));\n        req.on(\"error\", (xhrStatus, context) => {\n            this.onError(\"xhr poll error\", xhrStatus, context);\n        });\n        this.pollXhr = req;\n    }\n}\nexport class Request extends Emitter {\n    /**\n     * Request constructor\n     *\n     * @param {Object} options\n     * @package\n     */\n    constructor(uri, opts) {\n        super();\n        installTimerFunctions(this, opts);\n        this.opts = opts;\n        this.method = opts.method || \"GET\";\n        this.uri = uri;\n        this.data = undefined !== opts.data ? opts.data : null;\n        this.create();\n    }\n    /**\n     * Creates the XHR object and sends the request.\n     *\n     * @private\n     */\n    create() {\n        var _a;\n        const opts = pick(this.opts, \"agent\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"autoUnref\");\n        opts.xdomain = !!this.opts.xd;\n        const xhr = (this.xhr = new XMLHttpRequest(opts));\n        try {\n            xhr.open(this.method, this.uri, true);\n            try {\n                if (this.opts.extraHeaders) {\n                    xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n                    for (let i in this.opts.extraHeaders) {\n                        if (this.opts.extraHeaders.hasOwnProperty(i)) {\n                            xhr.setRequestHeader(i, this.opts.extraHeaders[i]);\n                        }\n                    }\n                }\n            }\n            catch (e) { }\n            if (\"POST\" === this.method) {\n                try {\n                    xhr.setRequestHeader(\"Content-type\", \"text/plain;charset=UTF-8\");\n                }\n                catch (e) { }\n            }\n            try {\n                xhr.setRequestHeader(\"Accept\", \"*/*\");\n            }\n            catch (e) { }\n            (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.addCookies(xhr);\n            // ie6 check\n            if (\"withCredentials\" in xhr) {\n                xhr.withCredentials = this.opts.withCredentials;\n            }\n            if (this.opts.requestTimeout) {\n                xhr.timeout = this.opts.requestTimeout;\n            }\n            xhr.onreadystatechange = () => {\n                var _a;\n                if (xhr.readyState === 3) {\n                    (_a = this.opts.cookieJar) === null || _a === void 0 ? void 0 : _a.parseCookies(xhr);\n                }\n                if (4 !== xhr.readyState)\n                    return;\n                if (200 === xhr.status || 1223 === xhr.status) {\n                    this.onLoad();\n                }\n                else {\n                    // make sure the `error` event handler that's user-set\n                    // does not throw in the same tick and gets caught here\n                    this.setTimeoutFn(() => {\n                        this.onError(typeof xhr.status === \"number\" ? xhr.status : 0);\n                    }, 0);\n                }\n            };\n            xhr.send(this.data);\n        }\n        catch (e) {\n            // Need to defer since .create() is called directly from the constructor\n            // and thus the 'error' event can only be only bound *after* this exception\n            // occurs.  Therefore, also, we cannot throw here at all.\n            this.setTimeoutFn(() => {\n                this.onError(e);\n            }, 0);\n            return;\n        }\n        if (typeof document !== \"undefined\") {\n            this.index = Request.requestsCount++;\n            Request.requests[this.index] = this;\n        }\n    }\n    /**\n     * Called upon error.\n     *\n     * @private\n     */\n    onError(err) {\n        this.emitReserved(\"error\", err, this.xhr);\n        this.cleanup(true);\n    }\n    /**\n     * Cleans up house.\n     *\n     * @private\n     */\n    cleanup(fromError) {\n        if (\"undefined\" === typeof this.xhr || null === this.xhr) {\n            return;\n        }\n        this.xhr.onreadystatechange = empty;\n        if (fromError) {\n            try {\n                this.xhr.abort();\n            }\n            catch (e) { }\n        }\n        if (typeof document !== \"undefined\") {\n            delete Request.requests[this.index];\n        }\n        this.xhr = null;\n    }\n    /**\n     * Called upon load.\n     *\n     * @private\n     */\n    onLoad() {\n        const data = this.xhr.responseText;\n        if (data !== null) {\n            this.emitReserved(\"data\", data);\n            this.emitReserved(\"success\");\n            this.cleanup();\n        }\n    }\n    /**\n     * Aborts the request.\n     *\n     * @package\n     */\n    abort() {\n        this.cleanup();\n    }\n}\nRequest.requestsCount = 0;\nRequest.requests = {};\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\nif (typeof document !== \"undefined\") {\n    // @ts-ignore\n    if (typeof attachEvent === \"function\") {\n        // @ts-ignore\n        attachEvent(\"onunload\", unloadHandler);\n    }\n    else if (typeof addEventListener === \"function\") {\n        const terminationEvent = \"onpagehide\" in globalThis ? \"pagehide\" : \"unload\";\n        addEventListener(terminationEvent, unloadHandler, false);\n    }\n}\nfunction unloadHandler() {\n    for (let i in Request.requests) {\n        if (Request.requests.hasOwnProperty(i)) {\n            Request.requests[i].abort();\n        }\n    }\n}\n","import { globalThisShim as globalThis } from \"../globalThis.js\";\nexport const nextTick = (() => {\n    const isPromiseAvailable = typeof Promise === \"function\" && typeof Promise.resolve === \"function\";\n    if (isPromiseAvailable) {\n        return (cb) => Promise.resolve().then(cb);\n    }\n    else {\n        return (cb, setTimeoutFn) => setTimeoutFn(cb, 0);\n    }\n})();\nexport const WebSocket = globalThis.WebSocket || globalThis.MozWebSocket;\nexport const usingBrowserWebSocket = true;\nexport const defaultBinaryType = \"arraybuffer\";\n","import { Transport } from \"../transport.js\";\nimport { yeast } from \"../contrib/yeast.js\";\nimport { pick } from \"../util.js\";\nimport { defaultBinaryType, nextTick, usingBrowserWebSocket, WebSocket, } from \"./websocket-constructor.js\";\nimport { encodePacket } from \"engine.io-parser\";\n// detect ReactNative environment\nconst isReactNative = typeof navigator !== \"undefined\" &&\n    typeof navigator.product === \"string\" &&\n    navigator.product.toLowerCase() === \"reactnative\";\nexport class WS extends Transport {\n    /**\n     * WebSocket transport constructor.\n     *\n     * @param {Object} opts - connection options\n     * @protected\n     */\n    constructor(opts) {\n        super(opts);\n        this.supportsBinary = !opts.forceBase64;\n    }\n    get name() {\n        return \"websocket\";\n    }\n    doOpen() {\n        if (!this.check()) {\n            // let probe timeout\n            return;\n        }\n        const uri = this.uri();\n        const protocols = this.opts.protocols;\n        // React Native only supports the 'headers' option, and will print a warning if anything else is passed\n        const opts = isReactNative\n            ? {}\n            : pick(this.opts, \"agent\", \"perMessageDeflate\", \"pfx\", \"key\", \"passphrase\", \"cert\", \"ca\", \"ciphers\", \"rejectUnauthorized\", \"localAddress\", \"protocolVersion\", \"origin\", \"maxPayload\", \"family\", \"checkServerIdentity\");\n        if (this.opts.extraHeaders) {\n            opts.headers = this.opts.extraHeaders;\n        }\n        try {\n            this.ws =\n                usingBrowserWebSocket && !isReactNative\n                    ? protocols\n                        ? new WebSocket(uri, protocols)\n                        : new WebSocket(uri)\n                    : new WebSocket(uri, protocols, opts);\n        }\n        catch (err) {\n            return this.emitReserved(\"error\", err);\n        }\n        this.ws.binaryType = this.socket.binaryType || defaultBinaryType;\n        this.addEventListeners();\n    }\n    /**\n     * Adds event listeners to the socket\n     *\n     * @private\n     */\n    addEventListeners() {\n        this.ws.onopen = () => {\n            if (this.opts.autoUnref) {\n                this.ws._socket.unref();\n            }\n            this.onOpen();\n        };\n        this.ws.onclose = (closeEvent) => this.onClose({\n            description: \"websocket connection closed\",\n            context: closeEvent,\n        });\n        this.ws.onmessage = (ev) => this.onData(ev.data);\n        this.ws.onerror = (e) => this.onError(\"websocket error\", e);\n    }\n    write(packets) {\n        this.writable = false;\n        // encodePacket efficient as it uses WS framing\n        // no need for encodePayload\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacket(packet, this.supportsBinary, (data) => {\n                // always create a new object (GH-437)\n                const opts = {};\n                if (!usingBrowserWebSocket) {\n                    if (packet.options) {\n                        opts.compress = packet.options.compress;\n                    }\n                    if (this.opts.perMessageDeflate) {\n                        const len = \n                        // @ts-ignore\n                        \"string\" === typeof data ? Buffer.byteLength(data) : data.length;\n                        if (len < this.opts.perMessageDeflate.threshold) {\n                            opts.compress = false;\n                        }\n                    }\n                }\n                // Sometimes the websocket has already been closed but the browser didn't\n                // have a chance of informing us about it yet, in that case send will\n                // throw an error\n                try {\n                    if (usingBrowserWebSocket) {\n                        // TypeError is thrown when passing the second argument on Safari\n                        this.ws.send(data);\n                    }\n                    else {\n                        this.ws.send(data, opts);\n                    }\n                }\n                catch (e) {\n                }\n                if (lastPacket) {\n                    // fake drain\n                    // defer to next tick to allow Socket to clear writeBuffer\n                    nextTick(() => {\n                        this.writable = true;\n                        this.emitReserved(\"drain\");\n                    }, this.setTimeoutFn);\n                }\n            });\n        }\n    }\n    doClose() {\n        if (typeof this.ws !== \"undefined\") {\n            this.ws.close();\n            this.ws = null;\n        }\n    }\n    /**\n     * Generates uri for connection.\n     *\n     * @private\n     */\n    uri() {\n        const schema = this.opts.secure ? \"wss\" : \"ws\";\n        const query = this.query || {};\n        // append timestamp to URI\n        if (this.opts.timestampRequests) {\n            query[this.opts.timestampParam] = yeast();\n        }\n        // communicate binary support capabilities\n        if (!this.supportsBinary) {\n            query.b64 = 1;\n        }\n        return this.createUri(schema, query);\n    }\n    /**\n     * Feature detection for WebSocket.\n     *\n     * @return {Boolean} whether this transport is available.\n     * @private\n     */\n    check() {\n        return !!WebSocket;\n    }\n}\n","import { Transport } from \"../transport.js\";\nimport { nextTick } from \"./websocket-constructor.js\";\nimport { encodePacketToBinary, decodePacketFromBinary, } from \"engine.io-parser\";\nfunction shouldIncludeBinaryHeader(packet, encoded) {\n    // 48 === \"0\".charCodeAt(0) (OPEN packet type)\n    // 54 === \"6\".charCodeAt(0) (NOOP packet type)\n    return (packet.type === \"message\" &&\n        typeof packet.data !== \"string\" &&\n        encoded[0] >= 48 &&\n        encoded[0] <= 54);\n}\nexport class WT extends Transport {\n    get name() {\n        return \"webtransport\";\n    }\n    doOpen() {\n        // @ts-ignore\n        if (typeof WebTransport !== \"function\") {\n            return;\n        }\n        // @ts-ignore\n        this.transport = new WebTransport(this.createUri(\"https\"), this.opts.transportOptions[this.name]);\n        this.transport.closed\n            .then(() => {\n            this.onClose();\n        })\n            .catch((err) => {\n            this.onError(\"webtransport error\", err);\n        });\n        // note: we could have used async/await, but that would require some additional polyfills\n        this.transport.ready.then(() => {\n            this.transport.createBidirectionalStream().then((stream) => {\n                const reader = stream.readable.getReader();\n                this.writer = stream.writable.getWriter();\n                let binaryFlag;\n                const read = () => {\n                    reader\n                        .read()\n                        .then(({ done, value }) => {\n                        if (done) {\n                            return;\n                        }\n                        if (!binaryFlag && value.byteLength === 1 && value[0] === 54) {\n                            binaryFlag = true;\n                        }\n                        else {\n                            // TODO expose binarytype\n                            this.onPacket(decodePacketFromBinary(value, binaryFlag, \"arraybuffer\"));\n                            binaryFlag = false;\n                        }\n                        read();\n                    })\n                        .catch((err) => {\n                    });\n                };\n                read();\n                const handshake = this.query.sid ? `0{\"sid\":\"${this.query.sid}\"}` : \"0\";\n                this.writer\n                    .write(new TextEncoder().encode(handshake))\n                    .then(() => this.onOpen());\n            });\n        });\n    }\n    write(packets) {\n        this.writable = false;\n        for (let i = 0; i < packets.length; i++) {\n            const packet = packets[i];\n            const lastPacket = i === packets.length - 1;\n            encodePacketToBinary(packet, (data) => {\n                if (shouldIncludeBinaryHeader(packet, data)) {\n                    this.writer.write(Uint8Array.of(54));\n                }\n                this.writer.write(data).then(() => {\n                    if (lastPacket) {\n                        nextTick(() => {\n                            this.writable = true;\n                            this.emitReserved(\"drain\");\n                        }, this.setTimeoutFn);\n                    }\n                });\n            });\n        }\n    }\n    doClose() {\n        var _a;\n        (_a = this.transport) === null || _a === void 0 ? void 0 : _a.close();\n    }\n}\n","// browser shim for xmlhttprequest module\nimport { hasCORS } from \"../contrib/has-cors.js\";\nimport { globalThisShim as globalThis } from \"../globalThis.js\";\nexport function XHR(opts) {\n    const xdomain = opts.xdomain;\n    // XMLHttpRequest can be disabled on IE\n    try {\n        if (\"undefined\" !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n            return new XMLHttpRequest();\n        }\n    }\n    catch (e) { }\n    if (!xdomain) {\n        try {\n            return new globalThis[[\"Active\"].concat(\"Object\").join(\"X\")](\"Microsoft.XMLHTTP\");\n        }\n        catch (e) { }\n    }\n}\nexport function createCookieJar() { }\n","import { globalThisShim as globalThis } from \"./globalThis.js\";\nexport function pick(obj, ...attr) {\n    return attr.reduce((acc, k) => {\n        if (obj.hasOwnProperty(k)) {\n            acc[k] = obj[k];\n        }\n        return acc;\n    }, {});\n}\n// Keep a reference to the real timeout functions so they can be used when overridden\nconst NATIVE_SET_TIMEOUT = globalThis.setTimeout;\nconst NATIVE_CLEAR_TIMEOUT = globalThis.clearTimeout;\nexport function installTimerFunctions(obj, opts) {\n    if (opts.useNativeTimers) {\n        obj.setTimeoutFn = NATIVE_SET_TIMEOUT.bind(globalThis);\n        obj.clearTimeoutFn = NATIVE_CLEAR_TIMEOUT.bind(globalThis);\n    }\n    else {\n        obj.setTimeoutFn = globalThis.setTimeout.bind(globalThis);\n        obj.clearTimeoutFn = globalThis.clearTimeout.bind(globalThis);\n    }\n}\n// base64 encoded buffers are about 33% bigger (https://en.wikipedia.org/wiki/Base64)\nconst BASE64_OVERHEAD = 1.33;\n// we could also have used `new Blob([obj]).size`, but it isn't supported in IE9\nexport function byteLength(obj) {\n    if (typeof obj === \"string\") {\n        return utf8Length(obj);\n    }\n    // arraybuffer or blob\n    return Math.ceil((obj.byteLength || obj.size) * BASE64_OVERHEAD);\n}\nfunction utf8Length(str) {\n    let c = 0, length = 0;\n    for (let i = 0, l = str.length; i < l; i++) {\n        c = str.charCodeAt(i);\n        if (c < 0x80) {\n            length += 1;\n        }\n        else if (c < 0x800) {\n            length += 2;\n        }\n        else if (c < 0xd800 || c >= 0xe000) {\n            length += 3;\n        }\n        else {\n            i++;\n            length += 4;\n        }\n    }\n    return length;\n}\n","const PACKET_TYPES = Object.create(null); // no Map = no polyfill\nPACKET_TYPES[\"open\"] = \"0\";\nPACKET_TYPES[\"close\"] = \"1\";\nPACKET_TYPES[\"ping\"] = \"2\";\nPACKET_TYPES[\"pong\"] = \"3\";\nPACKET_TYPES[\"message\"] = \"4\";\nPACKET_TYPES[\"upgrade\"] = \"5\";\nPACKET_TYPES[\"noop\"] = \"6\";\nconst PACKET_TYPES_REVERSE = Object.create(null);\nObject.keys(PACKET_TYPES).forEach(key => {\n    PACKET_TYPES_REVERSE[PACKET_TYPES[key]] = key;\n});\nconst ERROR_PACKET = { type: \"error\", data: \"parser error\" };\nexport { PACKET_TYPES, PACKET_TYPES_REVERSE, ERROR_PACKET };\n","// imported from https://github.com/socketio/base64-arraybuffer\nconst chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n// Use a lookup table to find the index.\nconst lookup = typeof Uint8Array === 'undefined' ? [] : new Uint8Array(256);\nfor (let i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n}\nexport const encode = (arraybuffer) => {\n    let bytes = new Uint8Array(arraybuffer), i, len = bytes.length, base64 = '';\n    for (i = 0; i < len; i += 3) {\n        base64 += chars[bytes[i] >> 2];\n        base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n        base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n        base64 += chars[bytes[i + 2] & 63];\n    }\n    if (len % 3 === 2) {\n        base64 = base64.substring(0, base64.length - 1) + '=';\n    }\n    else if (len % 3 === 1) {\n        base64 = base64.substring(0, base64.length - 2) + '==';\n    }\n    return base64;\n};\nexport const decode = (base64) => {\n    let bufferLength = base64.length * 0.75, len = base64.length, i, p = 0, encoded1, encoded2, encoded3, encoded4;\n    if (base64[base64.length - 1] === '=') {\n        bufferLength--;\n        if (base64[base64.length - 2] === '=') {\n            bufferLength--;\n        }\n    }\n    const arraybuffer = new ArrayBuffer(bufferLength), bytes = new Uint8Array(arraybuffer);\n    for (i = 0; i < len; i += 4) {\n        encoded1 = lookup[base64.charCodeAt(i)];\n        encoded2 = lookup[base64.charCodeAt(i + 1)];\n        encoded3 = lookup[base64.charCodeAt(i + 2)];\n        encoded4 = lookup[base64.charCodeAt(i + 3)];\n        bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n        bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n        bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n    return arraybuffer;\n};\n","import { ERROR_PACKET, PACKET_TYPES_REVERSE } from \"./commons.js\";\nimport { decode } from \"./contrib/base64-arraybuffer.js\";\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nexport const decodePacket = (encodedPacket, binaryType) => {\n    if (typeof encodedPacket !== \"string\") {\n        return {\n            type: \"message\",\n            data: mapBinary(encodedPacket, binaryType)\n        };\n    }\n    const type = encodedPacket.charAt(0);\n    if (type === \"b\") {\n        return {\n            type: \"message\",\n            data: decodeBase64Packet(encodedPacket.substring(1), binaryType)\n        };\n    }\n    const packetType = PACKET_TYPES_REVERSE[type];\n    if (!packetType) {\n        return ERROR_PACKET;\n    }\n    return encodedPacket.length > 1\n        ? {\n            type: PACKET_TYPES_REVERSE[type],\n            data: encodedPacket.substring(1)\n        }\n        : {\n            type: PACKET_TYPES_REVERSE[type]\n        };\n};\nconst decodeBase64Packet = (data, binaryType) => {\n    if (withNativeArrayBuffer) {\n        const decoded = decode(data);\n        return mapBinary(decoded, binaryType);\n    }\n    else {\n        return { base64: true, data }; // fallback for old browsers\n    }\n};\nconst mapBinary = (data, binaryType) => {\n    switch (binaryType) {\n        case \"blob\":\n            if (data instanceof Blob) {\n                // from WebSocket + binaryType \"blob\"\n                return data;\n            }\n            else {\n                // from HTTP long-polling or WebTransport\n                return new Blob([data]);\n            }\n        case \"arraybuffer\":\n        default:\n            if (data instanceof ArrayBuffer) {\n                // from HTTP long-polling (base64) or WebSocket + binaryType \"arraybuffer\"\n                return data;\n            }\n            else {\n                // from WebTransport (Uint8Array)\n                return data.buffer;\n            }\n    }\n};\n","import { PACKET_TYPES } from \"./commons.js\";\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        Object.prototype.toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\n// ArrayBuffer.isView method is not defined in IE10\nconst isView = obj => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj && obj.buffer instanceof ArrayBuffer;\n};\nconst encodePacket = ({ type, data }, supportsBinary, callback) => {\n    if (withNativeBlob && data instanceof Blob) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(data, callback);\n        }\n    }\n    else if (withNativeArrayBuffer &&\n        (data instanceof ArrayBuffer || isView(data))) {\n        if (supportsBinary) {\n            return callback(data);\n        }\n        else {\n            return encodeBlobAsBase64(new Blob([data]), callback);\n        }\n    }\n    // plain string\n    return callback(PACKET_TYPES[type] + (data || \"\"));\n};\nconst encodeBlobAsBase64 = (data, callback) => {\n    const fileReader = new FileReader();\n    fileReader.onload = function () {\n        const content = fileReader.result.split(\",\")[1];\n        callback(\"b\" + (content || \"\"));\n    };\n    return fileReader.readAsDataURL(data);\n};\nfunction toArray(data) {\n    if (data instanceof Uint8Array) {\n        return data;\n    }\n    else if (data instanceof ArrayBuffer) {\n        return new Uint8Array(data);\n    }\n    else {\n        return new Uint8Array(data.buffer, data.byteOffset, data.byteLength);\n    }\n}\nlet TEXT_ENCODER;\nexport function encodePacketToBinary(packet, callback) {\n    if (withNativeBlob && packet.data instanceof Blob) {\n        return packet.data\n            .arrayBuffer()\n            .then(toArray)\n            .then(callback);\n    }\n    else if (withNativeArrayBuffer &&\n        (packet.data instanceof ArrayBuffer || isView(packet.data))) {\n        return callback(toArray(packet.data));\n    }\n    encodePacket(packet, false, encoded => {\n        if (!TEXT_ENCODER) {\n            TEXT_ENCODER = new TextEncoder();\n        }\n        callback(TEXT_ENCODER.encode(encoded));\n    });\n}\nexport { encodePacket };\n","import { encodePacket, encodePacketToBinary } from \"./encodePacket.js\";\nimport { decodePacket } from \"./decodePacket.js\";\nconst SEPARATOR = String.fromCharCode(30); // see https://en.wikipedia.org/wiki/Delimiter#ASCII_delimited_text\nconst encodePayload = (packets, callback) => {\n    // some packets may be added to the array while encoding, so the initial length must be saved\n    const length = packets.length;\n    const encodedPackets = new Array(length);\n    let count = 0;\n    packets.forEach((packet, i) => {\n        // force base64 encoding for binary packets\n        encodePacket(packet, false, encodedPacket => {\n            encodedPackets[i] = encodedPacket;\n            if (++count === length) {\n                callback(encodedPackets.join(SEPARATOR));\n            }\n        });\n    });\n};\nconst decodePayload = (encodedPayload, binaryType) => {\n    const encodedPackets = encodedPayload.split(SEPARATOR);\n    const packets = [];\n    for (let i = 0; i < encodedPackets.length; i++) {\n        const decodedPacket = decodePacket(encodedPackets[i], binaryType);\n        packets.push(decodedPacket);\n        if (decodedPacket.type === \"error\") {\n            break;\n        }\n    }\n    return packets;\n};\nlet TEXT_DECODER;\nexport function decodePacketFromBinary(data, isBinary, binaryType) {\n    if (!TEXT_DECODER) {\n        // lazily created for compatibility with old browser platforms\n        TEXT_DECODER = new TextDecoder();\n    }\n    // 48 === \"0\".charCodeAt(0) (OPEN packet type)\n    // 54 === \"6\".charCodeAt(0) (NOOP packet type)\n    const isPlainBinary = isBinary || data[0] < 48 || data[0] > 54;\n    return decodePacket(isPlainBinary ? data : TEXT_DECODER.decode(data), binaryType);\n}\nexport const protocol = 4;\nexport { encodePacket, encodePacketToBinary, encodePayload, decodePacket, decodePayload };\n","import { DOCUMENT, CommonModule } from '@angular/common';\nimport * as i0 from '@angular/core';\nimport { Injectable, Inject, Optional, EventEmitter, Directive, Input, Output, NgModule } from '@angular/core';\nimport { WINDOW } from 'ngx-window-token';\nimport { Subject } from 'rxjs';\n\n/**\n * The following code is heavily copied from https://github.com/zenorocha/clipboard.js\n */\nclass ClipboardService {\n    constructor(ngZone, document, window) {\n        this.ngZone = ngZone;\n        this.document = document;\n        this.window = window;\n        this.copySubject = new Subject();\n        this.copyResponse$ = this.copySubject.asObservable();\n        this.config = {};\n    }\n    configure(config) {\n        this.config = config;\n    }\n    copy(content) {\n        if (!this.isSupported || !content) {\n            return this.pushCopyResponse({ isSuccess: false, content });\n        }\n        const copyResult = this.copyFromContent(content);\n        if (copyResult) {\n            return this.pushCopyResponse({ content, isSuccess: copyResult });\n        }\n        return this.pushCopyResponse({ isSuccess: false, content });\n    }\n    get isSupported() {\n        return !!this.document.queryCommandSupported && !!this.document.queryCommandSupported('copy') && !!this.window;\n    }\n    isTargetValid(element) {\n        if (element instanceof HTMLInputElement || element instanceof HTMLTextAreaElement) {\n            if (element.hasAttribute('disabled')) {\n                throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n            }\n            return true;\n        }\n        throw new Error('Target should be input or textarea');\n    }\n    /**\n     * Attempts to copy from an input `targetElm`\n     */\n    copyFromInputElement(targetElm, isFocus = true) {\n        try {\n            this.selectTarget(targetElm);\n            const re = this.copyText();\n            this.clearSelection(isFocus ? targetElm : undefined, this.window);\n            return re && this.isCopySuccessInIE11();\n        }\n        catch (error) {\n            return false;\n        }\n    }\n    /**\n     * This is a hack for IE11 to return `true` even if copy fails.\n     */\n    isCopySuccessInIE11() {\n        const clipboardData = this.window['clipboardData'];\n        if (clipboardData && clipboardData.getData) {\n            if (!clipboardData.getData('Text')) {\n                return false;\n            }\n        }\n        return true;\n    }\n    /**\n     * Creates a fake textarea element, sets its value from `text` property,\n     * and makes a selection on it.\n     */\n    copyFromContent(content, container = this.document.body) {\n        // check if the temp textarea still belongs to the current container.\n        // In case we have multiple places using ngx-clipboard, one is in a modal using container but the other one is not.\n        if (this.tempTextArea && !container.contains(this.tempTextArea)) {\n            this.destroy(this.tempTextArea.parentElement || undefined);\n        }\n        if (!this.tempTextArea) {\n            this.tempTextArea = this.createTempTextArea(this.document, this.window);\n            try {\n                container.appendChild(this.tempTextArea);\n            }\n            catch (error) {\n                throw new Error('Container should be a Dom element');\n            }\n        }\n        this.tempTextArea.value = content;\n        const toReturn = this.copyFromInputElement(this.tempTextArea, false);\n        if (this.config.cleanUpAfterCopy) {\n            this.destroy(this.tempTextArea.parentElement || undefined);\n        }\n        return toReturn;\n    }\n    /**\n     * Remove temporary textarea if any exists.\n     */\n    destroy(container = this.document.body) {\n        if (this.tempTextArea) {\n            container.removeChild(this.tempTextArea);\n            // removeChild doesn't remove the reference from memory\n            this.tempTextArea = undefined;\n        }\n    }\n    /**\n     * Select the target html input element.\n     */\n    selectTarget(inputElement) {\n        inputElement.select();\n        inputElement.setSelectionRange(0, inputElement.value.length);\n        return inputElement.value.length;\n    }\n    copyText() {\n        return this.document.execCommand('copy');\n    }\n    /**\n     * Moves focus away from `target` and back to the trigger, removes current selection.\n     */\n    clearSelection(inputElement, window) {\n        inputElement && inputElement.focus();\n        window.getSelection()?.removeAllRanges();\n    }\n    /**\n     * Creates a fake textarea for copy command.\n     */\n    createTempTextArea(doc, window) {\n        const isRTL = doc.documentElement.getAttribute('dir') === 'rtl';\n        let ta;\n        ta = doc.createElement('textarea');\n        // Prevent zooming on iOS\n        ta.style.fontSize = '12pt';\n        // Reset box model\n        ta.style.border = '0';\n        ta.style.padding = '0';\n        ta.style.margin = '0';\n        // Move element out of screen horizontally\n        ta.style.position = 'absolute';\n        ta.style[isRTL ? 'right' : 'left'] = '-9999px';\n        // Move element to the same position vertically\n        const yPosition = window.pageYOffset || doc.documentElement.scrollTop;\n        ta.style.top = yPosition + 'px';\n        ta.setAttribute('readonly', '');\n        return ta;\n    }\n    /**\n     * Pushes copy operation response to copySubject, to provide global access\n     * to the response.\n     */\n    pushCopyResponse(response) {\n        if (this.copySubject.observers.length > 0) {\n            this.ngZone.run(() => {\n                this.copySubject.next(response);\n            });\n        }\n    }\n    /**\n     * @deprecated use pushCopyResponse instead.\n     */\n    pushCopyReponse(response) {\n        this.pushCopyResponse(response);\n    }\n}\nClipboardService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardService, deps: [{ token: i0.NgZone }, { token: DOCUMENT }, { token: WINDOW, optional: true }], target: i0.ɵɵFactoryTarget.Injectable });\nClipboardService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardService, providedIn: 'root' });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardService, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: undefined, decorators: [{\n                    type: Inject,\n                    args: [DOCUMENT]\n                }] }, { type: undefined, decorators: [{\n                    type: Optional\n                }, {\n                    type: Inject,\n                    args: [WINDOW]\n                }] }]; } });\n\nclass ClipboardDirective {\n    constructor(ngZone, host, renderer, clipboardSrv) {\n        this.ngZone = ngZone;\n        this.host = host;\n        this.renderer = renderer;\n        this.clipboardSrv = clipboardSrv;\n        this.cbOnSuccess = new EventEmitter();\n        this.cbOnError = new EventEmitter();\n        this.onClick = (event) => {\n            if (!this.clipboardSrv.isSupported) {\n                this.handleResult(false, undefined, event);\n            }\n            else if (this.targetElm && this.clipboardSrv.isTargetValid(this.targetElm)) {\n                this.handleResult(this.clipboardSrv.copyFromInputElement(this.targetElm), this.targetElm.value, event);\n            }\n            else if (this.cbContent) {\n                this.handleResult(this.clipboardSrv.copyFromContent(this.cbContent, this.container), this.cbContent, event);\n            }\n        };\n    }\n    // eslint-disable-next-line no-empty, @typescript-eslint/no-empty-function\n    ngOnInit() {\n        this.ngZone.runOutsideAngular(() => {\n            // By default each host listener schedules change detection and also wrapped\n            // into additional function that calls `markForCheck()`. We're listening the `click`\n            // event in the context of the root zone to avoid running unnecessary change detections,\n            // since this directive doesn't do anything template-related (e.g. updates template variables).\n            this.clickListener = this.renderer.listen(this.host.nativeElement, 'click', this.onClick);\n        });\n    }\n    ngOnDestroy() {\n        if (this.clickListener) {\n            this.clickListener();\n        }\n        this.clipboardSrv.destroy(this.container);\n    }\n    /**\n     * Fires an event based on the copy operation result.\n     * @param succeeded\n     */\n    handleResult(succeeded, copiedContent, event) {\n        let response = {\n            isSuccess: succeeded,\n            content: copiedContent,\n            successMessage: this.cbSuccessMsg,\n            event\n        };\n        if (succeeded) {\n            if (this.cbOnSuccess.observed) {\n                this.ngZone.run(() => {\n                    this.cbOnSuccess.emit(response);\n                });\n            }\n        }\n        else {\n            if (this.cbOnError.observed) {\n                this.ngZone.run(() => {\n                    this.cbOnError.emit(response);\n                });\n            }\n        }\n        this.clipboardSrv.pushCopyResponse(response);\n    }\n}\nClipboardDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardDirective, deps: [{ token: i0.NgZone }, { token: i0.ElementRef }, { token: i0.Renderer2 }, { token: ClipboardService }], target: i0.ɵɵFactoryTarget.Directive });\nClipboardDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ClipboardDirective, selector: \"[ngxClipboard]\", inputs: { targetElm: [\"ngxClipboard\", \"targetElm\"], container: \"container\", cbContent: \"cbContent\", cbSuccessMsg: \"cbSuccessMsg\" }, outputs: { cbOnSuccess: \"cbOnSuccess\", cbOnError: \"cbOnError\" }, ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardDirective, decorators: [{\n            type: Directive,\n            args: [{ selector: '[ngxClipboard]' }]\n        }], ctorParameters: function () { return [{ type: i0.NgZone }, { type: i0.ElementRef }, { type: i0.Renderer2 }, { type: ClipboardService }]; }, propDecorators: { targetElm: [{\n                type: Input,\n                args: ['ngxClipboard']\n            }], container: [{\n                type: Input\n            }], cbContent: [{\n                type: Input\n            }], cbSuccessMsg: [{\n                type: Input\n            }], cbOnSuccess: [{\n                type: Output\n            }], cbOnError: [{\n                type: Output\n            }] } });\n\nclass ClipboardIfSupportedDirective {\n    constructor(_clipboardService, _viewContainerRef, _templateRef) {\n        this._clipboardService = _clipboardService;\n        this._viewContainerRef = _viewContainerRef;\n        this._templateRef = _templateRef;\n    }\n    ngOnInit() {\n        if (this._clipboardService.isSupported) {\n            this._viewContainerRef.createEmbeddedView(this._templateRef);\n        }\n    }\n}\nClipboardIfSupportedDirective.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardIfSupportedDirective, deps: [{ token: ClipboardService }, { token: i0.ViewContainerRef }, { token: i0.TemplateRef }], target: i0.ɵɵFactoryTarget.Directive });\nClipboardIfSupportedDirective.ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"15.1.4\", type: ClipboardIfSupportedDirective, selector: \"[ngxClipboardIfSupported]\", ngImport: i0 });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardIfSupportedDirective, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[ngxClipboardIfSupported]'\n                }]\n        }], ctorParameters: function () { return [{ type: ClipboardService }, { type: i0.ViewContainerRef }, { type: i0.TemplateRef }]; } });\n\nclass ClipboardModule {\n}\nClipboardModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nClipboardModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardModule, declarations: [ClipboardDirective, ClipboardIfSupportedDirective], imports: [CommonModule], exports: [ClipboardDirective, ClipboardIfSupportedDirective] });\nClipboardModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardModule, imports: [CommonModule] });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.1.4\", ngImport: i0, type: ClipboardModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CommonModule],\n                    declarations: [ClipboardDirective, ClipboardIfSupportedDirective],\n                    exports: [ClipboardDirective, ClipboardIfSupportedDirective]\n                }]\n        }] });\n\n/*\n * Public API Surface of ngx-clipboard\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { ClipboardDirective, ClipboardIfSupportedDirective, ClipboardModule, ClipboardService };\n","import * as i0 from '@angular/core';\nimport { InjectionToken, NgModule } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { share } from 'rxjs/operators';\nimport * as io from 'socket.io-client';\n\nclass WrappedSocket {\n    constructor(config) {\n        this.config = config;\n        this.subscribersCounter = {};\n        this.eventObservables$ = {};\n        this.emptyConfig = {\n            url: '',\n            options: {},\n        };\n        if (config === undefined) {\n            config = this.emptyConfig;\n        }\n        const url = config.url;\n        const options = config.options;\n        const ioFunc = io.default ? io.default : io;\n        this.ioSocket = ioFunc(url, options);\n    }\n    of(namespace) {\n        this.ioSocket.of(namespace);\n    }\n    on(eventName, callback) {\n        this.ioSocket.on(eventName, callback);\n    }\n    once(eventName, callback) {\n        this.ioSocket.once(eventName, callback);\n    }\n    connect() {\n        return this.ioSocket.connect();\n    }\n    disconnect(_close) {\n        return this.ioSocket.disconnect.apply(this.ioSocket, arguments);\n    }\n    emit(_eventName, ..._args) {\n        return this.ioSocket.emit.apply(this.ioSocket, arguments);\n    }\n    removeListener(_eventName, _callback) {\n        return this.ioSocket.removeListener.apply(this.ioSocket, arguments);\n    }\n    removeAllListeners(_eventName) {\n        return this.ioSocket.removeAllListeners.apply(this.ioSocket, arguments);\n    }\n    fromEvent(eventName) {\n        if (!this.subscribersCounter[eventName]) {\n            this.subscribersCounter[eventName] = 0;\n        }\n        this.subscribersCounter[eventName]++;\n        if (!this.eventObservables$[eventName]) {\n            this.eventObservables$[eventName] = new Observable((observer) => {\n                const listener = (data) => {\n                    observer.next(data);\n                };\n                this.ioSocket.on(eventName, listener);\n                return () => {\n                    this.subscribersCounter[eventName]--;\n                    if (this.subscribersCounter[eventName] === 0) {\n                        this.ioSocket.removeListener(eventName, listener);\n                        delete this.eventObservables$[eventName];\n                    }\n                };\n            }).pipe(share());\n        }\n        return this.eventObservables$[eventName];\n    }\n    fromOneTimeEvent(eventName) {\n        return new Promise(resolve => this.once(eventName, resolve));\n    }\n    listeners(eventName) {\n        return this.ioSocket.listeners(eventName);\n    }\n    listenersAny() {\n        return this.ioSocket.listenersAny();\n    }\n    listenersAnyOutgoing() {\n        return this.ioSocket.listenersAnyOutgoing();\n    }\n    off(eventName, listener) {\n        if (!eventName) {\n            // Remove all listeners for all events\n            return this.ioSocket.offAny();\n        }\n        if (eventName && !listener) {\n            // Remove all listeners for that event\n            return this.ioSocket.off(eventName);\n        }\n        // Removes the specified listener from the listener array for the event named\n        return this.ioSocket.off(eventName, listener);\n    }\n    onAny(callback) {\n        return this.ioSocket.onAny(callback);\n    }\n    onAnyOutgoing(callback) {\n        return this.ioSocket.onAnyOutgoing(callback);\n    }\n    prependAny(callback) {\n        return this.ioSocket.prependAny(callback);\n    }\n    prependAnyOutgoing(callback) {\n        return this.ioSocket.prependAnyOutgoing(callback);\n    }\n    timeout(value) {\n        return this.ioSocket.timeout(value);\n    }\n    volatile() {\n        return this.ioSocket.volatile;\n    }\n}\n\n/** Socket factory */\nfunction SocketFactory(config) {\n    return new WrappedSocket(config);\n}\nconst SOCKET_CONFIG_TOKEN = new InjectionToken('__SOCKET_IO_CONFIG__');\nclass SocketIoModule {\n    static forRoot(config) {\n        return {\n            ngModule: SocketIoModule,\n            providers: [\n                { provide: SOCKET_CONFIG_TOKEN, useValue: config },\n                {\n                    provide: WrappedSocket,\n                    useFactory: SocketFactory,\n                    deps: [SOCKET_CONFIG_TOKEN],\n                },\n            ],\n        };\n    }\n}\nSocketIoModule.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: SocketIoModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\nSocketIoModule.ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"15.0.0\", ngImport: i0, type: SocketIoModule });\nSocketIoModule.ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: SocketIoModule });\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"15.0.0\", ngImport: i0, type: SocketIoModule, decorators: [{\n            type: NgModule,\n            args: [{}]\n        }] });\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { WrappedSocket as Socket, SocketIoModule };\n","import { InjectionToken } from '@angular/core';\n\nconst WINDOW = new InjectionToken('WindowToken', typeof window !== 'undefined' && window.document\n    ? { providedIn: 'root', factory: () => window }\n    : { providedIn: 'root', factory: () => undefined });\n\n/*\n * Public API Surface of ngx-window-token\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { WINDOW };\n","import createDebug from 'debug';\nimport EventEmitter from 'eventemitter3';\nimport WebSocketIpml from 'isomorphic-ws';\nimport sha256 from 'crypto-js/sha256.js';\nimport Base64 from 'crypto-js/enc-base64.js';\n\nfunction _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nvar WebSocketOpCode;\n(function (WebSocketOpCode) {\n  /**\n   * The initial message sent by obs-websocket to newly connected clients.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Hello\"] = 0] = \"Hello\";\n  /**\n   * The message sent by a newly connected client to obs-websocket in response to a `Hello`.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Identify\"] = 1] = \"Identify\";\n  /**\n   * The response sent by obs-websocket to a client after it has successfully identified with obs-websocket.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Identified\"] = 2] = \"Identified\";\n  /**\n   * The message sent by an already-identified client to update identification parameters.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Reidentify\"] = 3] = \"Reidentify\";\n  /**\n   * The message sent by obs-websocket containing an event payload.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Event\"] = 5] = \"Event\";\n  /**\n   * The message sent by a client to obs-websocket to perform a request.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"Request\"] = 6] = \"Request\";\n  /**\n   * The message sent by obs-websocket in response to a particular request from a client.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"RequestResponse\"] = 7] = \"RequestResponse\";\n  /**\n   * The message sent by a client to obs-websocket to perform a batch of requests.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"RequestBatch\"] = 8] = \"RequestBatch\";\n  /**\n   * The message sent by obs-websocket in response to a particular batch of requests from a client.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  WebSocketOpCode[WebSocketOpCode[\"RequestBatchResponse\"] = 9] = \"RequestBatchResponse\";\n})(WebSocketOpCode || (WebSocketOpCode = {}));\n/* eslint-disable no-bitwise, @typescript-eslint/prefer-literal-enum-member */\nvar EventSubscription;\n(function (EventSubscription) {\n  /**\n   * Subcription value used to disable all events.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"None\"] = 0] = \"None\";\n  /**\n   * Subscription value to receive events in the `General` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"General\"] = 1] = \"General\";\n  /**\n   * Subscription value to receive events in the `Config` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Config\"] = 2] = \"Config\";\n  /**\n   * Subscription value to receive events in the `Scenes` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Scenes\"] = 4] = \"Scenes\";\n  /**\n   * Subscription value to receive events in the `Inputs` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Inputs\"] = 8] = \"Inputs\";\n  /**\n   * Subscription value to receive events in the `Transitions` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Transitions\"] = 16] = \"Transitions\";\n  /**\n   * Subscription value to receive events in the `Filters` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Filters\"] = 32] = \"Filters\";\n  /**\n   * Subscription value to receive events in the `Outputs` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Outputs\"] = 64] = \"Outputs\";\n  /**\n   * Subscription value to receive events in the `SceneItems` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"SceneItems\"] = 128] = \"SceneItems\";\n  /**\n   * Subscription value to receive events in the `MediaInputs` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"MediaInputs\"] = 256] = \"MediaInputs\";\n  /**\n   * Subscription value to receive the `VendorEvent` event.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Vendors\"] = 512] = \"Vendors\";\n  /**\n   * Subscription value to receive events in the `Ui` category.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"Ui\"] = 1024] = \"Ui\";\n  /**\n   * Helper to receive all non-high-volume events.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"All\"] = 2047] = \"All\";\n  /**\n   * Subscription value to receive the `InputVolumeMeters` high-volume event.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"InputVolumeMeters\"] = 65536] = \"InputVolumeMeters\";\n  /**\n   * Subscription value to receive the `InputActiveStateChanged` high-volume event.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"InputActiveStateChanged\"] = 131072] = \"InputActiveStateChanged\";\n  /**\n   * Subscription value to receive the `InputShowStateChanged` high-volume event.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"InputShowStateChanged\"] = 262144] = \"InputShowStateChanged\";\n  /**\n   * Subscription value to receive the `SceneItemTransformChanged` high-volume event.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  EventSubscription[EventSubscription[\"SceneItemTransformChanged\"] = 524288] = \"SceneItemTransformChanged\";\n})(EventSubscription || (EventSubscription = {}));\n/* eslint-enable no-bitwise, @typescript-eslint/prefer-literal-enum-member */\nvar RequestBatchExecutionType;\n(function (RequestBatchExecutionType) {\n  /**\n   * Not a request batch.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  RequestBatchExecutionType[RequestBatchExecutionType[\"None\"] = -1] = \"None\";\n  /**\n   * A request batch which processes all requests serially, as fast as possible.\n   *\n   * Note: To introduce artificial delay, use the `Sleep` request and the `sleepMillis` request field.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  RequestBatchExecutionType[RequestBatchExecutionType[\"SerialRealtime\"] = 0] = \"SerialRealtime\";\n  /**\n   * A request batch type which processes all requests serially, in sync with the graphics thread. Designed to provide high accuracy for animations.\n   *\n   * Note: To introduce artificial delay, use the `Sleep` request and the `sleepFrames` request field.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  RequestBatchExecutionType[RequestBatchExecutionType[\"SerialFrame\"] = 1] = \"SerialFrame\";\n  /**\n   * A request batch type which processes all requests using all available threads in the thread pool.\n   *\n   * Note: This is mainly experimental, and only really shows its colors during requests which require lots of\n   * active processing, like `GetSourceScreenshot`.\n   *\n   * Initial OBS Version: 5.0.0\n   */\n  RequestBatchExecutionType[RequestBatchExecutionType[\"Parallel\"] = 2] = \"Parallel\";\n})(RequestBatchExecutionType || (RequestBatchExecutionType = {}));\n\n/**\n * SHA256 Hashing.\n * @param  {string} [salt=''] salt.\n * @param  {string} [challenge=''] challenge.\n * @param  {string} msg Message to encode.\n * @returns {string} sha256 encoded string.\n */\nfunction authenticationHashing (salt, challenge, msg) {\n  const hash = Base64.stringify(sha256(msg + salt));\n  return Base64.stringify(sha256(hash + challenge));\n}\n\nconst _excluded = [\"authentication\", \"rpcVersion\"];\nconst debug = createDebug('obs-websocket-js');\nclass OBSWebSocketError extends Error {\n  constructor(code, message) {\n    super(message);\n    this.code = void 0;\n    this.code = code;\n  }\n}\nclass BaseOBSWebSocket extends EventEmitter {\n  constructor(...args) {\n    super(...args);\n    this._identified = false;\n    this.internalListeners = new EventEmitter();\n    this.socket = void 0;\n  }\n  static generateMessageId() {\n    return String(BaseOBSWebSocket.requestCounter++);\n  }\n  get identified() {\n    return this._identified;\n  }\n  /**\n   * Connect to an obs-websocket server\n   * @param url Websocket server to connect to (including ws:// or wss:// protocol)\n   * @param password Password\n   * @param identificationParams Data for Identify event\n   * @returns Hello & Identified messages data (combined)\n   */\n  async connect(url = 'ws://127.0.0.1:4455', password, identificationParams = {}) {\n    var _this = this;\n    if (this.socket) {\n      await this.disconnect();\n    }\n    try {\n      const connectionClosedPromise = this.internalEventPromise('ConnectionClosed');\n      const connectionErrorPromise = this.internalEventPromise('ConnectionError');\n      return await Promise.race([async function () {\n        const hello = await _this.createConnection(url);\n        _this.emit('Hello', hello);\n        return _this.identify(hello, password, identificationParams);\n      }(),\n      // Choose the best promise for connection error/close\n      // In browser connection close has close code + reason,\n      // while in node error event has these\n      new Promise((resolve, reject) => {\n        void connectionErrorPromise.then(e => {\n          if (e.message) {\n            reject(e);\n          }\n        });\n        void connectionClosedPromise.then(e => {\n          reject(e);\n        });\n      })]);\n    } catch (error) {\n      await this.disconnect();\n      throw error;\n    }\n  }\n  /**\n   * Disconnect from obs-websocket server\n   */\n  async disconnect() {\n    if (!this.socket || this.socket.readyState === WebSocketIpml.CLOSED) {\n      return;\n    }\n    const connectionClosedPromise = this.internalEventPromise('ConnectionClosed');\n    this.socket.close();\n    await connectionClosedPromise;\n  }\n  /**\n   * Update session parameters\n   * @param data Reidentify data\n   * @returns Identified message data\n   */\n  async reidentify(data) {\n    const identifiedPromise = this.internalEventPromise(`op:${WebSocketOpCode.Identified}`);\n    await this.message(WebSocketOpCode.Reidentify, data);\n    return identifiedPromise;\n  }\n  /**\n   * Send a request to obs-websocket\n   * @param requestType Request name\n   * @param requestData Request data\n   * @returns Request response\n   */\n  async call(requestType, requestData) {\n    const requestId = BaseOBSWebSocket.generateMessageId();\n    const responsePromise = this.internalEventPromise(`res:${requestId}`);\n    await this.message(WebSocketOpCode.Request, {\n      requestId,\n      requestType,\n      requestData\n    });\n    const {\n      requestStatus,\n      responseData\n    } = await responsePromise;\n    if (!requestStatus.result) {\n      throw new OBSWebSocketError(requestStatus.code, requestStatus.comment);\n    }\n    return responseData;\n  }\n  /**\n   * Send a batch request to obs-websocket\n   * @param requests Array of Request objects (type and data)\n   * @param options A set of options for how the batch will be executed\n   * @param options.executionType The mode of execution obs-websocket will run the batch in\n   * @param options.haltOnFailure Whether obs-websocket should stop executing the batch if one request fails\n   * @returns RequestBatch response\n   */\n  async callBatch(requests, options = {}) {\n    const requestId = BaseOBSWebSocket.generateMessageId();\n    const responsePromise = this.internalEventPromise(`res:${requestId}`);\n    await this.message(WebSocketOpCode.RequestBatch, _extends({\n      requestId,\n      requests\n    }, options));\n    const {\n      results\n    } = await responsePromise;\n    return results;\n  }\n  /**\n   * Cleanup from socket disconnection\n   */\n  cleanup() {\n    if (!this.socket) {\n      return;\n    }\n    this.socket.onopen = null;\n    this.socket.onmessage = null;\n    this.socket.onerror = null;\n    this.socket.onclose = null;\n    this.socket = undefined;\n    this._identified = false;\n    // Cleanup leftovers\n    this.internalListeners.removeAllListeners();\n  }\n  /**\n   * Create connection to specified obs-websocket server\n   *\n   * @private\n   * @param url Websocket address\n   * @returns Promise for hello data\n   */\n  async createConnection(url) {\n    var _this$socket;\n    const connectionOpenedPromise = this.internalEventPromise('ConnectionOpened');\n    const helloPromise = this.internalEventPromise(`op:${WebSocketOpCode.Hello}`);\n    this.socket = new WebSocketIpml(url, this.protocol);\n    this.socket.onopen = this.onOpen.bind(this);\n    this.socket.onmessage = this.onMessage.bind(this);\n    this.socket.onerror = this.onError.bind(this);\n    this.socket.onclose = this.onClose.bind(this);\n    await connectionOpenedPromise;\n    const protocol = (_this$socket = this.socket) == null ? void 0 : _this$socket.protocol;\n    // Browsers don't autoclose on missing/wrong protocol\n    if (!protocol) {\n      throw new OBSWebSocketError(-1, 'Server sent no subprotocol');\n    }\n    if (protocol !== this.protocol) {\n      throw new OBSWebSocketError(-1, 'Server sent an invalid subprotocol');\n    }\n    return helloPromise;\n  }\n  /**\n   * Send identify message\n   *\n   * @private\n   * @param hello Hello message data\n   * @param password Password\n   * @param identificationParams Identification params\n   * @returns Hello & Identified messages data (combined)\n   */\n  async identify(_ref, password, identificationParams = {}) {\n    let {\n        authentication,\n        rpcVersion\n      } = _ref,\n      helloRest = _objectWithoutPropertiesLoose(_ref, _excluded);\n    // Set rpcVersion if unset\n    const data = _extends({\n      rpcVersion\n    }, identificationParams);\n    if (authentication && password) {\n      data.authentication = authenticationHashing(authentication.salt, authentication.challenge, password);\n    }\n    const identifiedPromise = this.internalEventPromise(`op:${WebSocketOpCode.Identified}`);\n    await this.message(WebSocketOpCode.Identify, data);\n    const identified = await identifiedPromise;\n    this._identified = true;\n    this.emit('Identified', identified);\n    return _extends({\n      rpcVersion\n    }, helloRest, identified);\n  }\n  /**\n   * Send message to obs-websocket\n   *\n   * @private\n   * @param op WebSocketOpCode\n   * @param d Message data\n   */\n  async message(op, d) {\n    if (!this.socket) {\n      throw new Error('Not connected');\n    }\n    if (!this.identified && op !== 1) {\n      throw new Error('Socket not identified');\n    }\n    const encoded = await this.encodeMessage({\n      op,\n      d\n    });\n    this.socket.send(encoded);\n  }\n  /**\n   * Create a promise to listen for an event on internal listener\n   * (will be cleaned up on disconnect)\n   *\n   * @private\n   * @param event Event to listen to\n   * @returns Event data\n   */\n  async internalEventPromise(event) {\n    return new Promise(resolve => {\n      this.internalListeners.once(event, resolve);\n    });\n  }\n  /**\n   * Websocket open event listener\n   *\n   * @private\n   * @param e Event\n   */\n  onOpen(e) {\n    debug('socket.open');\n    this.emit('ConnectionOpened');\n    this.internalListeners.emit('ConnectionOpened', e);\n  }\n  /**\n   * Websocket message event listener\n   *\n   * @private\n   * @param e Event\n   */\n  async onMessage(e) {\n    try {\n      const {\n        op,\n        d\n      } = await this.decodeMessage(e.data);\n      debug('socket.message: %d %j', op, d);\n      if (op === undefined || d === undefined) {\n        return;\n      }\n      switch (op) {\n        case WebSocketOpCode.Event:\n          {\n            const {\n              eventType,\n              eventData\n            } = d;\n            // @ts-expect-error Typescript just doesn't understand it\n            this.emit(eventType, eventData);\n            return;\n          }\n        case WebSocketOpCode.RequestResponse:\n        case WebSocketOpCode.RequestBatchResponse:\n          {\n            const {\n              requestId\n            } = d;\n            this.internalListeners.emit(`res:${requestId}`, d);\n            return;\n          }\n        default:\n          this.internalListeners.emit(`op:${op}`, d);\n      }\n    } catch (error) {\n      debug('error handling message: %o', error);\n    }\n  }\n  /**\n   * Websocket error event listener\n   *\n   * @private\n   * @param e ErrorEvent\n   */\n  onError(e) {\n    debug('socket.error: %o', e);\n    const error = new OBSWebSocketError(-1, e.message);\n    this.emit('ConnectionError', error);\n    this.internalListeners.emit('ConnectionError', error);\n  }\n  /**\n   * Websocket close event listener\n   *\n   * @private\n   * @param e Event\n   */\n  onClose(e) {\n    debug('socket.close: %s (%d)', e.reason, e.code);\n    const error = new OBSWebSocketError(e.code, e.reason);\n    this.emit('ConnectionClosed', error);\n    this.internalListeners.emit('ConnectionClosed', error);\n    this.cleanup();\n  }\n}\nBaseOBSWebSocket.requestCounter = 1;\n// https://github.com/developit/microbundle/issues/531#issuecomment-575473024\n// Not using ESM export due to it also being detected and breaking rollup based bundlers (vite)\nif (typeof exports !== 'undefined') {\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n}\n\nclass OBSWebSocket extends BaseOBSWebSocket {\n  constructor(...args) {\n    super(...args);\n    this.protocol = 'obswebsocket.json';\n  }\n  async encodeMessage(data) {\n    return JSON.stringify(data);\n  }\n  async decodeMessage(data) {\n    return JSON.parse(data);\n  }\n}\n\nexport { EventSubscription, OBSWebSocketError, RequestBatchExecutionType, WebSocketOpCode, OBSWebSocket as default };\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import $kKvpS$peerjsjsbinarypack from \"peerjs-js-binarypack\";\nimport $kKvpS$webrtcadapter from \"webrtc-adapter\";\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n\nvar $af8cf1f663f490f4$var$webRTCAdapter = //@ts-ignore\n$kKvpS$webrtcadapter.default || $kKvpS$webrtcadapter;\nvar $af8cf1f663f490f4$export$25be9502477c137d = new /** @class */ (function() {\n    function class_1() {\n        this.isIOS = [\n            \"iPad\",\n            \"iPhone\",\n            \"iPod\"\n        ].includes(navigator.platform);\n        this.supportedBrowsers = [\n            \"firefox\",\n            \"chrome\",\n            \"safari\"\n        ];\n        this.minFirefoxVersion = 59;\n        this.minChromeVersion = 72;\n        this.minSafariVersion = 605;\n    }\n    class_1.prototype.isWebRTCSupported = function() {\n        return typeof RTCPeerConnection !== \"undefined\";\n    };\n    class_1.prototype.isBrowserSupported = function() {\n        var browser = this.getBrowser();\n        var version = this.getVersion();\n        var validBrowser = this.supportedBrowsers.includes(browser);\n        if (!validBrowser) return false;\n        if (browser === \"chrome\") return version >= this.minChromeVersion;\n        if (browser === \"firefox\") return version >= this.minFirefoxVersion;\n        if (browser === \"safari\") return !this.isIOS && version >= this.minSafariVersion;\n        return false;\n    };\n    class_1.prototype.getBrowser = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.browser;\n    };\n    class_1.prototype.getVersion = function() {\n        return $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n    };\n    class_1.prototype.isUnifiedPlanSupported = function() {\n        var browser = this.getBrowser();\n        var version = $af8cf1f663f490f4$var$webRTCAdapter.browserDetails.version || 0;\n        if (browser === \"chrome\" && version < this.minChromeVersion) return false;\n        if (browser === \"firefox\" && version >= this.minFirefoxVersion) return true;\n        if (!window.RTCRtpTransceiver || !(\"currentDirection\" in RTCRtpTransceiver.prototype)) return false;\n        var tempPc;\n        var supported = false;\n        try {\n            tempPc = new RTCPeerConnection();\n            tempPc.addTransceiver(\"audio\");\n            supported = true;\n        } catch (e) {} finally{\n            if (tempPc) tempPc.close();\n        }\n        return supported;\n    };\n    class_1.prototype.toString = function() {\n        return \"Supports:\\n    browser:\".concat(this.getBrowser(), \"\\n    version:\").concat(this.getVersion(), \"\\n    isIOS:\").concat(this.isIOS, \"\\n    isWebRTCSupported:\").concat(this.isWebRTCSupported(), \"\\n    isBrowserSupported:\").concat(this.isBrowserSupported(), \"\\n    isUnifiedPlanSupported:\").concat(this.isUnifiedPlanSupported());\n    };\n    return class_1;\n}())();\n\n\nvar $06cb531ed7840f78$var$DEFAULT_CONFIG = {\n    iceServers: [\n        {\n            urls: \"stun:stun.l.google.com:19302\"\n        },\n        {\n            urls: [\n                \"turn:eu-0.turn.peerjs.com:3478\",\n                \"turn:us-0.turn.peerjs.com:3478\", \n            ],\n            username: \"peerjs\",\n            credential: \"peerjsp\"\n        }, \n    ],\n    sdpSemantics: \"unified-plan\"\n};\nvar $06cb531ed7840f78$var$Util = /** @class */ function() {\n    function Util() {\n        this.CLOUD_HOST = \"0.peerjs.com\";\n        this.CLOUD_PORT = 443;\n        // Browsers that need chunking:\n        this.chunkedBrowsers = {\n            Chrome: 1,\n            chrome: 1\n        };\n        this.chunkedMTU = 16300; // The original 60000 bytes setting does not work when sending data from Firefox to Chrome, which is \"cut off\" after 16384 bytes and delivered individually.\n        // Returns browser-agnostic default config\n        this.defaultConfig = $06cb531ed7840f78$var$DEFAULT_CONFIG;\n        this.browser = $af8cf1f663f490f4$export$25be9502477c137d.getBrowser();\n        this.browserVersion = $af8cf1f663f490f4$export$25be9502477c137d.getVersion();\n        // Lists which features are supported\n        this.supports = function() {\n            var supported = {\n                browser: $af8cf1f663f490f4$export$25be9502477c137d.isBrowserSupported(),\n                webRTC: $af8cf1f663f490f4$export$25be9502477c137d.isWebRTCSupported(),\n                audioVideo: false,\n                data: false,\n                binaryBlob: false,\n                reliable: false\n            };\n            if (!supported.webRTC) return supported;\n            var pc;\n            try {\n                pc = new RTCPeerConnection($06cb531ed7840f78$var$DEFAULT_CONFIG);\n                supported.audioVideo = true;\n                var dc = void 0;\n                try {\n                    dc = pc.createDataChannel(\"_PEERJSTEST\", {\n                        ordered: true\n                    });\n                    supported.data = true;\n                    supported.reliable = !!dc.ordered;\n                    // Binary test\n                    try {\n                        dc.binaryType = \"blob\";\n                        supported.binaryBlob = !$af8cf1f663f490f4$export$25be9502477c137d.isIOS;\n                    } catch (e) {}\n                } catch (e) {} finally{\n                    if (dc) dc.close();\n                }\n            } catch (e) {} finally{\n                if (pc) pc.close();\n            }\n            return supported;\n        }();\n        this.pack = $kKvpS$peerjsjsbinarypack.pack;\n        this.unpack = $kKvpS$peerjsjsbinarypack.unpack;\n        // Binary stuff\n        this._dataCount = 1;\n    }\n    Util.prototype.noop = function() {};\n    // Ensure alphanumeric ids\n    Util.prototype.validateId = function(id) {\n        // Allow empty ids\n        return !id || /^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(id);\n    };\n    Util.prototype.chunk = function(blob) {\n        var chunks = [];\n        var size = blob.size;\n        var total = Math.ceil(size / $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n        var index = 0;\n        var start = 0;\n        while(start < size){\n            var end = Math.min(size, start + $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU);\n            var b = blob.slice(start, end);\n            var chunk = {\n                __peerData: this._dataCount,\n                n: index,\n                data: b,\n                total: total\n            };\n            chunks.push(chunk);\n            start = end;\n            index++;\n        }\n        this._dataCount++;\n        return chunks;\n    };\n    Util.prototype.blobToArrayBuffer = function(blob, cb) {\n        var fr = new FileReader();\n        fr.onload = function(evt) {\n            if (evt.target) cb(evt.target.result);\n        };\n        fr.readAsArrayBuffer(blob);\n        return fr;\n    };\n    Util.prototype.binaryStringToArrayBuffer = function(binary) {\n        var byteArray = new Uint8Array(binary.length);\n        for(var i = 0; i < binary.length; i++)byteArray[i] = binary.charCodeAt(i) & 0xff;\n        return byteArray.buffer;\n    };\n    Util.prototype.randomToken = function() {\n        return Math.random().toString(36).slice(2);\n    };\n    Util.prototype.isSecure = function() {\n        return location.protocol === \"https:\";\n    };\n    return Util;\n}();\nvar $06cb531ed7840f78$export$7debb50ef11d5e0b = new $06cb531ed7840f78$var$Util();\n\n\nvar $26088d7da5b03f69$exports = {};\n\n$parcel$export($26088d7da5b03f69$exports, \"Peer\", () => $26088d7da5b03f69$export$ecd1fc136c422448, (v) => $26088d7da5b03f69$export$ecd1fc136c422448 = v);\nvar $ac9b757d51178e15$exports = {};\n'use strict';\nvar $ac9b757d51178e15$var$has = Object.prototype.hasOwnProperty, $ac9b757d51178e15$var$prefix = '~';\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$Events() {}\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n    $ac9b757d51178e15$var$Events.prototype = Object.create(null);\n    //\n    // This hack is needed because the `__proto__` property is still inherited in\n    // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n    //\n    if (!new $ac9b757d51178e15$var$Events().__proto__) $ac9b757d51178e15$var$prefix = false;\n}\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */ function $ac9b757d51178e15$var$EE(fn, context, once) {\n    this.fn = fn;\n    this.context = context;\n    this.once = once || false;\n}\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */ function $ac9b757d51178e15$var$addListener(emitter, event, fn, context, once) {\n    if (typeof fn !== 'function') throw new TypeError('The listener must be a function');\n    var listener = new $ac9b757d51178e15$var$EE(fn, context || emitter, once), evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n    else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n    else emitter._events[evt] = [\n        emitter._events[evt],\n        listener\n    ];\n    return emitter;\n}\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */ function $ac9b757d51178e15$var$clearEvent(emitter, evt) {\n    if (--emitter._eventsCount === 0) emitter._events = new $ac9b757d51178e15$var$Events();\n    else delete emitter._events[evt];\n}\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */ function $ac9b757d51178e15$var$EventEmitter() {\n    this._events = new $ac9b757d51178e15$var$Events();\n    this._eventsCount = 0;\n}\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.eventNames = function eventNames() {\n    var names = [], events, name;\n    if (this._eventsCount === 0) return names;\n    for(name in events = this._events)if ($ac9b757d51178e15$var$has.call(events, name)) names.push($ac9b757d51178e15$var$prefix ? name.slice(1) : name);\n    if (Object.getOwnPropertySymbols) return names.concat(Object.getOwnPropertySymbols(events));\n    return names;\n};\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listeners = function listeners(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, handlers = this._events[evt];\n    if (!handlers) return [];\n    if (handlers.fn) return [\n        handlers.fn\n    ];\n    for(var i = 0, l = handlers.length, ee = new Array(l); i < l; i++)ee[i] = handlers[i].fn;\n    return ee;\n};\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.listenerCount = function listenerCount(event) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event, listeners = this._events[evt];\n    if (!listeners) return 0;\n    if (listeners.fn) return 1;\n    return listeners.length;\n};\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return false;\n    var listeners = this._events[evt], len = arguments.length, args, i;\n    if (listeners.fn) {\n        if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n        switch(len){\n            case 1:\n                return listeners.fn.call(listeners.context), true;\n            case 2:\n                return listeners.fn.call(listeners.context, a1), true;\n            case 3:\n                return listeners.fn.call(listeners.context, a1, a2), true;\n            case 4:\n                return listeners.fn.call(listeners.context, a1, a2, a3), true;\n            case 5:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n            case 6:\n                return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for(i = 1, args = new Array(len - 1); i < len; i++)args[i - 1] = arguments[i];\n        listeners.fn.apply(listeners.context, args);\n    } else {\n        var length = listeners.length, j;\n        for(i = 0; i < length; i++){\n            if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n            switch(len){\n                case 1:\n                    listeners[i].fn.call(listeners[i].context);\n                    break;\n                case 2:\n                    listeners[i].fn.call(listeners[i].context, a1);\n                    break;\n                case 3:\n                    listeners[i].fn.call(listeners[i].context, a1, a2);\n                    break;\n                case 4:\n                    listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n                    break;\n                default:\n                    if (!args) for(j = 1, args = new Array(len - 1); j < len; j++)args[j - 1] = arguments[j];\n                    listeners[i].fn.apply(listeners[i].context, args);\n            }\n        }\n    }\n    return true;\n};\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.on = function on(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, false);\n};\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.once = function once(event, fn, context) {\n    return $ac9b757d51178e15$var$addListener(this, event, fn, context, true);\n};\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n    var evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n    if (!this._events[evt]) return this;\n    if (!fn) {\n        $ac9b757d51178e15$var$clearEvent(this, evt);\n        return this;\n    }\n    var listeners = this._events[evt];\n    if (listeners.fn) {\n        if (listeners.fn === fn && (!once || listeners.once) && (!context || listeners.context === context)) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        for(var i = 0, events = [], length = listeners.length; i < length; i++)if (listeners[i].fn !== fn || once && !listeners[i].once || context && listeners[i].context !== context) events.push(listeners[i]);\n        //\n        // Reset the array, or remove it completely if we have no more listeners.\n        //\n        if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n        else $ac9b757d51178e15$var$clearEvent(this, evt);\n    }\n    return this;\n};\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */ $ac9b757d51178e15$var$EventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n    var evt;\n    if (event) {\n        evt = $ac9b757d51178e15$var$prefix ? $ac9b757d51178e15$var$prefix + event : event;\n        if (this._events[evt]) $ac9b757d51178e15$var$clearEvent(this, evt);\n    } else {\n        this._events = new $ac9b757d51178e15$var$Events();\n        this._eventsCount = 0;\n    }\n    return this;\n};\n//\n// Alias methods names because people roll like that.\n//\n$ac9b757d51178e15$var$EventEmitter.prototype.off = $ac9b757d51178e15$var$EventEmitter.prototype.removeListener;\n$ac9b757d51178e15$var$EventEmitter.prototype.addListener = $ac9b757d51178e15$var$EventEmitter.prototype.on;\n//\n// Expose the prefix.\n//\n$ac9b757d51178e15$var$EventEmitter.prefixed = $ac9b757d51178e15$var$prefix;\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\n$ac9b757d51178e15$var$EventEmitter.EventEmitter = $ac9b757d51178e15$var$EventEmitter;\n$ac9b757d51178e15$exports = $ac9b757d51178e15$var$EventEmitter;\n\n\n\nvar $1615705ecc6adca3$exports = {};\n\n$parcel$export($1615705ecc6adca3$exports, \"LogLevel\", () => $1615705ecc6adca3$export$243e62d78d3b544d, (v) => $1615705ecc6adca3$export$243e62d78d3b544d = v);\n$parcel$export($1615705ecc6adca3$exports, \"default\", () => $1615705ecc6adca3$export$2e2bcd8739ae039, (v) => $1615705ecc6adca3$export$2e2bcd8739ae039 = v);\nvar $1615705ecc6adca3$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $1615705ecc6adca3$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $1615705ecc6adca3$var$LOG_PREFIX = \"PeerJS: \";\nvar $1615705ecc6adca3$export$243e62d78d3b544d;\n(function($1615705ecc6adca3$export$243e62d78d3b544d) {\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Disabled\"] = 0] = \"Disabled\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Errors\"] = 1] = \"Errors\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"Warnings\"] = 2] = \"Warnings\";\n    $1615705ecc6adca3$export$243e62d78d3b544d[$1615705ecc6adca3$export$243e62d78d3b544d[\"All\"] = 3] = \"All\";\n})($1615705ecc6adca3$export$243e62d78d3b544d || ($1615705ecc6adca3$export$243e62d78d3b544d = {}));\nvar $1615705ecc6adca3$var$Logger = /** @class */ function() {\n    function Logger() {\n        this._logLevel = $1615705ecc6adca3$export$243e62d78d3b544d.Disabled;\n    }\n    Object.defineProperty(Logger.prototype, \"logLevel\", {\n        get: function() {\n            return this._logLevel;\n        },\n        set: function(logLevel) {\n            this._logLevel = logLevel;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Logger.prototype.log = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.All\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.warn = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Warnings\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.error = function() {\n        var args = [];\n        for(var _i = 0; _i < arguments.length; _i++)args[_i] = arguments[_i];\n        if (this._logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) this._print.apply(this, $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$export$243e62d78d3b544d.Errors\n        ], $1615705ecc6adca3$var$__read(args), false));\n    };\n    Logger.prototype.setLogFunction = function(fn) {\n        this._print = fn;\n    };\n    Logger.prototype._print = function(logLevel) {\n        var rest = [];\n        for(var _i = 1; _i < arguments.length; _i++)rest[_i - 1] = arguments[_i];\n        var copy = $1615705ecc6adca3$var$__spreadArray([\n            $1615705ecc6adca3$var$LOG_PREFIX\n        ], $1615705ecc6adca3$var$__read(rest), false);\n        for(var i in copy)if (copy[i] instanceof Error) copy[i] = \"(\" + copy[i].name + \") \" + copy[i].message;\n        if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.All) console.log.apply(console, $1615705ecc6adca3$var$__spreadArray([], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Warnings) console.warn.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"WARNING\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n        else if (logLevel >= $1615705ecc6adca3$export$243e62d78d3b544d.Errors) console.error.apply(console, $1615705ecc6adca3$var$__spreadArray([\n            \"ERROR\"\n        ], $1615705ecc6adca3$var$__read(copy), false));\n    };\n    return Logger;\n}();\nvar $1615705ecc6adca3$export$2e2bcd8739ae039 = new $1615705ecc6adca3$var$Logger();\n\n\nvar $31d11a8d122cb4b7$exports = {};\n\n$parcel$export($31d11a8d122cb4b7$exports, \"Socket\", () => $31d11a8d122cb4b7$export$4798917dbf149b79, (v) => $31d11a8d122cb4b7$export$4798917dbf149b79 = v);\n\n\nvar $60fadef21a2daafc$export$3157d57b4135e3bc;\n(function($60fadef21a2daafc$export$3157d57b4135e3bc) {\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Data\"] = \"data\";\n    $60fadef21a2daafc$export$3157d57b4135e3bc[\"Media\"] = \"media\";\n})($60fadef21a2daafc$export$3157d57b4135e3bc || ($60fadef21a2daafc$export$3157d57b4135e3bc = {}));\nvar $60fadef21a2daafc$export$9547aaa2e39030ff;\n(function($60fadef21a2daafc$export$9547aaa2e39030ff) {\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"BrowserIncompatible\"] = \"browser-incompatible\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidID\"] = \"invalid-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"InvalidKey\"] = \"invalid-key\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"Network\"] = \"network\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"PeerUnavailable\"] = \"peer-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SslUnavailable\"] = \"ssl-unavailable\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"ServerError\"] = \"server-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketError\"] = \"socket-error\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"SocketClosed\"] = \"socket-closed\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"UnavailableID\"] = \"unavailable-id\";\n    $60fadef21a2daafc$export$9547aaa2e39030ff[\"WebRTC\"] = \"webrtc\";\n})($60fadef21a2daafc$export$9547aaa2e39030ff || ($60fadef21a2daafc$export$9547aaa2e39030ff = {}));\nvar $60fadef21a2daafc$export$89f507cf986a947;\n(function($60fadef21a2daafc$export$89f507cf986a947) {\n    $60fadef21a2daafc$export$89f507cf986a947[\"Binary\"] = \"binary\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"BinaryUTF8\"] = \"binary-utf8\";\n    $60fadef21a2daafc$export$89f507cf986a947[\"JSON\"] = \"json\";\n})($60fadef21a2daafc$export$89f507cf986a947 || ($60fadef21a2daafc$export$89f507cf986a947 = {}));\nvar $60fadef21a2daafc$export$3b5c4a4b6354f023;\n(function($60fadef21a2daafc$export$3b5c4a4b6354f023) {\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Message\"] = \"message\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Disconnected\"] = \"disconnected\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Error\"] = \"error\";\n    $60fadef21a2daafc$export$3b5c4a4b6354f023[\"Close\"] = \"close\";\n})($60fadef21a2daafc$export$3b5c4a4b6354f023 || ($60fadef21a2daafc$export$3b5c4a4b6354f023 = {}));\nvar $60fadef21a2daafc$export$adb4a1754da6f10d;\n(function($60fadef21a2daafc$export$adb4a1754da6f10d) {\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Heartbeat\"] = \"HEARTBEAT\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Candidate\"] = \"CANDIDATE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Offer\"] = \"OFFER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Answer\"] = \"ANSWER\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Open\"] = \"OPEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Error\"] = \"ERROR\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"IdTaken\"] = \"ID-TAKEN\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"InvalidKey\"] = \"INVALID-KEY\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Leave\"] = \"LEAVE\";\n    $60fadef21a2daafc$export$adb4a1754da6f10d[\"Expire\"] = \"EXPIRE\";\n})($60fadef21a2daafc$export$adb4a1754da6f10d || ($60fadef21a2daafc$export$adb4a1754da6f10d = {}));\n\n\nvar $0d1ed891c5cb27c0$exports = {};\n$0d1ed891c5cb27c0$exports = JSON.parse(\"{\\\"name\\\":\\\"peerjs\\\",\\\"version\\\":\\\"1.4.7\\\",\\\"keywords\\\":[\\\"peerjs\\\",\\\"webrtc\\\",\\\"p2p\\\",\\\"rtc\\\"],\\\"description\\\":\\\"PeerJS client\\\",\\\"homepage\\\":\\\"https://peerjs.com\\\",\\\"bugs\\\":{\\\"url\\\":\\\"https://github.com/peers/peerjs/issues\\\"},\\\"repository\\\":{\\\"type\\\":\\\"git\\\",\\\"url\\\":\\\"https://github.com/peers/peerjs\\\"},\\\"license\\\":\\\"MIT\\\",\\\"contributors\\\":[\\\"Michelle Bu <michelle@michellebu.com>\\\",\\\"afrokick <devbyru@gmail.com>\\\",\\\"ericz <really.ez@gmail.com>\\\",\\\"Jairo <kidandcat@gmail.com>\\\",\\\"Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>\\\",\\\"Jairo Caro-Accino Viciana <jairo@galax.be>\\\",\\\"Carlos Caballero <carlos.caballero.gonzalez@gmail.com>\\\",\\\"hc <hheennrryy@gmail.com>\\\",\\\"Muhammad Asif <capripio@gmail.com>\\\",\\\"PrashoonB <prashoonbhattacharjee@gmail.com>\\\",\\\"Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>\\\",\\\"akotynski <aleksanderkotbury@gmail.com>\\\",\\\"lmb <i@lmb.io>\\\",\\\"Jairooo <jairocaro@msn.com>\\\",\\\"Moritz Stückler <moritz.stueckler@gmail.com>\\\",\\\"Simon <crydotsnakegithub@gmail.com>\\\",\\\"Denis Lukov <denismassters@gmail.com>\\\",\\\"Philipp Hancke <fippo@andyet.net>\\\",\\\"Hans Oksendahl <hansoksendahl@gmail.com>\\\",\\\"Jess <jessachandler@gmail.com>\\\",\\\"khankuan <khankuan@gmail.com>\\\",\\\"DUODVK <kurmanov.work@gmail.com>\\\",\\\"XiZhao <kwang1imsa@gmail.com>\\\",\\\"Matthias Lohr <matthias@lohr.me>\\\",\\\"=frank tree <=frnktrb@googlemail.com>\\\",\\\"Andre Eckardt <aeckardt@outlook.com>\\\",\\\"Chris Cowan <agentme49@gmail.com>\\\",\\\"Alex Chuev <alex@chuev.com>\\\",\\\"alxnull <alxnull@e.mail.de>\\\",\\\"Yemel Jardi <angel.jardi@gmail.com>\\\",\\\"Ben Parnell <benjaminparnell.94@gmail.com>\\\",\\\"Benny Lichtner <bennlich@gmail.com>\\\",\\\"fresheneesz <bitetrudpublic@gmail.com>\\\",\\\"bob.barstead@exaptive.com <bob.barstead@exaptive.com>\\\",\\\"chandika <chandika@gmail.com>\\\",\\\"emersion <contact@emersion.fr>\\\",\\\"Christopher Van <cvan@users.noreply.github.com>\\\",\\\"eddieherm <edhermoso@gmail.com>\\\",\\\"Eduardo Pinho <enet4mikeenet@gmail.com>\\\",\\\"Evandro Zanatta <ezanatta@tray.net.br>\\\",\\\"Gardner Bickford <gardner@users.noreply.github.com>\\\",\\\"Gian Luca <gianluca.cecchi@cynny.com>\\\",\\\"PatrickJS <github@gdi2290.com>\\\",\\\"jonnyf <github@jonathanfoss.co.uk>\\\",\\\"Hizkia Felix <hizkifw@gmail.com>\\\",\\\"Hristo Oskov <hristo.oskov@gmail.com>\\\",\\\"Isaac Madwed <i.madwed@gmail.com>\\\",\\\"Ilya Konanykhin <ilya.konanykhin@gmail.com>\\\",\\\"jasonbarry <jasbarry@me.com>\\\",\\\"Jonathan Burke <jonathan.burke.1311@googlemail.com>\\\",\\\"Josh Hamit <josh.hamit@gmail.com>\\\",\\\"Jordan Austin <jrax86@gmail.com>\\\",\\\"Joel Wetzell <jwetzell@yahoo.com>\\\",\\\"xizhao <kevin.wang@cloudera.com>\\\",\\\"Alberto Torres <kungfoobar@gmail.com>\\\",\\\"Jonathan Mayol <mayoljonathan@gmail.com>\\\",\\\"Jefferson Felix <me@jsfelix.dev>\\\",\\\"Rolf Erik Lekang <me@rolflekang.com>\\\",\\\"Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>\\\",\\\"Pepijn de Vos <pepijndevos@gmail.com>\\\",\\\"JooYoung <qkdlql@naver.com>\\\",\\\"Tobias Speicher <rootcommander@gmail.com>\\\",\\\"Steve Blaurock <sblaurock@gmail.com>\\\",\\\"Kyrylo Shegeda <shegeda@ualberta.ca>\\\",\\\"Diwank Singh Tomer <singh@diwank.name>\\\",\\\"Sören Balko <Soeren.Balko@gmail.com>\\\",\\\"Arpit Solanki <solankiarpit1997@gmail.com>\\\",\\\"Yuki Ito <yuki@gnnk.net>\\\",\\\"Artur Zayats <zag2art@gmail.com>\\\"],\\\"funding\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"collective\\\":{\\\"type\\\":\\\"opencollective\\\",\\\"url\\\":\\\"https://opencollective.com/peer\\\"},\\\"files\\\":[\\\"dist/*\\\"],\\\"sideEffects\\\":[\\\"lib/global.ts\\\",\\\"lib/supports.ts\\\"],\\\"main\\\":\\\"dist/bundler.cjs\\\",\\\"module\\\":\\\"dist/bundler.mjs\\\",\\\"browser-minified\\\":\\\"dist/peerjs.min.js\\\",\\\"browser-unminified\\\":\\\"dist/peerjs.js\\\",\\\"types\\\":\\\"dist/types.d.ts\\\",\\\"engines\\\":{\\\"node\\\":\\\">= 10\\\"},\\\"targets\\\":{\\\"types\\\":{\\\"source\\\":\\\"lib/exports.ts\\\"},\\\"main\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"module\\\":{\\\"source\\\":\\\"lib/exports.ts\\\",\\\"includeNodeModules\\\":[\\\"eventemitter3\\\"],\\\"sourceMap\\\":{\\\"inlineSources\\\":true}},\\\"browser-minified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":true,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"},\\\"browser-unminified\\\":{\\\"context\\\":\\\"browser\\\",\\\"outputFormat\\\":\\\"global\\\",\\\"optimize\\\":false,\\\"engines\\\":{\\\"browsers\\\":\\\"cover 99%, not dead\\\"},\\\"source\\\":\\\"lib/global.ts\\\"}},\\\"scripts\\\":{\\\"contributors\\\":\\\"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\\\\\\"chore(contributors): update and sort contributors list\\\\\\\"\\\",\\\"check\\\":\\\"tsc --noEmit\\\",\\\"watch\\\":\\\"parcel watch\\\",\\\"build\\\":\\\"rm -rf dist && parcel build\\\",\\\"prepublishOnly\\\":\\\"npm run build\\\",\\\"test\\\":\\\"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts\\\",\\\"format\\\":\\\"prettier --write .\\\",\\\"semantic-release\\\":\\\"semantic-release\\\"},\\\"devDependencies\\\":{\\\"@parcel/config-default\\\":\\\"^2.5.0\\\",\\\"@parcel/packager-ts\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-tsc\\\":\\\"^2.5.0\\\",\\\"@parcel/transformer-typescript-types\\\":\\\"^2.5.0\\\",\\\"@semantic-release/changelog\\\":\\\"^6.0.1\\\",\\\"@semantic-release/git\\\":\\\"^10.0.1\\\",\\\"@types/chai\\\":\\\"^4.3.0\\\",\\\"@types/mocha\\\":\\\"^9.1.0\\\",\\\"@types/node\\\":\\\"^17.0.18\\\",\\\"chai\\\":\\\"^4.3.6\\\",\\\"git-authors-cli\\\":\\\"^1.0.40\\\",\\\"jsdom\\\":\\\"^19.0.0\\\",\\\"jsdom-global\\\":\\\"^3.0.2\\\",\\\"mocha\\\":\\\"^9.2.0\\\",\\\"mock-socket\\\":\\\"8.0.5\\\",\\\"parcel\\\":\\\"^2.5.0\\\",\\\"parcel-transformer-tsc-sourcemaps\\\":\\\"^1.0.2\\\",\\\"prettier\\\":\\\"^2.6.2\\\",\\\"semantic-release\\\":\\\"^19.0.2\\\",\\\"standard\\\":\\\"^16.0.4\\\",\\\"ts-node\\\":\\\"^10.5.0\\\",\\\"typescript\\\":\\\"^4.5.5\\\"},\\\"dependencies\\\":{\\\"@swc/helpers\\\":\\\"^0.3.13\\\",\\\"eventemitter3\\\":\\\"^4.0.7\\\",\\\"peerjs-js-binarypack\\\":\\\"1.0.1\\\",\\\"webrtc-adapter\\\":\\\"^7.7.1\\\"}}\");\n\n\nvar $31d11a8d122cb4b7$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $31d11a8d122cb4b7$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $31d11a8d122cb4b7$var$__spreadArray = undefined && undefined.__spreadArray || function(to, from, pack) {\n    if (pack || arguments.length === 2) {\n        for(var i = 0, l = from.length, ar; i < l; i++)if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar $31d11a8d122cb4b7$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * An abstraction on top of WebSockets to provide fastest\n * possible connection for peers.\n */ var $31d11a8d122cb4b7$export$4798917dbf149b79 = /** @class */ function(_super) {\n    $31d11a8d122cb4b7$var$__extends($31d11a8d122cb4b7$export$4798917dbf149b79, _super);\n    function $31d11a8d122cb4b7$export$4798917dbf149b79(secure, host, port, path, key, pingInterval) {\n        if (pingInterval === void 0) pingInterval = 5000;\n        var _this = _super.call(this) || this;\n        _this.pingInterval = pingInterval;\n        _this._disconnected = true;\n        _this._messagesQueue = [];\n        var wsProtocol = secure ? \"wss://\" : \"ws://\";\n        _this._baseUrl = wsProtocol + host + \":\" + port + path + \"peerjs?key=\" + key;\n        return _this;\n    }\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.start = function(id, token) {\n        var _this = this;\n        this._id = id;\n        var wsUrl = \"\".concat(this._baseUrl, \"&id=\").concat(id, \"&token=\").concat(token);\n        if (!!this._socket || !this._disconnected) return;\n        this._socket = new WebSocket(wsUrl + \"&version=\" + $0d1ed891c5cb27c0$exports.version);\n        this._disconnected = false;\n        this._socket.onmessage = function(event) {\n            var data;\n            try {\n                data = JSON.parse(event.data);\n                $1615705ecc6adca3$exports.default.log(\"Server message received:\", data);\n            } catch (e) {\n                $1615705ecc6adca3$exports.default.log(\"Invalid server message\", event.data);\n                return;\n            }\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, data);\n        };\n        this._socket.onclose = function(event) {\n            if (_this._disconnected) return;\n            $1615705ecc6adca3$exports.default.log(\"Socket closed.\", event);\n            _this._cleanup();\n            _this._disconnected = true;\n            _this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected);\n        };\n        // Take care of the queue of connections if necessary and make sure Peer knows\n        // socket is open.\n        this._socket.onopen = function() {\n            if (_this._disconnected) return;\n            _this._sendQueuedMessages();\n            $1615705ecc6adca3$exports.default.log(\"Socket open\");\n            _this._scheduleHeartbeat();\n        };\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._scheduleHeartbeat = function() {\n        var _this = this;\n        this._wsPingTimer = setTimeout(function() {\n            _this._sendHeartbeat();\n        }, this.pingInterval);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendHeartbeat = function() {\n        if (!this._wsOpen()) {\n            $1615705ecc6adca3$exports.default.log(\"Cannot send heartbeat, because socket closed\");\n            return;\n        }\n        var message = JSON.stringify({\n            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Heartbeat\n        });\n        this._socket.send(message);\n        this._scheduleHeartbeat();\n    };\n    /** Is the websocket currently open? */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._wsOpen = function() {\n        return !!this._socket && this._socket.readyState === 1;\n    };\n    /** Send queued messages. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._sendQueuedMessages = function() {\n        var e_1, _a;\n        //Create copy of queue and clear it,\n        //because send method push the message back to queue if smth will go wrong\n        var copiedQueue = $31d11a8d122cb4b7$var$__spreadArray([], $31d11a8d122cb4b7$var$__read(this._messagesQueue), false);\n        this._messagesQueue = [];\n        try {\n            for(var copiedQueue_1 = $31d11a8d122cb4b7$var$__values(copiedQueue), copiedQueue_1_1 = copiedQueue_1.next(); !copiedQueue_1_1.done; copiedQueue_1_1 = copiedQueue_1.next()){\n                var message = copiedQueue_1_1.value;\n                this.send(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (copiedQueue_1_1 && !copiedQueue_1_1.done && (_a = copiedQueue_1.return)) _a.call(copiedQueue_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    /** Exposed send for DC & Peer. */ $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.send = function(data) {\n        if (this._disconnected) return;\n        // If we didn't get an ID yet, we can't yet send anything so we should queue\n        // up these messages.\n        if (!this._id) {\n            this._messagesQueue.push(data);\n            return;\n        }\n        if (!data.type) {\n            this.emit($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, \"Invalid message\");\n            return;\n        }\n        if (!this._wsOpen()) return;\n        var message = JSON.stringify(data);\n        this._socket.send(message);\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype.close = function() {\n        if (this._disconnected) return;\n        this._cleanup();\n        this._disconnected = true;\n    };\n    $31d11a8d122cb4b7$export$4798917dbf149b79.prototype._cleanup = function() {\n        if (this._socket) {\n            this._socket.onopen = this._socket.onmessage = this._socket.onclose = null;\n            this._socket.close();\n            this._socket = undefined;\n        }\n        clearTimeout(this._wsPingTimer);\n    };\n    return $31d11a8d122cb4b7$export$4798917dbf149b79;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$exports = {};\n\n$parcel$export($353dee38f9ab557b$exports, \"MediaConnection\", () => $353dee38f9ab557b$export$4a84e95a2324ac29, (v) => $353dee38f9ab557b$export$4a84e95a2324ac29 = v);\n\n\nvar $77f14d3e81888156$exports = {};\n\n$parcel$export($77f14d3e81888156$exports, \"Negotiator\", () => $77f14d3e81888156$export$89e6bb5ad64bf4a, (v) => $77f14d3e81888156$export$89e6bb5ad64bf4a = v);\n\n\n\nvar $77f14d3e81888156$var$__assign = undefined && undefined.__assign || function() {\n    $77f14d3e81888156$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $77f14d3e81888156$var$__assign.apply(this, arguments);\n};\nvar $77f14d3e81888156$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $77f14d3e81888156$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\n/**\n * Manages all negotiations between Peers.\n */ var $77f14d3e81888156$export$89e6bb5ad64bf4a = /** @class */ function() {\n    function $77f14d3e81888156$export$89e6bb5ad64bf4a(connection) {\n        this.connection = connection;\n    }\n    /** Returns a PeerConnection object set up correctly (for data, media). */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.startConnection = function(options) {\n        var peerConnection = this._startPeerConnection();\n        // Set the connection's PC.\n        this.connection.peerConnection = peerConnection;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media && options._stream) this._addTracksToConnection(options._stream, peerConnection);\n        // What do we need to do now?\n        if (options.originator) {\n            if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                var dataConnection = this.connection;\n                var config = {\n                    ordered: !!options.reliable\n                };\n                var dataChannel = peerConnection.createDataChannel(dataConnection.label, config);\n                dataConnection.initialize(dataChannel);\n            }\n            this._makeOffer();\n        } else this.handleSDP(\"OFFER\", options.sdp);\n    };\n    /** Start a PC. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._startPeerConnection = function() {\n        $1615705ecc6adca3$exports.default.log(\"Creating RTCPeerConnection.\");\n        var peerConnection = new RTCPeerConnection(this.connection.provider.options.config);\n        this._setupListeners(peerConnection);\n        return peerConnection;\n    };\n    /** Set up various WebRTC listeners. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._setupListeners = function(peerConnection) {\n        var _this = this;\n        var peerId = this.connection.peer;\n        var connectionId = this.connection.connectionId;\n        var connectionType = this.connection.type;\n        var provider = this.connection.provider;\n        // ICE CANDIDATES.\n        $1615705ecc6adca3$exports.default.log(\"Listening for ICE candidates.\");\n        peerConnection.onicecandidate = function(evt) {\n            if (!evt.candidate || !evt.candidate.candidate) return;\n            $1615705ecc6adca3$exports.default.log(\"Received ICE candidates for \".concat(peerId, \":\"), evt.candidate);\n            provider.socket.send({\n                type: $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate,\n                payload: {\n                    candidate: evt.candidate,\n                    type: connectionType,\n                    connectionId: connectionId\n                },\n                dst: peerId\n            });\n        };\n        peerConnection.oniceconnectionstatechange = function() {\n            switch(peerConnection.iceConnectionState){\n                case \"failed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is failed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Negotiation of connection to \" + peerId + \" failed.\"));\n                    _this.connection.close();\n                    break;\n                case \"closed\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState is closed, closing connections to \" + peerId);\n                    _this.connection.emit(\"error\", new Error(\"Connection to \" + peerId + \" closed.\"));\n                    _this.connection.close();\n                    break;\n                case \"disconnected\":\n                    $1615705ecc6adca3$exports.default.log(\"iceConnectionState changed to disconnected on the connection with \" + peerId);\n                    break;\n                case \"completed\":\n                    peerConnection.onicecandidate = $06cb531ed7840f78$export$7debb50ef11d5e0b.noop;\n                    break;\n            }\n            _this.connection.emit(\"iceStateChanged\", peerConnection.iceConnectionState);\n        };\n        // DATACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for data channel\");\n        // Fired between offer and answer, so options should already be saved\n        // in the options hash.\n        peerConnection.ondatachannel = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received data channel\");\n            var dataChannel = evt.channel;\n            var connection = provider.getConnection(peerId, connectionId);\n            connection.initialize(dataChannel);\n        };\n        // MEDIACONNECTION.\n        $1615705ecc6adca3$exports.default.log(\"Listening for remote stream\");\n        peerConnection.ontrack = function(evt) {\n            $1615705ecc6adca3$exports.default.log(\"Received remote stream\");\n            var stream = evt.streams[0];\n            var connection = provider.getConnection(peerId, connectionId);\n            if (connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                var mediaConnection = connection;\n                _this._addStreamToMediaConnection(stream, mediaConnection);\n            }\n        };\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.cleanup = function() {\n        $1615705ecc6adca3$exports.default.log(\"Cleaning up PeerConnection to \" + this.connection.peer);\n        var peerConnection = this.connection.peerConnection;\n        if (!peerConnection) return;\n        this.connection.peerConnection = null;\n        //unsubscribe from all PeerConnection's events\n        peerConnection.onicecandidate = peerConnection.oniceconnectionstatechange = peerConnection.ondatachannel = peerConnection.ontrack = function() {};\n        var peerConnectionNotClosed = peerConnection.signalingState !== \"closed\";\n        var dataChannelNotClosed = false;\n        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n            var dataConnection = this.connection;\n            var dataChannel = dataConnection.dataChannel;\n            if (dataChannel) dataChannelNotClosed = !!dataChannel.readyState && dataChannel.readyState !== \"closed\";\n        }\n        if (peerConnectionNotClosed || dataChannelNotClosed) peerConnection.close();\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeOffer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, offer, payload, dataConnection, err_2, err_1_1;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createOffer(this.connection.options.constraints)\n                        ];\n                    case 2:\n                        offer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created offer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") offer.sdp = this.connection.options.sdpTransform(offer.sdp) || offer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(offer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", offer, \"for:\".concat(this.connection.peer));\n                        payload = {\n                            sdp: offer,\n                            type: this.connection.type,\n                            connectionId: this.connection.connectionId,\n                            metadata: this.connection.metadata,\n                            browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                        };\n                        if (this.connection.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                            dataConnection = this.connection;\n                            payload = $77f14d3e81888156$var$__assign($77f14d3e81888156$var$__assign({}, payload), {\n                                label: dataConnection.label,\n                                reliable: dataConnection.reliable,\n                                serialization: dataConnection.serialization\n                            });\n                        }\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Offer,\n                            payload: payload,\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_2 = _a.sent();\n                        // TODO: investigate why _makeOffer is being called from the answer\n                        if (err_2 != \"OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer\") {\n                            provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_2);\n                            $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_2);\n                        }\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_1 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_1);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to createOffer, \", err_1_1);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._makeAnswer = function() {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, answer, err_3, err_1_2;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            7,\n                            ,\n                            8\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.createAnswer()\n                        ];\n                    case 2:\n                        answer = _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Created answer.\");\n                        if (this.connection.options.sdpTransform && typeof this.connection.options.sdpTransform === \"function\") answer.sdp = this.connection.options.sdpTransform(answer.sdp) || answer.sdp;\n                        _a.label = 3;\n                    case 3:\n                        _a.trys.push([\n                            3,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setLocalDescription(answer)\n                        ];\n                    case 4:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set localDescription:\", answer, \"for:\".concat(this.connection.peer));\n                        provider.socket.send({\n                            type: $60fadef21a2daafc$export$adb4a1754da6f10d.Answer,\n                            payload: {\n                                sdp: answer,\n                                type: this.connection.type,\n                                connectionId: this.connection.connectionId,\n                                browser: $06cb531ed7840f78$export$7debb50ef11d5e0b.browser\n                            },\n                            dst: this.connection.peer\n                        });\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_3 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_3);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setLocalDescription, \", err_3);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 7:\n                        err_1_2 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_1_2);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to create answer, \", err_1_2);\n                        return [\n                            3 /*break*/ ,\n                            8\n                        ];\n                    case 8:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle an SDP. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleSDP = function(type, sdp) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var peerConnection, provider, self, err_4;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        sdp = new RTCSessionDescription(sdp);\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        $1615705ecc6adca3$exports.default.log(\"Setting remote description\", sdp);\n                        self = this;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            5,\n                            ,\n                            6\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.setRemoteDescription(sdp)\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Set remoteDescription:\".concat(type, \" for:\").concat(this.connection.peer));\n                        if (!(type === \"OFFER\")) return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                        return [\n                            4 /*yield*/ ,\n                            self._makeAnswer()\n                        ];\n                    case 3:\n                        _a.sent();\n                        _a.label = 4;\n                    case 4:\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 5:\n                        err_4 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_4);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to setRemoteDescription, \", err_4);\n                        return [\n                            3 /*break*/ ,\n                            6\n                        ];\n                    case 6:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** Handle a candidate. */ $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype.handleCandidate = function(ice) {\n        return $77f14d3e81888156$var$__awaiter(this, void 0, Promise, function() {\n            var candidate, sdpMLineIndex, sdpMid, peerConnection, provider, err_5;\n            return $77f14d3e81888156$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        $1615705ecc6adca3$exports.default.log(\"handleCandidate:\", ice);\n                        candidate = ice.candidate;\n                        sdpMLineIndex = ice.sdpMLineIndex;\n                        sdpMid = ice.sdpMid;\n                        peerConnection = this.connection.peerConnection;\n                        provider = this.connection.provider;\n                        _a.label = 1;\n                    case 1:\n                        _a.trys.push([\n                            1,\n                            3,\n                            ,\n                            4\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            peerConnection.addIceCandidate(new RTCIceCandidate({\n                                sdpMid: sdpMid,\n                                sdpMLineIndex: sdpMLineIndex,\n                                candidate: candidate\n                            }))\n                        ];\n                    case 2:\n                        _a.sent();\n                        $1615705ecc6adca3$exports.default.log(\"Added ICE candidate for:\".concat(this.connection.peer));\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 3:\n                        err_5 = _a.sent();\n                        provider.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.WebRTC, err_5);\n                        $1615705ecc6adca3$exports.default.log(\"Failed to handleCandidate, \", err_5);\n                        return [\n                            3 /*break*/ ,\n                            4\n                        ];\n                    case 4:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addTracksToConnection = function(stream, peerConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add tracks from stream \".concat(stream.id, \" to peer connection\"));\n        if (!peerConnection.addTrack) return $1615705ecc6adca3$exports.default.error(\"Your browser does't support RTCPeerConnection#addTrack. Ignored.\");\n        stream.getTracks().forEach(function(track) {\n            peerConnection.addTrack(track, stream);\n        });\n    };\n    $77f14d3e81888156$export$89e6bb5ad64bf4a.prototype._addStreamToMediaConnection = function(stream, mediaConnection) {\n        $1615705ecc6adca3$exports.default.log(\"add stream \".concat(stream.id, \" to media connection \").concat(mediaConnection.connectionId));\n        mediaConnection.addStream(stream);\n    };\n    return $77f14d3e81888156$export$89e6bb5ad64bf4a;\n}();\n\n\n\nvar $0b3b332fd86c5202$exports = {};\n\n$parcel$export($0b3b332fd86c5202$exports, \"BaseConnection\", () => $0b3b332fd86c5202$export$23a2a68283c24d80, (v) => $0b3b332fd86c5202$export$23a2a68283c24d80 = v);\n\nvar $0b3b332fd86c5202$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $0b3b332fd86c5202$export$23a2a68283c24d80 = /** @class */ function(_super) {\n    $0b3b332fd86c5202$var$__extends($0b3b332fd86c5202$export$23a2a68283c24d80, _super);\n    function $0b3b332fd86c5202$export$23a2a68283c24d80(peer, provider, options) {\n        var _this = _super.call(this) || this;\n        _this.peer = peer;\n        _this.provider = provider;\n        _this.options = options;\n        _this._open = false;\n        _this.metadata = options.metadata;\n        return _this;\n    }\n    Object.defineProperty($0b3b332fd86c5202$export$23a2a68283c24d80.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return $0b3b332fd86c5202$export$23a2a68283c24d80;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $353dee38f9ab557b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $353dee38f9ab557b$var$__assign = undefined && undefined.__assign || function() {\n    $353dee38f9ab557b$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $353dee38f9ab557b$var$__assign.apply(this, arguments);\n};\nvar $353dee38f9ab557b$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps the streaming interface between two Peers.\n */ var $353dee38f9ab557b$export$4a84e95a2324ac29 = /** @class */ function(_super) {\n    $353dee38f9ab557b$var$__extends($353dee38f9ab557b$export$4a84e95a2324ac29, _super);\n    function $353dee38f9ab557b$export$4a84e95a2324ac29(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this._localStream = _this.options._stream;\n        _this.connectionId = _this.options.connectionId || $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        if (_this._localStream) _this._negotiator.startConnection({\n            _stream: _this._localStream,\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Media;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"localStream\", {\n        get: function() {\n            return this._localStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($353dee38f9ab557b$export$4a84e95a2324ac29.prototype, \"remoteStream\", {\n        get: function() {\n            return this._remoteStream;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.addStream = function(remoteStream) {\n        $1615705ecc6adca3$exports.default.log(\"Receiving stream\", remoteStream);\n        this._remoteStream = remoteStream;\n        _super.prototype.emit.call(this, \"stream\", remoteStream); // Should we call this `open`?\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.handleMessage = function(message) {\n        var type = message.type;\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                // Forward to negotiator\n                this._negotiator.handleSDP(type, payload.sdp);\n                this._open = true;\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\".concat(type, \" from peer:\").concat(this.peer));\n                break;\n        }\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.answer = function(stream, options) {\n        var e_1, _a;\n        if (options === void 0) options = {};\n        if (this._localStream) {\n            $1615705ecc6adca3$exports.default.warn(\"Local stream already exists on this MediaConnection. Are you answering a call twice?\");\n            return;\n        }\n        this._localStream = stream;\n        if (options && options.sdpTransform) this.options.sdpTransform = options.sdpTransform;\n        this._negotiator.startConnection($353dee38f9ab557b$var$__assign($353dee38f9ab557b$var$__assign({}, this.options._payload), {\n            _stream: stream\n        }));\n        // Retrieve lost messages stored because PeerConnection not set up.\n        var messages = this.provider._getMessages(this.connectionId);\n        try {\n            for(var messages_1 = $353dee38f9ab557b$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                var message = messages_1_1.value;\n                this.handleMessage(message);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n        this._open = true;\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $353dee38f9ab557b$export$4a84e95a2324ac29.prototype.close = function() {\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        this._localStream = null;\n        this._remoteStream = null;\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.options && this.options._stream) this.options._stream = null;\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    $353dee38f9ab557b$export$4a84e95a2324ac29.ID_PREFIX = \"mc_\";\n    return $353dee38f9ab557b$export$4a84e95a2324ac29;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\nvar $3356170d7bce7f20$exports = {};\n\n$parcel$export($3356170d7bce7f20$exports, \"DataConnection\", () => $3356170d7bce7f20$export$d365f7ad9d7df9c9, (v) => $3356170d7bce7f20$export$d365f7ad9d7df9c9 = v);\n\n\n\n\n\nvar $3014d862dcc9946b$exports = {};\n\n$parcel$export($3014d862dcc9946b$exports, \"EncodingQueue\", () => $3014d862dcc9946b$export$c6913ae0ed687038, (v) => $3014d862dcc9946b$export$c6913ae0ed687038 = v);\n\n\nvar $3014d862dcc9946b$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3014d862dcc9946b$export$c6913ae0ed687038 = /** @class */ function(_super) {\n    $3014d862dcc9946b$var$__extends($3014d862dcc9946b$export$c6913ae0ed687038, _super);\n    function $3014d862dcc9946b$export$c6913ae0ed687038() {\n        var _this = _super.call(this) || this;\n        _this.fileReader = new FileReader();\n        _this._queue = [];\n        _this._processing = false;\n        _this.fileReader.onload = function(evt) {\n            _this._processing = false;\n            if (evt.target) _this.emit(\"done\", evt.target.result);\n            _this.doNextTask();\n        };\n        _this.fileReader.onerror = function(evt) {\n            $1615705ecc6adca3$exports.default.error(\"EncodingQueue error:\", evt);\n            _this._processing = false;\n            _this.destroy();\n            _this.emit(\"error\", evt);\n        };\n        return _this;\n    }\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"queue\", {\n        get: function() {\n            return this._queue;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"size\", {\n        get: function() {\n            return this.queue.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3014d862dcc9946b$export$c6913ae0ed687038.prototype, \"processing\", {\n        get: function() {\n            return this._processing;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.enque = function(blob) {\n        this.queue.push(blob);\n        if (this.processing) return;\n        this.doNextTask();\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.destroy = function() {\n        this.fileReader.abort();\n        this._queue = [];\n    };\n    $3014d862dcc9946b$export$c6913ae0ed687038.prototype.doNextTask = function() {\n        if (this.size === 0) return;\n        if (this.processing) return;\n        this._processing = true;\n        this.fileReader.readAsArrayBuffer(this.queue.shift());\n    };\n    return $3014d862dcc9946b$export$c6913ae0ed687038;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $3356170d7bce7f20$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $3356170d7bce7f20$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n/**\n * Wraps a DataChannel between two Peers.\n */ var $3356170d7bce7f20$export$d365f7ad9d7df9c9 = /** @class */ function(_super) {\n    $3356170d7bce7f20$var$__extends($3356170d7bce7f20$export$d365f7ad9d7df9c9, _super);\n    function $3356170d7bce7f20$export$d365f7ad9d7df9c9(peerId, provider, options) {\n        var _this = _super.call(this, peerId, provider, options) || this;\n        _this.stringify = JSON.stringify;\n        _this.parse = JSON.parse;\n        _this._buffer = [];\n        _this._bufferSize = 0;\n        _this._buffering = false;\n        _this._chunkedData = {};\n        _this._encodingQueue = new $3014d862dcc9946b$exports.EncodingQueue();\n        _this.connectionId = _this.options.connectionId || $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX + $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken();\n        _this.label = _this.options.label || _this.connectionId;\n        _this.serialization = _this.options.serialization || $60fadef21a2daafc$export$89f507cf986a947.Binary;\n        _this.reliable = !!_this.options.reliable;\n        _this._encodingQueue.on(\"done\", function(ab) {\n            _this._bufferedSend(ab);\n        });\n        _this._encodingQueue.on(\"error\", function() {\n            $1615705ecc6adca3$exports.default.error(\"DC#\".concat(_this.connectionId, \": Error occured in encoding from blob to arraybuffer, close DC\"));\n            _this.close();\n        });\n        _this._negotiator = new $77f14d3e81888156$exports.Negotiator(_this);\n        _this._negotiator.startConnection(_this.options._payload || {\n            originator: true\n        });\n        return _this;\n    }\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"type\", {\n        get: function() {\n            return $60fadef21a2daafc$export$3157d57b4135e3bc.Data;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"dataChannel\", {\n        get: function() {\n            return this._dc;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype, \"bufferSize\", {\n        get: function() {\n            return this._bufferSize;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /** Called by the Negotiator when the DataChannel is ready. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.initialize = function(dc) {\n        this._dc = dc;\n        this._configureDataChannel();\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._configureDataChannel = function() {\n        var _this = this;\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob || $06cb531ed7840f78$export$7debb50ef11d5e0b.supports.reliable) this.dataChannel.binaryType = \"arraybuffer\";\n        this.dataChannel.onopen = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc connection success\"));\n            _this._open = true;\n            _this.emit(\"open\");\n        };\n        this.dataChannel.onmessage = function(e) {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc onmessage:\"), e.data);\n            _this._handleDataMessage(e);\n        };\n        this.dataChannel.onclose = function() {\n            $1615705ecc6adca3$exports.default.log(\"DC#\".concat(_this.connectionId, \" dc closed for:\"), _this.peer);\n            _this.close();\n        };\n    };\n    // Handles a DataChannel message.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleDataMessage = function(_a) {\n        var _this = this;\n        var data = _a.data;\n        var datatype = data.constructor;\n        var isBinarySerialization = this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8;\n        var deserializedData = data;\n        if (isBinarySerialization) {\n            if (datatype === Blob) {\n                // Datatype should never be blob\n                $06cb531ed7840f78$export$7debb50ef11d5e0b.blobToArrayBuffer(data, function(ab) {\n                    var unpackedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab);\n                    _this.emit(\"data\", unpackedData);\n                });\n                return;\n            } else if (datatype === ArrayBuffer) deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(data);\n            else if (datatype === String) {\n                // String fallback for binary data for browsers that don't support binary yet\n                var ab1 = $06cb531ed7840f78$export$7debb50ef11d5e0b.binaryStringToArrayBuffer(data);\n                deserializedData = $06cb531ed7840f78$export$7debb50ef11d5e0b.unpack(ab1);\n            }\n        } else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) deserializedData = this.parse(data);\n        // Check if we've chunked--if so, piece things back together.\n        // We're guaranteed that this isn't 0.\n        if (deserializedData.__peerData) {\n            this._handleChunk(deserializedData);\n            return;\n        }\n        _super.prototype.emit.call(this, \"data\", deserializedData);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._handleChunk = function(data) {\n        var id = data.__peerData;\n        var chunkInfo = this._chunkedData[id] || {\n            data: [],\n            count: 0,\n            total: data.total\n        };\n        chunkInfo.data[data.n] = data.data;\n        chunkInfo.count++;\n        this._chunkedData[id] = chunkInfo;\n        if (chunkInfo.total === chunkInfo.count) {\n            // Clean up before making the recursive call to `_handleDataMessage`.\n            delete this._chunkedData[id];\n            // We've received all the chunks--time to construct the complete data.\n            var data_1 = new Blob(chunkInfo.data);\n            this._handleDataMessage({\n                data: data_1\n            });\n        }\n    };\n    /**\n     * Exposed functionality for users.\n     */ /** Allows user to close connection. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.close = function() {\n        this._buffer = [];\n        this._bufferSize = 0;\n        this._chunkedData = {};\n        if (this._negotiator) {\n            this._negotiator.cleanup();\n            this._negotiator = null;\n        }\n        if (this.provider) {\n            this.provider._removeConnection(this);\n            this.provider = null;\n        }\n        if (this.dataChannel) {\n            this.dataChannel.onopen = null;\n            this.dataChannel.onmessage = null;\n            this.dataChannel.onclose = null;\n            this._dc = null;\n        }\n        if (this._encodingQueue) {\n            this._encodingQueue.destroy();\n            this._encodingQueue.removeAllListeners();\n            this._encodingQueue = null;\n        }\n        if (!this.open) return;\n        this._open = false;\n        _super.prototype.emit.call(this, \"close\");\n    };\n    /** Allows user to send data. */ $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.send = function(data, chunked) {\n        if (!this.open) {\n            _super.prototype.emit.call(this, \"error\", new Error(\"Connection is not open. You should listen for the `open` event before sending messages.\"));\n            return;\n        }\n        if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.JSON) this._bufferedSend(this.stringify(data));\n        else if (this.serialization === $60fadef21a2daafc$export$89f507cf986a947.Binary || this.serialization === $60fadef21a2daafc$export$89f507cf986a947.BinaryUTF8) {\n            var blob = $06cb531ed7840f78$export$7debb50ef11d5e0b.pack(data);\n            if (!chunked && blob.size > $06cb531ed7840f78$export$7debb50ef11d5e0b.chunkedMTU) {\n                this._sendChunks(blob);\n                return;\n            }\n            if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.binaryBlob) // We only do this if we really need to (e.g. blobs are not supported),\n            // because this conversion is costly.\n            this._encodingQueue.enque(blob);\n            else this._bufferedSend(blob);\n        } else this._bufferedSend(data);\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._bufferedSend = function(msg) {\n        if (this._buffering || !this._trySend(msg)) {\n            this._buffer.push(msg);\n            this._bufferSize = this._buffer.length;\n        }\n    };\n    // Returns true if the send succeeds.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._trySend = function(msg) {\n        var _this = this;\n        if (!this.open) return false;\n        if (this.dataChannel.bufferedAmount > $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT) {\n            this._buffering = true;\n            setTimeout(function() {\n                _this._buffering = false;\n                _this._tryBuffer();\n            }, 50);\n            return false;\n        }\n        try {\n            this.dataChannel.send(msg);\n        } catch (e) {\n            $1615705ecc6adca3$exports.default.error(\"DC#:\".concat(this.connectionId, \" Error when sending:\"), e);\n            this._buffering = true;\n            this.close();\n            return false;\n        }\n        return true;\n    };\n    // Try to send the first message in the buffer.\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._tryBuffer = function() {\n        if (!this.open) return;\n        if (this._buffer.length === 0) return;\n        var msg = this._buffer[0];\n        if (this._trySend(msg)) {\n            this._buffer.shift();\n            this._bufferSize = this._buffer.length;\n            this._tryBuffer();\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype._sendChunks = function(blob) {\n        var e_1, _a;\n        var blobs = $06cb531ed7840f78$export$7debb50ef11d5e0b.chunk(blob);\n        $1615705ecc6adca3$exports.default.log(\"DC#\".concat(this.connectionId, \" Try to send \").concat(blobs.length, \" chunks...\"));\n        try {\n            for(var blobs_1 = $3356170d7bce7f20$var$__values(blobs), blobs_1_1 = blobs_1.next(); !blobs_1_1.done; blobs_1_1 = blobs_1.next()){\n                var blob_1 = blobs_1_1.value;\n                this.send(blob_1, true);\n            }\n        } catch (e_1_1) {\n            e_1 = {\n                error: e_1_1\n            };\n        } finally{\n            try {\n                if (blobs_1_1 && !blobs_1_1.done && (_a = blobs_1.return)) _a.call(blobs_1);\n            } finally{\n                if (e_1) throw e_1.error;\n            }\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.prototype.handleMessage = function(message) {\n        var payload = message.payload;\n        switch(message.type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Answer:\n                this._negotiator.handleSDP(message.type, payload.sdp);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Candidate:\n                this._negotiator.handleCandidate(payload.candidate);\n                break;\n            default:\n                $1615705ecc6adca3$exports.default.warn(\"Unrecognized message type:\", message.type, \"from peer:\", this.peer);\n                break;\n        }\n    };\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.ID_PREFIX = \"dc_\";\n    $3356170d7bce7f20$export$d365f7ad9d7df9c9.MAX_BUFFERED_AMOUNT = 8388608;\n    return $3356170d7bce7f20$export$d365f7ad9d7df9c9;\n}($0b3b332fd86c5202$exports.BaseConnection);\n\n\n\nvar $9e85b3e1327369e6$exports = {};\n\n$parcel$export($9e85b3e1327369e6$exports, \"API\", () => $9e85b3e1327369e6$export$2c4e825dc9120f87, (v) => $9e85b3e1327369e6$export$2c4e825dc9120f87 = v);\n\n\n\nvar $9e85b3e1327369e6$var$__awaiter = undefined && undefined.__awaiter || function(thisArg, _arguments, P, generator) {\n    function adopt(value) {\n        return value instanceof P ? value : new P(function(resolve) {\n            resolve(value);\n        });\n    }\n    return new (P || (P = Promise))(function(resolve, reject) {\n        function fulfilled(value) {\n            try {\n                step(generator.next(value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function rejected(value) {\n            try {\n                step(generator[\"throw\"](value));\n            } catch (e) {\n                reject(e);\n            }\n        }\n        function step(result) {\n            result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n        }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar $9e85b3e1327369e6$var$__generator = undefined && undefined.__generator || function(thisArg, body) {\n    var _ = {\n        label: 0,\n        sent: function() {\n            if (t[0] & 1) throw t[1];\n            return t[1];\n        },\n        trys: [],\n        ops: []\n    }, f, y, t, g;\n    return g = {\n        next: verb(0),\n        \"throw\": verb(1),\n        \"return\": verb(2)\n    }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() {\n        return this;\n    }), g;\n    function verb(n) {\n        return function(v) {\n            return step([\n                n,\n                v\n            ]);\n        };\n    }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while(_)try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [\n                op[0] & 2,\n                t.value\n            ];\n            switch(op[0]){\n                case 0:\n                case 1:\n                    t = op;\n                    break;\n                case 4:\n                    _.label++;\n                    return {\n                        value: op[1],\n                        done: false\n                    };\n                case 5:\n                    _.label++;\n                    y = op[1];\n                    op = [\n                        0\n                    ];\n                    continue;\n                case 7:\n                    op = _.ops.pop();\n                    _.trys.pop();\n                    continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                        _ = 0;\n                        continue;\n                    }\n                    if (op[0] === 3 && (!t || op[1] > t[0] && op[1] < t[3])) {\n                        _.label = op[1];\n                        break;\n                    }\n                    if (op[0] === 6 && _.label < t[1]) {\n                        _.label = t[1];\n                        t = op;\n                        break;\n                    }\n                    if (t && _.label < t[2]) {\n                        _.label = t[2];\n                        _.ops.push(op);\n                        break;\n                    }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop();\n                    continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) {\n            op = [\n                6,\n                e\n            ];\n            y = 0;\n        } finally{\n            f = t = 0;\n        }\n        if (op[0] & 5) throw op[1];\n        return {\n            value: op[0] ? op[1] : void 0,\n            done: true\n        };\n    }\n};\nvar $9e85b3e1327369e6$export$2c4e825dc9120f87 = /** @class */ function() {\n    function $9e85b3e1327369e6$export$2c4e825dc9120f87(_options) {\n        this._options = _options;\n    }\n    $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype._buildRequest = function(method) {\n        var protocol = this._options.secure ? \"https\" : \"http\";\n        var _a = this._options, host = _a.host, port = _a.port, path = _a.path, key = _a.key;\n        var url = new URL(\"\".concat(protocol, \"://\").concat(host, \":\").concat(port).concat(path).concat(key, \"/\").concat(method));\n        // TODO: Why timestamp, why random?\n        url.searchParams.set(\"ts\", \"\".concat(Date.now()).concat(Math.random()));\n        url.searchParams.set(\"version\", $0d1ed891c5cb27c0$exports.version);\n        return fetch(url.href, {\n            referrerPolicy: this._options.referrerPolicy\n        });\n    };\n    /** Get a unique ID from the server via XHR and initialize with it. */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.retrieveId = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, error_1, pathError;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"id\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) throw new Error(\"Error. Status:\".concat(response.status));\n                        return [\n                            2 /*return*/ ,\n                            response.text()\n                        ];\n                    case 2:\n                        error_1 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving ID\", error_1);\n                        pathError = \"\";\n                        if (this._options.path === \"/\" && this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) pathError = \" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer.\";\n                        throw new Error(\"Could not get an ID from the server.\" + pathError);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    /** @deprecated */ $9e85b3e1327369e6$export$2c4e825dc9120f87.prototype.listAllPeers = function() {\n        return $9e85b3e1327369e6$var$__awaiter(this, void 0, Promise, function() {\n            var response, helpfulError, error_2;\n            return $9e85b3e1327369e6$var$__generator(this, function(_a) {\n                switch(_a.label){\n                    case 0:\n                        _a.trys.push([\n                            0,\n                            2,\n                            ,\n                            3\n                        ]);\n                        return [\n                            4 /*yield*/ ,\n                            this._buildRequest(\"peers\")\n                        ];\n                    case 1:\n                        response = _a.sent();\n                        if (response.status !== 200) {\n                            if (response.status === 401) {\n                                helpfulError = \"\";\n                                if (this._options.host === $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) helpfulError = \"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.\";\n                                else helpfulError = \"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.\";\n                                throw new Error(\"It doesn't look like you have permission to list peers IDs. \" + helpfulError);\n                            }\n                            throw new Error(\"Error. Status:\".concat(response.status));\n                        }\n                        return [\n                            2 /*return*/ ,\n                            response.json()\n                        ];\n                    case 2:\n                        error_2 = _a.sent();\n                        $1615705ecc6adca3$exports.default.error(\"Error retrieving list peers\", error_2);\n                        throw new Error(\"Could not get list peers from the server.\" + error_2);\n                    case 3:\n                        return [\n                            2 /*return*/ \n                        ];\n                }\n            });\n        });\n    };\n    return $9e85b3e1327369e6$export$2c4e825dc9120f87;\n}();\n\n\nvar $26088d7da5b03f69$var$__extends = undefined && undefined.__extends || function() {\n    var extendStatics = function(d1, b1) {\n        extendStatics = Object.setPrototypeOf || ({\n            __proto__: []\n        }) instanceof Array && function(d, b) {\n            d.__proto__ = b;\n        } || function(d, b) {\n            for(var p in b)if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p];\n        };\n        return extendStatics(d1, b1);\n    };\n    return function(d, b) {\n        if (typeof b !== \"function\" && b !== null) throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() {\n            this.constructor = d;\n        }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n}();\nvar $26088d7da5b03f69$var$__assign = undefined && undefined.__assign || function() {\n    $26088d7da5b03f69$var$__assign = Object.assign || function(t) {\n        for(var s, i = 1, n = arguments.length; i < n; i++){\n            s = arguments[i];\n            for(var p in s)if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n        }\n        return t;\n    };\n    return $26088d7da5b03f69$var$__assign.apply(this, arguments);\n};\nvar $26088d7da5b03f69$var$__values = undefined && undefined.__values || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function() {\n            if (o && i >= o.length) o = void 0;\n            return {\n                value: o && o[i++],\n                done: !o\n            };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar $26088d7da5b03f69$var$__read = undefined && undefined.__read || function(o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while((n === void 0 || n-- > 0) && !(r = i.next()).done)ar.push(r.value);\n    } catch (error) {\n        e = {\n            error: error\n        };\n    } finally{\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        } finally{\n            if (e) throw e.error;\n        }\n    }\n    return ar;\n};\nvar $26088d7da5b03f69$var$PeerOptions = /** @class */ function() {\n    function PeerOptions() {}\n    return PeerOptions;\n}();\n/**\n * A peer who can initiate connections with other peers.\n */ var $26088d7da5b03f69$export$ecd1fc136c422448 = /** @class */ function(_super) {\n    $26088d7da5b03f69$var$__extends($26088d7da5b03f69$export$ecd1fc136c422448, _super);\n    function $26088d7da5b03f69$export$ecd1fc136c422448(id1, options) {\n        var _this = _super.call(this) || this;\n        _this._id = null;\n        _this._lastServerId = null;\n        // States.\n        _this._destroyed = false; // Connections have been killed\n        _this._disconnected = false; // Connection to PeerServer killed but P2P connections still active\n        _this._open = false; // Sockets and such are not yet open.\n        _this._connections = new Map(); // All connections for this peer.\n        _this._lostMessages = new Map(); // src => [list of messages]\n        var userId;\n        // Deal with overloading\n        if (id1 && id1.constructor == Object) options = id1;\n        else if (id1) userId = id1.toString();\n        // Configurize options\n        options = $26088d7da5b03f69$var$__assign({\n            debug: 0,\n            host: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST,\n            port: $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_PORT,\n            path: \"/\",\n            key: $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY,\n            token: $06cb531ed7840f78$export$7debb50ef11d5e0b.randomToken(),\n            config: $06cb531ed7840f78$export$7debb50ef11d5e0b.defaultConfig,\n            referrerPolicy: \"strict-origin-when-cross-origin\"\n        }, options);\n        _this._options = options;\n        // Detect relative URL host.\n        if (_this._options.host === \"/\") _this._options.host = window.location.hostname;\n        // Set path correctly.\n        if (_this._options.path) {\n            if (_this._options.path[0] !== \"/\") _this._options.path = \"/\" + _this._options.path;\n            if (_this._options.path[_this._options.path.length - 1] !== \"/\") _this._options.path += \"/\";\n        }\n        // Set whether we use SSL to same as current host\n        if (_this._options.secure === undefined && _this._options.host !== $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = $06cb531ed7840f78$export$7debb50ef11d5e0b.isSecure();\n        else if (_this._options.host == $06cb531ed7840f78$export$7debb50ef11d5e0b.CLOUD_HOST) _this._options.secure = true;\n        // Set a custom log function if present\n        if (_this._options.logFunction) $1615705ecc6adca3$exports.default.setLogFunction(_this._options.logFunction);\n        $1615705ecc6adca3$exports.default.logLevel = _this._options.debug || 0;\n        _this._api = new $9e85b3e1327369e6$exports.API(options);\n        _this._socket = _this._createServerConnection();\n        // Sanity checks\n        // Ensure WebRTC supported\n        if (!$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.audioVideo && !$06cb531ed7840f78$export$7debb50ef11d5e0b.supports.data) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.BrowserIncompatible, \"The current browser does not support WebRTC\");\n            return _this;\n        }\n        // Ensure alphanumeric id\n        if (!!userId && !$06cb531ed7840f78$export$7debb50ef11d5e0b.validateId(userId)) {\n            _this._delayedAbort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidID, \"ID \\\"\".concat(userId, \"\\\" is invalid\"));\n            return _this;\n        }\n        if (userId) _this._initialize(userId);\n        else _this._api.retrieveId().then(function(id) {\n            return _this._initialize(id);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n        return _this;\n    }\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"id\", {\n        /**\n         * The brokering ID of this peer\n         */ get: function() {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"options\", {\n        get: function() {\n            return this._options;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"open\", {\n        get: function() {\n            return this._open;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"socket\", {\n        get: function() {\n            return this._socket;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"connections\", {\n        /**\n         * A hash of all connections associated with this peer, keyed by the remote peer's ID.\n         * @deprecated\n         * Return type will change from Object to Map<string,[]>\n         */ get: function() {\n            var e_1, _a;\n            var plainConnections = Object.create(null);\n            try {\n                for(var _b = $26088d7da5b03f69$var$__values(this._connections), _c = _b.next(); !_c.done; _c = _b.next()){\n                    var _d = $26088d7da5b03f69$var$__read(_c.value, 2), k = _d[0], v = _d[1];\n                    plainConnections[k] = v;\n                }\n            } catch (e_1_1) {\n                e_1 = {\n                    error: e_1_1\n                };\n            } finally{\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                } finally{\n                    if (e_1) throw e_1.error;\n                }\n            }\n            return plainConnections;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"destroyed\", {\n        /**\n         * true if this peer and all of its connections can no longer be used.\n         */ get: function() {\n            return this._destroyed;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty($26088d7da5b03f69$export$ecd1fc136c422448.prototype, \"disconnected\", {\n        /**\n         * false if there is an active connection to the PeerServer.\n         */ get: function() {\n            return this._disconnected;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._createServerConnection = function() {\n        var _this = this;\n        var socket = new $31d11a8d122cb4b7$exports.Socket(this._options.secure, this._options.host, this._options.port, this._options.path, this._options.key, this._options.pingInterval);\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Message, function(data) {\n            _this._handleMessage(data);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Error, function(error) {\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketError, error);\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Disconnected, function() {\n            if (_this.disconnected) return;\n            _this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Network, \"Lost connection to server.\");\n            _this.disconnect();\n        });\n        socket.on($60fadef21a2daafc$export$3b5c4a4b6354f023.Close, function() {\n            if (_this.disconnected) return;\n            _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.SocketClosed, \"Underlying socket is already closed.\");\n        });\n        return socket;\n    };\n    /** Initialize a connection with the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._initialize = function(id) {\n        this._id = id;\n        this.socket.start(id, this._options.token);\n    };\n    /** Handles messages from the server. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._handleMessage = function(message) {\n        var e_2, _a;\n        var type = message.type;\n        var payload = message.payload;\n        var peerId = message.src;\n        switch(type){\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Open:\n                this._lastServerId = this.id;\n                this._open = true;\n                this.emit(\"open\", this.id);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Error:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, payload.msg);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.IdTaken:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.UnavailableID, \"ID \\\"\".concat(this.id, \"\\\" is taken\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.InvalidKey:\n                this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.InvalidKey, \"API KEY \\\"\".concat(this._options.key, \"\\\" is invalid\"));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Leave:\n                $1615705ecc6adca3$exports.default.log(\"Received leave message from \".concat(peerId));\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Expire:\n                this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.PeerUnavailable, \"Could not connect to peer \".concat(peerId));\n                break;\n            case $60fadef21a2daafc$export$adb4a1754da6f10d.Offer:\n                // we should consider switching this to CALL/CONNECT, but this is the least breaking option.\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection) {\n                    connection.close();\n                    $1615705ecc6adca3$exports.default.warn(\"Offer received for existing Connection ID:\".concat(connectionId));\n                }\n                // Create a new connection.\n                if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Media) {\n                    var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata\n                    });\n                    connection = mediaConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"call\", mediaConnection);\n                } else if (payload.type === $60fadef21a2daafc$export$3157d57b4135e3bc.Data) {\n                    var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peerId, this, {\n                        connectionId: connectionId,\n                        _payload: payload,\n                        metadata: payload.metadata,\n                        label: payload.label,\n                        serialization: payload.serialization,\n                        reliable: payload.reliable\n                    });\n                    connection = dataConnection;\n                    this._addConnection(peerId, connection);\n                    this.emit(\"connection\", dataConnection);\n                } else {\n                    $1615705ecc6adca3$exports.default.warn(\"Received malformed connection type:\".concat(payload.type));\n                    return;\n                }\n                // Find messages.\n                var messages = this._getMessages(connectionId);\n                try {\n                    for(var messages_1 = $26088d7da5b03f69$var$__values(messages), messages_1_1 = messages_1.next(); !messages_1_1.done; messages_1_1 = messages_1.next()){\n                        var message_1 = messages_1_1.value;\n                        connection.handleMessage(message_1);\n                    }\n                } catch (e_2_1) {\n                    e_2 = {\n                        error: e_2_1\n                    };\n                } finally{\n                    try {\n                        if (messages_1_1 && !messages_1_1.done && (_a = messages_1.return)) _a.call(messages_1);\n                    } finally{\n                        if (e_2) throw e_2.error;\n                    }\n                }\n                break;\n            default:\n                if (!payload) {\n                    $1615705ecc6adca3$exports.default.warn(\"You received a malformed message from \".concat(peerId, \" of type \").concat(type));\n                    return;\n                }\n                var connectionId = payload.connectionId;\n                var connection = this.getConnection(peerId, connectionId);\n                if (connection && connection.peerConnection) // Pass it on.\n                connection.handleMessage(message);\n                else if (connectionId) // Store for possible later use\n                this._storeMessage(connectionId, message);\n                else $1615705ecc6adca3$exports.default.warn(\"You received an unrecognized message:\", message);\n                break;\n        }\n    };\n    /** Stores messages without a set up connection, to be claimed later. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._storeMessage = function(connectionId, message) {\n        if (!this._lostMessages.has(connectionId)) this._lostMessages.set(connectionId, []);\n        this._lostMessages.get(connectionId).push(message);\n    };\n    /** Retrieve messages from lost message store */ //TODO Change it to private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._getMessages = function(connectionId) {\n        var messages = this._lostMessages.get(connectionId);\n        if (messages) {\n            this._lostMessages.delete(connectionId);\n            return messages;\n        }\n        return [];\n    };\n    /**\n     * Connects to the remote peer specified by id and returns a data connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param options for specifying details about Peer Connection\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.connect = function(peer, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        var dataConnection = new $3356170d7bce7f20$exports.DataConnection(peer, this, options);\n        this._addConnection(peer, dataConnection);\n        return dataConnection;\n    };\n    /**\n     * Calls the remote peer specified by id and returns a media connection.\n     * @param peer The brokering ID of the remote peer (their peer.id).\n     * @param stream The caller's media stream\n     * @param options Metadata associated with the connection, passed in by whoever initiated the connection.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.call = function(peer, stream, options) {\n        if (options === void 0) options = {};\n        if (this.disconnected) {\n            $1615705ecc6adca3$exports.default.warn(\"You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect.\");\n            this.emitError($60fadef21a2daafc$export$9547aaa2e39030ff.Disconnected, \"Cannot connect to new Peer after disconnecting from server.\");\n            return;\n        }\n        if (!stream) {\n            $1615705ecc6adca3$exports.default.error(\"To call a peer, you must provide a stream from your browser's `getUserMedia`.\");\n            return;\n        }\n        var mediaConnection = new $353dee38f9ab557b$exports.MediaConnection(peer, this, $26088d7da5b03f69$var$__assign($26088d7da5b03f69$var$__assign({}, options), {\n            _stream: stream\n        }));\n        this._addConnection(peer, mediaConnection);\n        return mediaConnection;\n    };\n    /** Add a data/media connection to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._addConnection = function(peerId, connection) {\n        $1615705ecc6adca3$exports.default.log(\"add connection \".concat(connection.type, \":\").concat(connection.connectionId, \" to peerId:\").concat(peerId));\n        if (!this._connections.has(peerId)) this._connections.set(peerId, []);\n        this._connections.get(peerId).push(connection);\n    };\n    //TODO should be private\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._removeConnection = function(connection) {\n        var connections = this._connections.get(connection.peer);\n        if (connections) {\n            var index = connections.indexOf(connection);\n            if (index !== -1) connections.splice(index, 1);\n        }\n        //remove from lost messages\n        this._lostMessages.delete(connection.connectionId);\n    };\n    /** Retrieve a data/media connection for this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.getConnection = function(peerId, connectionId) {\n        var e_3, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return null;\n        try {\n            for(var connections_1 = $26088d7da5b03f69$var$__values(connections), connections_1_1 = connections_1.next(); !connections_1_1.done; connections_1_1 = connections_1.next()){\n                var connection = connections_1_1.value;\n                if (connection.connectionId === connectionId) return connection;\n            }\n        } catch (e_3_1) {\n            e_3 = {\n                error: e_3_1\n            };\n        } finally{\n            try {\n                if (connections_1_1 && !connections_1_1.done && (_a = connections_1.return)) _a.call(connections_1);\n            } finally{\n                if (e_3) throw e_3.error;\n            }\n        }\n        return null;\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.prototype._delayedAbort = function(type, message) {\n        var _this = this;\n        setTimeout(function() {\n            _this._abort(type, message);\n        }, 0);\n    };\n    /**\n     * Emits an error message and destroys the Peer.\n     * The Peer is not destroyed if it's in a disconnected state, in which case\n     * it retains its disconnected state and its existing connections.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._abort = function(type, message) {\n        $1615705ecc6adca3$exports.default.error(\"Aborting!\");\n        this.emitError(type, message);\n        if (!this._lastServerId) this.destroy();\n        else this.disconnect();\n    };\n    /** Emits a typed error message. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.emitError = function(type, err) {\n        $1615705ecc6adca3$exports.default.error(\"Error:\", err);\n        var error;\n        if (typeof err === \"string\") error = new Error(err);\n        else error = err;\n        error.type = type;\n        this.emit(\"error\", error);\n    };\n    /**\n     * Destroys the Peer: closes all active connections as well as the connection\n     *  to the server.\n     * Warning: The peer can no longer create or accept connections after being\n     *  destroyed.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.destroy = function() {\n        if (this.destroyed) return;\n        $1615705ecc6adca3$exports.default.log(\"Destroy peer with ID:\".concat(this.id));\n        this.disconnect();\n        this._cleanup();\n        this._destroyed = true;\n        this.emit(\"close\");\n    };\n    /** Disconnects every connection on this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanup = function() {\n        var e_4, _a;\n        try {\n            for(var _b = $26088d7da5b03f69$var$__values(this._connections.keys()), _c = _b.next(); !_c.done; _c = _b.next()){\n                var peerId = _c.value;\n                this._cleanupPeer(peerId);\n                this._connections.delete(peerId);\n            }\n        } catch (e_4_1) {\n            e_4 = {\n                error: e_4_1\n            };\n        } finally{\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            } finally{\n                if (e_4) throw e_4.error;\n            }\n        }\n        this.socket.removeAllListeners();\n    };\n    /** Closes all connections to this peer. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype._cleanupPeer = function(peerId) {\n        var e_5, _a;\n        var connections = this._connections.get(peerId);\n        if (!connections) return;\n        try {\n            for(var connections_2 = $26088d7da5b03f69$var$__values(connections), connections_2_1 = connections_2.next(); !connections_2_1.done; connections_2_1 = connections_2.next()){\n                var connection = connections_2_1.value;\n                connection.close();\n            }\n        } catch (e_5_1) {\n            e_5 = {\n                error: e_5_1\n            };\n        } finally{\n            try {\n                if (connections_2_1 && !connections_2_1.done && (_a = connections_2.return)) _a.call(connections_2);\n            } finally{\n                if (e_5) throw e_5.error;\n            }\n        }\n    };\n    /**\n     * Disconnects the Peer's connection to the PeerServer. Does not close any\n     *  active connections.\n     * Warning: The peer can no longer create or accept connections after being\n     *  disconnected. It also cannot reconnect to the server.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.disconnect = function() {\n        if (this.disconnected) return;\n        var currentId = this.id;\n        $1615705ecc6adca3$exports.default.log(\"Disconnect peer with ID:\".concat(currentId));\n        this._disconnected = true;\n        this._open = false;\n        this.socket.close();\n        this._lastServerId = currentId;\n        this._id = null;\n        this.emit(\"disconnected\", currentId);\n    };\n    /** Attempts to reconnect with the same ID. */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.reconnect = function() {\n        if (this.disconnected && !this.destroyed) {\n            $1615705ecc6adca3$exports.default.log(\"Attempting reconnection to server with ID \".concat(this._lastServerId));\n            this._disconnected = false;\n            this._initialize(this._lastServerId);\n        } else if (this.destroyed) throw new Error(\"This peer cannot reconnect to the server. It has already been destroyed.\");\n        else if (!this.disconnected && !this.open) // Do nothing. We're still connecting the first time.\n        $1615705ecc6adca3$exports.default.error(\"In a hurry? We're still trying to make the initial connection!\");\n        else throw new Error(\"Peer \".concat(this.id, \" cannot reconnect because it is not disconnected from the server!\"));\n    };\n    /**\n     * Get a list of available peer IDs. If you're running your own server, you'll\n     * want to set allow_discovery: true in the PeerServer options. If you're using\n     * the cloud server, email team@peerjs.com to get the functionality enabled for\n     * your key.\n     */ $26088d7da5b03f69$export$ecd1fc136c422448.prototype.listAllPeers = function(cb) {\n        var _this = this;\n        if (cb === void 0) cb = function(_) {};\n        this._api.listAllPeers().then(function(peers) {\n            return cb(peers);\n        }).catch(function(error) {\n            return _this._abort($60fadef21a2daafc$export$9547aaa2e39030ff.ServerError, error);\n        });\n    };\n    $26088d7da5b03f69$export$ecd1fc136c422448.DEFAULT_KEY = \"peerjs\";\n    return $26088d7da5b03f69$export$ecd1fc136c422448;\n}($ac9b757d51178e15$exports.EventEmitter);\n\n\nvar $70d766613f57b014$export$2e2bcd8739ae039 = $26088d7da5b03f69$exports.Peer;\n\n\nexport {$70d766613f57b014$export$2e2bcd8739ae039 as default, $26088d7da5b03f69$export$ecd1fc136c422448 as Peer, $06cb531ed7840f78$export$7debb50ef11d5e0b as util};\n","/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\nexport function Backoff(opts) {\n    opts = opts || {};\n    this.ms = opts.min || 100;\n    this.max = opts.max || 10000;\n    this.factor = opts.factor || 2;\n    this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n    this.attempts = 0;\n}\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\nBackoff.prototype.duration = function () {\n    var ms = this.ms * Math.pow(this.factor, this.attempts++);\n    if (this.jitter) {\n        var rand = Math.random();\n        var deviation = Math.floor(rand * this.jitter * ms);\n        ms = (Math.floor(rand * 10) & 1) == 0 ? ms - deviation : ms + deviation;\n    }\n    return Math.min(ms, this.max) | 0;\n};\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\nBackoff.prototype.reset = function () {\n    this.attempts = 0;\n};\n/**\n * Set the minimum duration\n *\n * @api public\n */\nBackoff.prototype.setMin = function (min) {\n    this.ms = min;\n};\n/**\n * Set the maximum duration\n *\n * @api public\n */\nBackoff.prototype.setMax = function (max) {\n    this.max = max;\n};\n/**\n * Set the jitter\n *\n * @api public\n */\nBackoff.prototype.setJitter = function (jitter) {\n    this.jitter = jitter;\n};\n","import { url } from \"./url.js\";\nimport { Manager } from \"./manager.js\";\nimport { Socket } from \"./socket.js\";\n/**\n * Managers cache.\n */\nconst cache = {};\nfunction lookup(uri, opts) {\n    if (typeof uri === \"object\") {\n        opts = uri;\n        uri = undefined;\n    }\n    opts = opts || {};\n    const parsed = url(uri, opts.path || \"/socket.io\");\n    const source = parsed.source;\n    const id = parsed.id;\n    const path = parsed.path;\n    const sameNamespace = cache[id] && path in cache[id][\"nsps\"];\n    const newConnection = opts.forceNew ||\n        opts[\"force new connection\"] ||\n        false === opts.multiplex ||\n        sameNamespace;\n    let io;\n    if (newConnection) {\n        io = new Manager(source, opts);\n    }\n    else {\n        if (!cache[id]) {\n            cache[id] = new Manager(source, opts);\n        }\n        io = cache[id];\n    }\n    if (parsed.query && !opts.query) {\n        opts.query = parsed.queryKey;\n    }\n    return io.socket(parsed.path, opts);\n}\n// so that \"lookup\" can be used both as a function (e.g. `io(...)`) and as a\n// namespace (e.g. `io.connect(...)`), for backward compatibility\nObject.assign(lookup, {\n    Manager,\n    Socket,\n    io: lookup,\n    connect: lookup,\n});\n/**\n * Protocol version.\n *\n * @public\n */\nexport { protocol } from \"socket.io-parser\";\n/**\n * Expose constructors for standalone build.\n *\n * @public\n */\nexport { Manager, Socket, lookup as io, lookup as connect, lookup as default, };\n","import { Socket as Engine, installTimerFunctions, nextTick, } from \"engine.io-client\";\nimport { Socket } from \"./socket.js\";\nimport * as parser from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Backoff } from \"./contrib/backo2.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\nexport class Manager extends Emitter {\n    constructor(uri, opts) {\n        var _a;\n        super();\n        this.nsps = {};\n        this.subs = [];\n        if (uri && \"object\" === typeof uri) {\n            opts = uri;\n            uri = undefined;\n        }\n        opts = opts || {};\n        opts.path = opts.path || \"/socket.io\";\n        this.opts = opts;\n        installTimerFunctions(this, opts);\n        this.reconnection(opts.reconnection !== false);\n        this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n        this.reconnectionDelay(opts.reconnectionDelay || 1000);\n        this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n        this.randomizationFactor((_a = opts.randomizationFactor) !== null && _a !== void 0 ? _a : 0.5);\n        this.backoff = new Backoff({\n            min: this.reconnectionDelay(),\n            max: this.reconnectionDelayMax(),\n            jitter: this.randomizationFactor(),\n        });\n        this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n        this._readyState = \"closed\";\n        this.uri = uri;\n        const _parser = opts.parser || parser;\n        this.encoder = new _parser.Encoder();\n        this.decoder = new _parser.Decoder();\n        this._autoConnect = opts.autoConnect !== false;\n        if (this._autoConnect)\n            this.open();\n    }\n    reconnection(v) {\n        if (!arguments.length)\n            return this._reconnection;\n        this._reconnection = !!v;\n        return this;\n    }\n    reconnectionAttempts(v) {\n        if (v === undefined)\n            return this._reconnectionAttempts;\n        this._reconnectionAttempts = v;\n        return this;\n    }\n    reconnectionDelay(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelay;\n        this._reconnectionDelay = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMin(v);\n        return this;\n    }\n    randomizationFactor(v) {\n        var _a;\n        if (v === undefined)\n            return this._randomizationFactor;\n        this._randomizationFactor = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setJitter(v);\n        return this;\n    }\n    reconnectionDelayMax(v) {\n        var _a;\n        if (v === undefined)\n            return this._reconnectionDelayMax;\n        this._reconnectionDelayMax = v;\n        (_a = this.backoff) === null || _a === void 0 ? void 0 : _a.setMax(v);\n        return this;\n    }\n    timeout(v) {\n        if (!arguments.length)\n            return this._timeout;\n        this._timeout = v;\n        return this;\n    }\n    /**\n     * Starts trying to reconnect if reconnection is enabled and we have not\n     * started reconnecting yet\n     *\n     * @private\n     */\n    maybeReconnectOnOpen() {\n        // Only try to reconnect if it's the first time we're connecting\n        if (!this._reconnecting &&\n            this._reconnection &&\n            this.backoff.attempts === 0) {\n            // keeps reconnection from firing twice for the same reconnection loop\n            this.reconnect();\n        }\n    }\n    /**\n     * Sets the current transport `socket`.\n     *\n     * @param {Function} fn - optional, callback\n     * @return self\n     * @public\n     */\n    open(fn) {\n        if (~this._readyState.indexOf(\"open\"))\n            return this;\n        this.engine = new Engine(this.uri, this.opts);\n        const socket = this.engine;\n        const self = this;\n        this._readyState = \"opening\";\n        this.skipReconnect = false;\n        // emit `open`\n        const openSubDestroy = on(socket, \"open\", function () {\n            self.onopen();\n            fn && fn();\n        });\n        const onError = (err) => {\n            this.cleanup();\n            this._readyState = \"closed\";\n            this.emitReserved(\"error\", err);\n            if (fn) {\n                fn(err);\n            }\n            else {\n                // Only do this if there is no fn to handle the error\n                this.maybeReconnectOnOpen();\n            }\n        };\n        // emit `error`\n        const errorSub = on(socket, \"error\", onError);\n        if (false !== this._timeout) {\n            const timeout = this._timeout;\n            // set timer\n            const timer = this.setTimeoutFn(() => {\n                openSubDestroy();\n                onError(new Error(\"timeout\"));\n                socket.close();\n            }, timeout);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n        this.subs.push(openSubDestroy);\n        this.subs.push(errorSub);\n        return this;\n    }\n    /**\n     * Alias for open()\n     *\n     * @return self\n     * @public\n     */\n    connect(fn) {\n        return this.open(fn);\n    }\n    /**\n     * Called upon transport open.\n     *\n     * @private\n     */\n    onopen() {\n        // clear old subs\n        this.cleanup();\n        // mark as open\n        this._readyState = \"open\";\n        this.emitReserved(\"open\");\n        // add new subs\n        const socket = this.engine;\n        this.subs.push(on(socket, \"ping\", this.onping.bind(this)), on(socket, \"data\", this.ondata.bind(this)), on(socket, \"error\", this.onerror.bind(this)), on(socket, \"close\", this.onclose.bind(this)), on(this.decoder, \"decoded\", this.ondecoded.bind(this)));\n    }\n    /**\n     * Called upon a ping.\n     *\n     * @private\n     */\n    onping() {\n        this.emitReserved(\"ping\");\n    }\n    /**\n     * Called with data.\n     *\n     * @private\n     */\n    ondata(data) {\n        try {\n            this.decoder.add(data);\n        }\n        catch (e) {\n            this.onclose(\"parse error\", e);\n        }\n    }\n    /**\n     * Called when parser fully decodes a packet.\n     *\n     * @private\n     */\n    ondecoded(packet) {\n        // the nextTick call prevents an exception in a user-provided event listener from triggering a disconnection due to a \"parse error\"\n        nextTick(() => {\n            this.emitReserved(\"packet\", packet);\n        }, this.setTimeoutFn);\n    }\n    /**\n     * Called upon socket error.\n     *\n     * @private\n     */\n    onerror(err) {\n        this.emitReserved(\"error\", err);\n    }\n    /**\n     * Creates a new socket for the given `nsp`.\n     *\n     * @return {Socket}\n     * @public\n     */\n    socket(nsp, opts) {\n        let socket = this.nsps[nsp];\n        if (!socket) {\n            socket = new Socket(this, nsp, opts);\n            this.nsps[nsp] = socket;\n        }\n        else if (this._autoConnect && !socket.active) {\n            socket.connect();\n        }\n        return socket;\n    }\n    /**\n     * Called upon a socket close.\n     *\n     * @param socket\n     * @private\n     */\n    _destroy(socket) {\n        const nsps = Object.keys(this.nsps);\n        for (const nsp of nsps) {\n            const socket = this.nsps[nsp];\n            if (socket.active) {\n                return;\n            }\n        }\n        this._close();\n    }\n    /**\n     * Writes a packet.\n     *\n     * @param packet\n     * @private\n     */\n    _packet(packet) {\n        const encodedPackets = this.encoder.encode(packet);\n        for (let i = 0; i < encodedPackets.length; i++) {\n            this.engine.write(encodedPackets[i], packet.options);\n        }\n    }\n    /**\n     * Clean up transport subscriptions and packet buffer.\n     *\n     * @private\n     */\n    cleanup() {\n        this.subs.forEach((subDestroy) => subDestroy());\n        this.subs.length = 0;\n        this.decoder.destroy();\n    }\n    /**\n     * Close the current socket.\n     *\n     * @private\n     */\n    _close() {\n        this.skipReconnect = true;\n        this._reconnecting = false;\n        this.onclose(\"forced close\");\n        if (this.engine)\n            this.engine.close();\n    }\n    /**\n     * Alias for close()\n     *\n     * @private\n     */\n    disconnect() {\n        return this._close();\n    }\n    /**\n     * Called upon engine close.\n     *\n     * @private\n     */\n    onclose(reason, description) {\n        this.cleanup();\n        this.backoff.reset();\n        this._readyState = \"closed\";\n        this.emitReserved(\"close\", reason, description);\n        if (this._reconnection && !this.skipReconnect) {\n            this.reconnect();\n        }\n    }\n    /**\n     * Attempt a reconnection.\n     *\n     * @private\n     */\n    reconnect() {\n        if (this._reconnecting || this.skipReconnect)\n            return this;\n        const self = this;\n        if (this.backoff.attempts >= this._reconnectionAttempts) {\n            this.backoff.reset();\n            this.emitReserved(\"reconnect_failed\");\n            this._reconnecting = false;\n        }\n        else {\n            const delay = this.backoff.duration();\n            this._reconnecting = true;\n            const timer = this.setTimeoutFn(() => {\n                if (self.skipReconnect)\n                    return;\n                this.emitReserved(\"reconnect_attempt\", self.backoff.attempts);\n                // check again for the case socket closed in above events\n                if (self.skipReconnect)\n                    return;\n                self.open((err) => {\n                    if (err) {\n                        self._reconnecting = false;\n                        self.reconnect();\n                        this.emitReserved(\"reconnect_error\", err);\n                    }\n                    else {\n                        self.onreconnect();\n                    }\n                });\n            }, delay);\n            if (this.opts.autoUnref) {\n                timer.unref();\n            }\n            this.subs.push(() => {\n                this.clearTimeoutFn(timer);\n            });\n        }\n    }\n    /**\n     * Called upon successful reconnect.\n     *\n     * @private\n     */\n    onreconnect() {\n        const attempt = this.backoff.attempts;\n        this._reconnecting = false;\n        this.backoff.reset();\n        this.emitReserved(\"reconnect\", attempt);\n    }\n}\n","export function on(obj, ev, fn) {\n    obj.on(ev, fn);\n    return function subDestroy() {\n        obj.off(ev, fn);\n    };\n}\n","import { PacketType } from \"socket.io-parser\";\nimport { on } from \"./on.js\";\nimport { Emitter, } from \"@socket.io/component-emitter\";\n/**\n * Internal events.\n * These events can't be emitted by the user.\n */\nconst RESERVED_EVENTS = Object.freeze({\n    connect: 1,\n    connect_error: 1,\n    disconnect: 1,\n    disconnecting: 1,\n    // EventEmitter reserved events: https://nodejs.org/api/events.html#events_event_newlistener\n    newListener: 1,\n    removeListener: 1,\n});\n/**\n * A Socket is the fundamental class for interacting with the server.\n *\n * A Socket belongs to a certain Namespace (by default /) and uses an underlying {@link Manager} to communicate.\n *\n * @example\n * const socket = io();\n *\n * socket.on(\"connect\", () => {\n *   console.log(\"connected\");\n * });\n *\n * // send an event to the server\n * socket.emit(\"foo\", \"bar\");\n *\n * socket.on(\"foobar\", () => {\n *   // an event was received from the server\n * });\n *\n * // upon disconnection\n * socket.on(\"disconnect\", (reason) => {\n *   console.log(`disconnected due to ${reason}`);\n * });\n */\nexport class Socket extends Emitter {\n    /**\n     * `Socket` constructor.\n     */\n    constructor(io, nsp, opts) {\n        super();\n        /**\n         * Whether the socket is currently connected to the server.\n         *\n         * @example\n         * const socket = io();\n         *\n         * socket.on(\"connect\", () => {\n         *   console.log(socket.connected); // true\n         * });\n         *\n         * socket.on(\"disconnect\", () => {\n         *   console.log(socket.connected); // false\n         * });\n         */\n        this.connected = false;\n        /**\n         * Whether the connection state was recovered after a temporary disconnection. In that case, any missed packets will\n         * be transmitted by the server.\n         */\n        this.recovered = false;\n        /**\n         * Buffer for packets received before the CONNECT packet\n         */\n        this.receiveBuffer = [];\n        /**\n         * Buffer for packets that will be sent once the socket is connected\n         */\n        this.sendBuffer = [];\n        /**\n         * The queue of packets to be sent with retry in case of failure.\n         *\n         * Packets are sent one by one, each waiting for the server acknowledgement, in order to guarantee the delivery order.\n         * @private\n         */\n        this._queue = [];\n        /**\n         * A sequence to generate the ID of the {@link QueuedPacket}.\n         * @private\n         */\n        this._queueSeq = 0;\n        this.ids = 0;\n        this.acks = {};\n        this.flags = {};\n        this.io = io;\n        this.nsp = nsp;\n        if (opts && opts.auth) {\n            this.auth = opts.auth;\n        }\n        this._opts = Object.assign({}, opts);\n        if (this.io._autoConnect)\n            this.open();\n    }\n    /**\n     * Whether the socket is currently disconnected\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"connect\", () => {\n     *   console.log(socket.disconnected); // false\n     * });\n     *\n     * socket.on(\"disconnect\", () => {\n     *   console.log(socket.disconnected); // true\n     * });\n     */\n    get disconnected() {\n        return !this.connected;\n    }\n    /**\n     * Subscribe to open, close and packet events\n     *\n     * @private\n     */\n    subEvents() {\n        if (this.subs)\n            return;\n        const io = this.io;\n        this.subs = [\n            on(io, \"open\", this.onopen.bind(this)),\n            on(io, \"packet\", this.onpacket.bind(this)),\n            on(io, \"error\", this.onerror.bind(this)),\n            on(io, \"close\", this.onclose.bind(this)),\n        ];\n    }\n    /**\n     * Whether the Socket will try to reconnect when its Manager connects or reconnects.\n     *\n     * @example\n     * const socket = io();\n     *\n     * console.log(socket.active); // true\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   if (reason === \"io server disconnect\") {\n     *     // the disconnection was initiated by the server, you need to manually reconnect\n     *     console.log(socket.active); // false\n     *   }\n     *   // else the socket will automatically try to reconnect\n     *   console.log(socket.active); // true\n     * });\n     */\n    get active() {\n        return !!this.subs;\n    }\n    /**\n     * \"Opens\" the socket.\n     *\n     * @example\n     * const socket = io({\n     *   autoConnect: false\n     * });\n     *\n     * socket.connect();\n     */\n    connect() {\n        if (this.connected)\n            return this;\n        this.subEvents();\n        if (!this.io[\"_reconnecting\"])\n            this.io.open(); // ensure open\n        if (\"open\" === this.io._readyState)\n            this.onopen();\n        return this;\n    }\n    /**\n     * Alias for {@link connect()}.\n     */\n    open() {\n        return this.connect();\n    }\n    /**\n     * Sends a `message` event.\n     *\n     * This method mimics the WebSocket.send() method.\n     *\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/WebSocket/send\n     *\n     * @example\n     * socket.send(\"hello\");\n     *\n     * // this is equivalent to\n     * socket.emit(\"message\", \"hello\");\n     *\n     * @return self\n     */\n    send(...args) {\n        args.unshift(\"message\");\n        this.emit.apply(this, args);\n        return this;\n    }\n    /**\n     * Override `emit`.\n     * If the event is in `events`, it's emitted normally.\n     *\n     * @example\n     * socket.emit(\"hello\", \"world\");\n     *\n     * // all serializable datastructures are supported (no need to call JSON.stringify)\n     * socket.emit(\"hello\", 1, \"2\", { 3: [\"4\"], 5: Uint8Array.from([6]) });\n     *\n     * // with an acknowledgement from the server\n     * socket.emit(\"hello\", \"world\", (val) => {\n     *   // ...\n     * });\n     *\n     * @return self\n     */\n    emit(ev, ...args) {\n        if (RESERVED_EVENTS.hasOwnProperty(ev)) {\n            throw new Error('\"' + ev.toString() + '\" is a reserved event name');\n        }\n        args.unshift(ev);\n        if (this._opts.retries && !this.flags.fromQueue && !this.flags.volatile) {\n            this._addToQueue(args);\n            return this;\n        }\n        const packet = {\n            type: PacketType.EVENT,\n            data: args,\n        };\n        packet.options = {};\n        packet.options.compress = this.flags.compress !== false;\n        // event ack callback\n        if (\"function\" === typeof args[args.length - 1]) {\n            const id = this.ids++;\n            const ack = args.pop();\n            this._registerAckCallback(id, ack);\n            packet.id = id;\n        }\n        const isTransportWritable = this.io.engine &&\n            this.io.engine.transport &&\n            this.io.engine.transport.writable;\n        const discardPacket = this.flags.volatile && (!isTransportWritable || !this.connected);\n        if (discardPacket) {\n        }\n        else if (this.connected) {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        }\n        else {\n            this.sendBuffer.push(packet);\n        }\n        this.flags = {};\n        return this;\n    }\n    /**\n     * @private\n     */\n    _registerAckCallback(id, ack) {\n        var _a;\n        const timeout = (_a = this.flags.timeout) !== null && _a !== void 0 ? _a : this._opts.ackTimeout;\n        if (timeout === undefined) {\n            this.acks[id] = ack;\n            return;\n        }\n        // @ts-ignore\n        const timer = this.io.setTimeoutFn(() => {\n            delete this.acks[id];\n            for (let i = 0; i < this.sendBuffer.length; i++) {\n                if (this.sendBuffer[i].id === id) {\n                    this.sendBuffer.splice(i, 1);\n                }\n            }\n            ack.call(this, new Error(\"operation has timed out\"));\n        }, timeout);\n        this.acks[id] = (...args) => {\n            // @ts-ignore\n            this.io.clearTimeoutFn(timer);\n            ack.apply(this, [null, ...args]);\n        };\n    }\n    /**\n     * Emits an event and waits for an acknowledgement\n     *\n     * @example\n     * // without timeout\n     * const response = await socket.emitWithAck(\"hello\", \"world\");\n     *\n     * // with a specific timeout\n     * try {\n     *   const response = await socket.timeout(1000).emitWithAck(\"hello\", \"world\");\n     * } catch (err) {\n     *   // the server did not acknowledge the event in the given delay\n     * }\n     *\n     * @return a Promise that will be fulfilled when the server acknowledges the event\n     */\n    emitWithAck(ev, ...args) {\n        // the timeout flag is optional\n        const withErr = this.flags.timeout !== undefined || this._opts.ackTimeout !== undefined;\n        return new Promise((resolve, reject) => {\n            args.push((arg1, arg2) => {\n                if (withErr) {\n                    return arg1 ? reject(arg1) : resolve(arg2);\n                }\n                else {\n                    return resolve(arg1);\n                }\n            });\n            this.emit(ev, ...args);\n        });\n    }\n    /**\n     * Add the packet to the queue.\n     * @param args\n     * @private\n     */\n    _addToQueue(args) {\n        let ack;\n        if (typeof args[args.length - 1] === \"function\") {\n            ack = args.pop();\n        }\n        const packet = {\n            id: this._queueSeq++,\n            tryCount: 0,\n            pending: false,\n            args,\n            flags: Object.assign({ fromQueue: true }, this.flags),\n        };\n        args.push((err, ...responseArgs) => {\n            if (packet !== this._queue[0]) {\n                // the packet has already been acknowledged\n                return;\n            }\n            const hasError = err !== null;\n            if (hasError) {\n                if (packet.tryCount > this._opts.retries) {\n                    this._queue.shift();\n                    if (ack) {\n                        ack(err);\n                    }\n                }\n            }\n            else {\n                this._queue.shift();\n                if (ack) {\n                    ack(null, ...responseArgs);\n                }\n            }\n            packet.pending = false;\n            return this._drainQueue();\n        });\n        this._queue.push(packet);\n        this._drainQueue();\n    }\n    /**\n     * Send the first packet of the queue, and wait for an acknowledgement from the server.\n     * @param force - whether to resend a packet that has not been acknowledged yet\n     *\n     * @private\n     */\n    _drainQueue(force = false) {\n        if (!this.connected || this._queue.length === 0) {\n            return;\n        }\n        const packet = this._queue[0];\n        if (packet.pending && !force) {\n            return;\n        }\n        packet.pending = true;\n        packet.tryCount++;\n        this.flags = packet.flags;\n        this.emit.apply(this, packet.args);\n    }\n    /**\n     * Sends a packet.\n     *\n     * @param packet\n     * @private\n     */\n    packet(packet) {\n        packet.nsp = this.nsp;\n        this.io._packet(packet);\n    }\n    /**\n     * Called upon engine `open`.\n     *\n     * @private\n     */\n    onopen() {\n        if (typeof this.auth == \"function\") {\n            this.auth((data) => {\n                this._sendConnectPacket(data);\n            });\n        }\n        else {\n            this._sendConnectPacket(this.auth);\n        }\n    }\n    /**\n     * Sends a CONNECT packet to initiate the Socket.IO session.\n     *\n     * @param data\n     * @private\n     */\n    _sendConnectPacket(data) {\n        this.packet({\n            type: PacketType.CONNECT,\n            data: this._pid\n                ? Object.assign({ pid: this._pid, offset: this._lastOffset }, data)\n                : data,\n        });\n    }\n    /**\n     * Called upon engine or manager `error`.\n     *\n     * @param err\n     * @private\n     */\n    onerror(err) {\n        if (!this.connected) {\n            this.emitReserved(\"connect_error\", err);\n        }\n    }\n    /**\n     * Called upon engine `close`.\n     *\n     * @param reason\n     * @param description\n     * @private\n     */\n    onclose(reason, description) {\n        this.connected = false;\n        delete this.id;\n        this.emitReserved(\"disconnect\", reason, description);\n    }\n    /**\n     * Called with socket packet.\n     *\n     * @param packet\n     * @private\n     */\n    onpacket(packet) {\n        const sameNamespace = packet.nsp === this.nsp;\n        if (!sameNamespace)\n            return;\n        switch (packet.type) {\n            case PacketType.CONNECT:\n                if (packet.data && packet.data.sid) {\n                    this.onconnect(packet.data.sid, packet.data.pid);\n                }\n                else {\n                    this.emitReserved(\"connect_error\", new Error(\"It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)\"));\n                }\n                break;\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                this.onevent(packet);\n                break;\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                this.onack(packet);\n                break;\n            case PacketType.DISCONNECT:\n                this.ondisconnect();\n                break;\n            case PacketType.CONNECT_ERROR:\n                this.destroy();\n                const err = new Error(packet.data.message);\n                // @ts-ignore\n                err.data = packet.data.data;\n                this.emitReserved(\"connect_error\", err);\n                break;\n        }\n    }\n    /**\n     * Called upon a server event.\n     *\n     * @param packet\n     * @private\n     */\n    onevent(packet) {\n        const args = packet.data || [];\n        if (null != packet.id) {\n            args.push(this.ack(packet.id));\n        }\n        if (this.connected) {\n            this.emitEvent(args);\n        }\n        else {\n            this.receiveBuffer.push(Object.freeze(args));\n        }\n    }\n    emitEvent(args) {\n        if (this._anyListeners && this._anyListeners.length) {\n            const listeners = this._anyListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, args);\n            }\n        }\n        super.emit.apply(this, args);\n        if (this._pid && args.length && typeof args[args.length - 1] === \"string\") {\n            this._lastOffset = args[args.length - 1];\n        }\n    }\n    /**\n     * Produces an ack callback to emit with an event.\n     *\n     * @private\n     */\n    ack(id) {\n        const self = this;\n        let sent = false;\n        return function (...args) {\n            // prevent double callbacks\n            if (sent)\n                return;\n            sent = true;\n            self.packet({\n                type: PacketType.ACK,\n                id: id,\n                data: args,\n            });\n        };\n    }\n    /**\n     * Called upon a server acknowlegement.\n     *\n     * @param packet\n     * @private\n     */\n    onack(packet) {\n        const ack = this.acks[packet.id];\n        if (\"function\" === typeof ack) {\n            ack.apply(this, packet.data);\n            delete this.acks[packet.id];\n        }\n        else {\n        }\n    }\n    /**\n     * Called upon server connect.\n     *\n     * @private\n     */\n    onconnect(id, pid) {\n        this.id = id;\n        this.recovered = pid && this._pid === pid;\n        this._pid = pid; // defined only if connection state recovery is enabled\n        this.connected = true;\n        this.emitBuffered();\n        this.emitReserved(\"connect\");\n        this._drainQueue(true);\n    }\n    /**\n     * Emit buffered events (received and emitted).\n     *\n     * @private\n     */\n    emitBuffered() {\n        this.receiveBuffer.forEach((args) => this.emitEvent(args));\n        this.receiveBuffer = [];\n        this.sendBuffer.forEach((packet) => {\n            this.notifyOutgoingListeners(packet);\n            this.packet(packet);\n        });\n        this.sendBuffer = [];\n    }\n    /**\n     * Called upon server disconnect.\n     *\n     * @private\n     */\n    ondisconnect() {\n        this.destroy();\n        this.onclose(\"io server disconnect\");\n    }\n    /**\n     * Called upon forced client/server side disconnections,\n     * this method ensures the manager stops tracking us and\n     * that reconnections don't get triggered for this.\n     *\n     * @private\n     */\n    destroy() {\n        if (this.subs) {\n            // clean subscriptions to avoid reconnections\n            this.subs.forEach((subDestroy) => subDestroy());\n            this.subs = undefined;\n        }\n        this.io[\"_destroy\"](this);\n    }\n    /**\n     * Disconnects the socket manually. In that case, the socket will not try to reconnect.\n     *\n     * If this is the last active Socket instance of the {@link Manager}, the low-level connection will be closed.\n     *\n     * @example\n     * const socket = io();\n     *\n     * socket.on(\"disconnect\", (reason) => {\n     *   // console.log(reason); prints \"io client disconnect\"\n     * });\n     *\n     * socket.disconnect();\n     *\n     * @return self\n     */\n    disconnect() {\n        if (this.connected) {\n            this.packet({ type: PacketType.DISCONNECT });\n        }\n        // remove socket from pool\n        this.destroy();\n        if (this.connected) {\n            // fire events\n            this.onclose(\"io client disconnect\");\n        }\n        return this;\n    }\n    /**\n     * Alias for {@link disconnect()}.\n     *\n     * @return self\n     */\n    close() {\n        return this.disconnect();\n    }\n    /**\n     * Sets the compress flag.\n     *\n     * @example\n     * socket.compress(false).emit(\"hello\");\n     *\n     * @param compress - if `true`, compresses the sending data\n     * @return self\n     */\n    compress(compress) {\n        this.flags.compress = compress;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the event message will be dropped when this socket is not\n     * ready to send messages.\n     *\n     * @example\n     * socket.volatile.emit(\"hello\"); // the server may or may not receive it\n     *\n     * @returns self\n     */\n    get volatile() {\n        this.flags.volatile = true;\n        return this;\n    }\n    /**\n     * Sets a modifier for a subsequent event emission that the callback will be called with an error when the\n     * given number of milliseconds have elapsed without an acknowledgement from the server:\n     *\n     * @example\n     * socket.timeout(5000).emit(\"my-event\", (err) => {\n     *   if (err) {\n     *     // the server did not acknowledge the event in the given delay\n     *   }\n     * });\n     *\n     * @returns self\n     */\n    timeout(timeout) {\n        this.flags.timeout = timeout;\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * @example\n     * socket.onAny((event, ...args) => {\n     *   console.log(`got ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * @example\n     * socket.prependAny((event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAny(listener) {\n        this._anyListeners = this._anyListeners || [];\n        this._anyListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`got event ${event}`);\n     * }\n     *\n     * socket.onAny(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAny(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAny();\n     *\n     * @param listener\n     */\n    offAny(listener) {\n        if (!this._anyListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAny() {\n        return this._anyListeners || [];\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.onAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    onAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.push(listener);\n        return this;\n    }\n    /**\n     * Adds a listener that will be fired when any event is emitted. The event name is passed as the first argument to the\n     * callback. The listener is added to the beginning of the listeners array.\n     *\n     * Note: acknowledgements sent to the server are not included.\n     *\n     * @example\n     * socket.prependAnyOutgoing((event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * });\n     *\n     * @param listener\n     */\n    prependAnyOutgoing(listener) {\n        this._anyOutgoingListeners = this._anyOutgoingListeners || [];\n        this._anyOutgoingListeners.unshift(listener);\n        return this;\n    }\n    /**\n     * Removes the listener that will be fired when any event is emitted.\n     *\n     * @example\n     * const catchAllListener = (event, ...args) => {\n     *   console.log(`sent event ${event}`);\n     * }\n     *\n     * socket.onAnyOutgoing(catchAllListener);\n     *\n     * // remove a specific listener\n     * socket.offAnyOutgoing(catchAllListener);\n     *\n     * // or remove all listeners\n     * socket.offAnyOutgoing();\n     *\n     * @param [listener] - the catch-all listener (optional)\n     */\n    offAnyOutgoing(listener) {\n        if (!this._anyOutgoingListeners) {\n            return this;\n        }\n        if (listener) {\n            const listeners = this._anyOutgoingListeners;\n            for (let i = 0; i < listeners.length; i++) {\n                if (listener === listeners[i]) {\n                    listeners.splice(i, 1);\n                    return this;\n                }\n            }\n        }\n        else {\n            this._anyOutgoingListeners = [];\n        }\n        return this;\n    }\n    /**\n     * Returns an array of listeners that are listening for any event that is specified. This array can be manipulated,\n     * e.g. to remove listeners.\n     */\n    listenersAnyOutgoing() {\n        return this._anyOutgoingListeners || [];\n    }\n    /**\n     * Notify the listeners for each packet sent\n     *\n     * @param packet\n     *\n     * @private\n     */\n    notifyOutgoingListeners(packet) {\n        if (this._anyOutgoingListeners && this._anyOutgoingListeners.length) {\n            const listeners = this._anyOutgoingListeners.slice();\n            for (const listener of listeners) {\n                listener.apply(this, packet.data);\n            }\n        }\n    }\n}\n","import { parse } from \"engine.io-client\";\n/**\n * URL parser.\n *\n * @param uri - url\n * @param path - the request path of the connection\n * @param loc - An object meant to mimic window.location.\n *        Defaults to window.location.\n * @public\n */\nexport function url(uri, path = \"\", loc) {\n    let obj = uri;\n    // default to window.location\n    loc = loc || (typeof location !== \"undefined\" && location);\n    if (null == uri)\n        uri = loc.protocol + \"//\" + loc.host;\n    // relative path support\n    if (typeof uri === \"string\") {\n        if (\"/\" === uri.charAt(0)) {\n            if (\"/\" === uri.charAt(1)) {\n                uri = loc.protocol + uri;\n            }\n            else {\n                uri = loc.host + uri;\n            }\n        }\n        if (!/^(https?|wss?):\\/\\//.test(uri)) {\n            if (\"undefined\" !== typeof loc) {\n                uri = loc.protocol + \"//\" + uri;\n            }\n            else {\n                uri = \"https://\" + uri;\n            }\n        }\n        // parse\n        obj = parse(uri);\n    }\n    // make sure we treat `localhost:80` and `localhost` equally\n    if (!obj.port) {\n        if (/^(http|ws)$/.test(obj.protocol)) {\n            obj.port = \"80\";\n        }\n        else if (/^(http|ws)s$/.test(obj.protocol)) {\n            obj.port = \"443\";\n        }\n    }\n    obj.path = obj.path || \"/\";\n    const ipv6 = obj.host.indexOf(\":\") !== -1;\n    const host = ipv6 ? \"[\" + obj.host + \"]\" : obj.host;\n    // define unique id\n    obj.id = obj.protocol + \"://\" + host + \":\" + obj.port + path;\n    // define href\n    obj.href =\n        obj.protocol +\n            \"://\" +\n            host +\n            (loc && loc.port === obj.port ? \"\" : \":\" + obj.port);\n    return obj;\n}\n","import { isBinary } from \"./is-binary.js\";\n/**\n * Replaces every Buffer | ArrayBuffer | Blob | File in packet with a numbered placeholder.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @public\n */\nexport function deconstructPacket(packet) {\n    const buffers = [];\n    const packetData = packet.data;\n    const pack = packet;\n    pack.data = _deconstructPacket(packetData, buffers);\n    pack.attachments = buffers.length; // number of binary 'attachments'\n    return { packet: pack, buffers: buffers };\n}\nfunction _deconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (isBinary(data)) {\n        const placeholder = { _placeholder: true, num: buffers.length };\n        buffers.push(data);\n        return placeholder;\n    }\n    else if (Array.isArray(data)) {\n        const newData = new Array(data.length);\n        for (let i = 0; i < data.length; i++) {\n            newData[i] = _deconstructPacket(data[i], buffers);\n        }\n        return newData;\n    }\n    else if (typeof data === \"object\" && !(data instanceof Date)) {\n        const newData = {};\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                newData[key] = _deconstructPacket(data[key], buffers);\n            }\n        }\n        return newData;\n    }\n    return data;\n}\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @public\n */\nexport function reconstructPacket(packet, buffers) {\n    packet.data = _reconstructPacket(packet.data, buffers);\n    delete packet.attachments; // no longer useful\n    return packet;\n}\nfunction _reconstructPacket(data, buffers) {\n    if (!data)\n        return data;\n    if (data && data._placeholder === true) {\n        const isIndexValid = typeof data.num === \"number\" &&\n            data.num >= 0 &&\n            data.num < buffers.length;\n        if (isIndexValid) {\n            return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n        }\n        else {\n            throw new Error(\"illegal attachments\");\n        }\n    }\n    else if (Array.isArray(data)) {\n        for (let i = 0; i < data.length; i++) {\n            data[i] = _reconstructPacket(data[i], buffers);\n        }\n    }\n    else if (typeof data === \"object\") {\n        for (const key in data) {\n            if (Object.prototype.hasOwnProperty.call(data, key)) {\n                data[key] = _reconstructPacket(data[key], buffers);\n            }\n        }\n    }\n    return data;\n}\n","import { Emitter } from \"@socket.io/component-emitter\";\nimport { deconstructPacket, reconstructPacket } from \"./binary.js\";\nimport { isBinary, hasBinary } from \"./is-binary.js\";\n/**\n * These strings must not be used as event names, as they have a special meaning.\n */\nconst RESERVED_EVENTS = [\n    \"connect\",\n    \"connect_error\",\n    \"disconnect\",\n    \"disconnecting\",\n    \"newListener\",\n    \"removeListener\", // used by the Node.js EventEmitter\n];\n/**\n * Protocol version.\n *\n * @public\n */\nexport const protocol = 5;\nexport var PacketType;\n(function (PacketType) {\n    PacketType[PacketType[\"CONNECT\"] = 0] = \"CONNECT\";\n    PacketType[PacketType[\"DISCONNECT\"] = 1] = \"DISCONNECT\";\n    PacketType[PacketType[\"EVENT\"] = 2] = \"EVENT\";\n    PacketType[PacketType[\"ACK\"] = 3] = \"ACK\";\n    PacketType[PacketType[\"CONNECT_ERROR\"] = 4] = \"CONNECT_ERROR\";\n    PacketType[PacketType[\"BINARY_EVENT\"] = 5] = \"BINARY_EVENT\";\n    PacketType[PacketType[\"BINARY_ACK\"] = 6] = \"BINARY_ACK\";\n})(PacketType || (PacketType = {}));\n/**\n * A socket.io Encoder instance\n */\nexport class Encoder {\n    /**\n     * Encoder constructor\n     *\n     * @param {function} replacer - custom replacer to pass down to JSON.parse\n     */\n    constructor(replacer) {\n        this.replacer = replacer;\n    }\n    /**\n     * Encode a packet as a single string if non-binary, or as a\n     * buffer sequence, depending on packet type.\n     *\n     * @param {Object} obj - packet object\n     */\n    encode(obj) {\n        if (obj.type === PacketType.EVENT || obj.type === PacketType.ACK) {\n            if (hasBinary(obj)) {\n                return this.encodeAsBinary({\n                    type: obj.type === PacketType.EVENT\n                        ? PacketType.BINARY_EVENT\n                        : PacketType.BINARY_ACK,\n                    nsp: obj.nsp,\n                    data: obj.data,\n                    id: obj.id,\n                });\n            }\n        }\n        return [this.encodeAsString(obj)];\n    }\n    /**\n     * Encode packet as string.\n     */\n    encodeAsString(obj) {\n        // first is type\n        let str = \"\" + obj.type;\n        // attachments if we have them\n        if (obj.type === PacketType.BINARY_EVENT ||\n            obj.type === PacketType.BINARY_ACK) {\n            str += obj.attachments + \"-\";\n        }\n        // if we have a namespace other than `/`\n        // we append it followed by a comma `,`\n        if (obj.nsp && \"/\" !== obj.nsp) {\n            str += obj.nsp + \",\";\n        }\n        // immediately followed by the id\n        if (null != obj.id) {\n            str += obj.id;\n        }\n        // json data\n        if (null != obj.data) {\n            str += JSON.stringify(obj.data, this.replacer);\n        }\n        return str;\n    }\n    /**\n     * Encode packet as 'buffer sequence' by removing blobs, and\n     * deconstructing packet into object with placeholders and\n     * a list of buffers.\n     */\n    encodeAsBinary(obj) {\n        const deconstruction = deconstructPacket(obj);\n        const pack = this.encodeAsString(deconstruction.packet);\n        const buffers = deconstruction.buffers;\n        buffers.unshift(pack); // add packet info to beginning of data list\n        return buffers; // write all the buffers\n    }\n}\n// see https://stackoverflow.com/questions/8511281/check-if-a-value-is-an-object-in-javascript\nfunction isObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n */\nexport class Decoder extends Emitter {\n    /**\n     * Decoder constructor\n     *\n     * @param {function} reviver - custom reviver to pass down to JSON.stringify\n     */\n    constructor(reviver) {\n        super();\n        this.reviver = reviver;\n    }\n    /**\n     * Decodes an encoded packet string into packet JSON.\n     *\n     * @param {String} obj - encoded packet\n     */\n    add(obj) {\n        let packet;\n        if (typeof obj === \"string\") {\n            if (this.reconstructor) {\n                throw new Error(\"got plaintext data when reconstructing a packet\");\n            }\n            packet = this.decodeString(obj);\n            const isBinaryEvent = packet.type === PacketType.BINARY_EVENT;\n            if (isBinaryEvent || packet.type === PacketType.BINARY_ACK) {\n                packet.type = isBinaryEvent ? PacketType.EVENT : PacketType.ACK;\n                // binary packet's json\n                this.reconstructor = new BinaryReconstructor(packet);\n                // no attachments, labeled binary but no binary data to follow\n                if (packet.attachments === 0) {\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n            else {\n                // non-binary full packet\n                super.emitReserved(\"decoded\", packet);\n            }\n        }\n        else if (isBinary(obj) || obj.base64) {\n            // raw binary data\n            if (!this.reconstructor) {\n                throw new Error(\"got binary data when not reconstructing a packet\");\n            }\n            else {\n                packet = this.reconstructor.takeBinaryData(obj);\n                if (packet) {\n                    // received final buffer\n                    this.reconstructor = null;\n                    super.emitReserved(\"decoded\", packet);\n                }\n            }\n        }\n        else {\n            throw new Error(\"Unknown type: \" + obj);\n        }\n    }\n    /**\n     * Decode a packet String (JSON data)\n     *\n     * @param {String} str\n     * @return {Object} packet\n     */\n    decodeString(str) {\n        let i = 0;\n        // look up type\n        const p = {\n            type: Number(str.charAt(0)),\n        };\n        if (PacketType[p.type] === undefined) {\n            throw new Error(\"unknown packet type \" + p.type);\n        }\n        // look up attachments if type binary\n        if (p.type === PacketType.BINARY_EVENT ||\n            p.type === PacketType.BINARY_ACK) {\n            const start = i + 1;\n            while (str.charAt(++i) !== \"-\" && i != str.length) { }\n            const buf = str.substring(start, i);\n            if (buf != Number(buf) || str.charAt(i) !== \"-\") {\n                throw new Error(\"Illegal attachments\");\n            }\n            p.attachments = Number(buf);\n        }\n        // look up namespace (if any)\n        if (\"/\" === str.charAt(i + 1)) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (\",\" === c)\n                    break;\n                if (i === str.length)\n                    break;\n            }\n            p.nsp = str.substring(start, i);\n        }\n        else {\n            p.nsp = \"/\";\n        }\n        // look up id\n        const next = str.charAt(i + 1);\n        if (\"\" !== next && Number(next) == next) {\n            const start = i + 1;\n            while (++i) {\n                const c = str.charAt(i);\n                if (null == c || Number(c) != c) {\n                    --i;\n                    break;\n                }\n                if (i === str.length)\n                    break;\n            }\n            p.id = Number(str.substring(start, i + 1));\n        }\n        // look up json data\n        if (str.charAt(++i)) {\n            const payload = this.tryParse(str.substr(i));\n            if (Decoder.isPayloadValid(p.type, payload)) {\n                p.data = payload;\n            }\n            else {\n                throw new Error(\"invalid payload\");\n            }\n        }\n        return p;\n    }\n    tryParse(str) {\n        try {\n            return JSON.parse(str, this.reviver);\n        }\n        catch (e) {\n            return false;\n        }\n    }\n    static isPayloadValid(type, payload) {\n        switch (type) {\n            case PacketType.CONNECT:\n                return isObject(payload);\n            case PacketType.DISCONNECT:\n                return payload === undefined;\n            case PacketType.CONNECT_ERROR:\n                return typeof payload === \"string\" || isObject(payload);\n            case PacketType.EVENT:\n            case PacketType.BINARY_EVENT:\n                return (Array.isArray(payload) &&\n                    (typeof payload[0] === \"number\" ||\n                        (typeof payload[0] === \"string\" &&\n                            RESERVED_EVENTS.indexOf(payload[0]) === -1)));\n            case PacketType.ACK:\n            case PacketType.BINARY_ACK:\n                return Array.isArray(payload);\n        }\n    }\n    /**\n     * Deallocates a parser's resources\n     */\n    destroy() {\n        if (this.reconstructor) {\n            this.reconstructor.finishedReconstruction();\n            this.reconstructor = null;\n        }\n    }\n}\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n */\nclass BinaryReconstructor {\n    constructor(packet) {\n        this.packet = packet;\n        this.buffers = [];\n        this.reconPack = packet;\n    }\n    /**\n     * Method to be called when binary data received from connection\n     * after a BINARY_EVENT packet.\n     *\n     * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n     * @return {null | Object} returns null if more binary data is expected or\n     *   a reconstructed packet object if all buffers have been received.\n     */\n    takeBinaryData(binData) {\n        this.buffers.push(binData);\n        if (this.buffers.length === this.reconPack.attachments) {\n            // done with buffer list\n            const packet = reconstructPacket(this.reconPack, this.buffers);\n            this.finishedReconstruction();\n            return packet;\n        }\n        return null;\n    }\n    /**\n     * Cleans up binary packet reconstruction variables.\n     */\n    finishedReconstruction() {\n        this.reconPack = null;\n        this.buffers = [];\n    }\n}\n","const withNativeArrayBuffer = typeof ArrayBuffer === \"function\";\nconst isView = (obj) => {\n    return typeof ArrayBuffer.isView === \"function\"\n        ? ArrayBuffer.isView(obj)\n        : obj.buffer instanceof ArrayBuffer;\n};\nconst toString = Object.prototype.toString;\nconst withNativeBlob = typeof Blob === \"function\" ||\n    (typeof Blob !== \"undefined\" &&\n        toString.call(Blob) === \"[object BlobConstructor]\");\nconst withNativeFile = typeof File === \"function\" ||\n    (typeof File !== \"undefined\" &&\n        toString.call(File) === \"[object FileConstructor]\");\n/**\n * Returns true if obj is a Buffer, an ArrayBuffer, a Blob or a File.\n *\n * @private\n */\nexport function isBinary(obj) {\n    return ((withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj))) ||\n        (withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File));\n}\nexport function hasBinary(obj, toJSON) {\n    if (!obj || typeof obj !== \"object\") {\n        return false;\n    }\n    if (Array.isArray(obj)) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (hasBinary(obj[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (isBinary(obj)) {\n        return true;\n    }\n    if (obj.toJSON &&\n        typeof obj.toJSON === \"function\" &&\n        arguments.length === 1) {\n        return hasBinary(obj.toJSON(), true);\n    }\n    for (const key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n            return true;\n        }\n    }\n    return false;\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}"],"names":["Actions","createEffect","ofType","ObsActions","ObsConnectionService","catchError","map","of","switchMap","ObsEffects","constructor","actions$","obsService","connectServer$","pipe","connect","props","connectSuccess","err","connectFailure","error","message","disconnectServer$","disconnect","disconnectSuccess","disconnectFailure","i0","ɵɵinject","i1","i2","factory","ɵfac","PeerActions","PeerService","PeerEffects","peerService","connectSocketServer$","connectSocketServer","connectSocket","id","socketServerUserIdAssigned","connectSocketServerFailure","disconnectSocketServer$","disconnectSocketServer","disconnectSocket","socketServerDisconnected","connectPeerServer$","connectPeerServer","peerServerConnected","connectPeerServerFailure","disconnectPeerServer$","disconnectPeerServer","peerServerDisconnected","createRoom$","createBroadcastRoom","joinRoom","createBroadcastRoomSuccess","createBroadcastRoomFailure","joinRoom$","joinBroadcastRoom","room","joinBroadcastRoomSuccess","joinBroadcastRoomFailure","leaveRoom$","leaveBroadcastRoom","leaveSession","leaveBroadcastRoomSuccess","leaveBroadcastRoomFailure","endBroadcast$","endBroadcast","endBroadcastSuccess","endBroadcastFailure","activeStreamGuard","component","currentRoute","currentState","nextState","canDeactivate","confirm","ElementRef","Renderer2","Signal","toSignal","Store","AppActions","peerConnectionsAcceptedSelector","Router","FormBuilder","AcceptPeerConnectionsModalComponent","store","renderer","router","fb","accepted","select","saveSettingControl","control","ngAfterViewInit","_openModal","accept","dispatch","setPeerConnectionsAccepted","save","value","_closeModal","decline","navigate","setAttribute","modal","nativeElement","removeAttribute","ɵɵdirectiveInject","i3","selectors","viewQuery","AcceptPeerConnectionsModalComponent_Query","rf","ctx","ɵɵelementStart","ɵɵlistener","AcceptPeerConnectionsModalComponent_Template_button_click_0_listener","ɵɵrestoreView","_r2","_r1","ɵɵreference","ɵɵresetView","showModal","ɵɵelementEnd","ɵɵelement","ɵɵtext","AcceptPeerConnectionsModalComponent_Template_button_click_17_listener","AcceptPeerConnectionsModalComponent_Template_button_click_19_listener","ɵɵadvance","ɵɵproperty","ChangeDetectorRef","WritableSignal","computed","effect","signal","fadeInOnEnterAnimation","slideInRightOnEnterAnimation","slideInUpOnEnterAnimation","slideOutDownOnLeaveAnimation","slideOutRightOnLeaveAnimation","Subject","takeUntil","selectBroadcastPaused","selectHostOnline","selectPeerServerConnected","recognitionErrorSelector","selectTextFlow","FullScreenService","ctx_r1","liveText","undefined","BroadcastRenderComponent","el","fullScreen","cd","textOutput","onDestroy$","peerConnected","hostOnline","connected","textFlowDown","flow","hasLiveResults","length","isAvailable","isFullscreen","sidebarCheckbox","checked","detectChanges","ngOnInit","liveText$","subscribe","text","set","textOutput$","results","registerElement","ngOnDestroy","deregisterElement","console","log","next","updateDom","BroadcastRenderComponent_Query","BroadcastRenderComponent_Template_input_change_1_listener","ɵɵtemplate","BroadcastRenderComponent_app_recognized_live_text_6_Template","BroadcastRenderComponent_label_7_Template","BroadcastRenderComponent_app_recognition_control_sidebar_10_Template","ɵɵpureFunction2","_c1","_r0","toObservable","RecognitionActions","RecognitionStatus","recognitionConnectedSelector","recognitionPausedSelector","RecognitionService","BroadcastRoomComponent","recognitionService","recognitionConnected","recognitionPaused","getLiveOutput","recognizedText","getRecognizedText","isPaused","broadcastData","type","status","paused","connectRecognition","live","recognition","recognized","disconnectRecognition","decls","vars","consts","template","BroadcastRoomComponent_Template","ObsConnectionState","selectObsConnected","selectObsError","selectObsStreamActive","filter","take","ɵɵtextInterpolate","err_r8","ConnectObsComponent_div_7_div_1_Template","obsIsStreaming","ɵɵpureFunction1","_c0","ctx_r6","formGroup","invalid","touched","isConnecting","ConnectObsComponent_button_34_Template_button_click_0_listener","_r11","ctx_r10","ɵɵnextContext","ctx_r7","ConnectObsComponent","connectionState","isConnected","connecting","startRecognition","group","ip","port","password","saveObsWebsocket","_autofillDefaultValue","controls","updateValueAndValidity","valid","conn","markAsTouched","stopRecognition","patchValue","ConnectObsComponent_Template","ConnectObsComponent_div_5_Template","ConnectObsComponent_div_7_Template","ConnectObsComponent_Template_form_submit_8_listener","ConnectObsComponent_span_15_Template","ConnectObsComponent_span_16_Template","ConnectObsComponent_span_23_Template","ConnectObsComponent_span_24_Template","ConnectObsComponent_button_33_Template","ConnectObsComponent_button_34_Template","_c2","_c3","hasError","ɵɵpipeBind1","selectConnectedPeerCount","ConnectedPeerCountChipComponent","count","ConnectedPeerCountChipComponent_Template","ɵɵtextInterpolate2","recognitionStatusSelector","EndBroadcastComponent","isActive","confirmEndBroadcast","disconnected","hideModal","closeButton","click","EndBroadcastComponent_Query","EndBroadcastComponent_Template_button_click_2_listener","EndBroadcastComponent_Template_button_click_10_listener","EndBroadcastComponent_Template_button_click_12_listener","ɵɵattribute","fadeOutOnLeaveAnimation","JoinCodeComponent_div_0_Template_div_click_0_listener","_r3","ctx_r2","showCopiedToClipboard","ctx_r0","joinCode","toUpperCase","JoinCodeComponent","showToast","setTimeout","inputs","JoinCodeComponent_Template","JoinCodeComponent_div_0_Template","JoinCodeComponent_div_1_Template","EventEmitter","ActivatedRoute","selectIsViewing","LeaveSessionComponent","showDialog","open","route","dialogClosed","confirmationRequired","confirmLeaveBroadcast","leaveBroadcast","isViewing","queryParams","queryParamsHandling","relativeTo","LeaveSessionComponent_Query","LeaveSessionComponent_Template_button_click_0_listener","LeaveSessionComponent_Template_button_click_8_listener","LeaveSessionComponent_Template_button_click_10_listener","ObsConnectionStatusChipComponent_ng_template_1_div_0_span_5_Template","ctx_r3","state_r4","ObsConnectionStatusChipComponent_ng_template_1_div_0_Template","ObsConnectionStatusChipComponent","streamingActive","ObsConnectionStatusChipComponent_Template","ObsConnectionStatusChipComponent_div_0_Template","ObsConnectionStatusChipComponent_ng_template_1_Template","ɵɵtemplateRefExtractor","takeUntilDestroyed","Validators","AppPlatform","platformSelector","selectIsBroadcasting","selectJoinCode","selectPeerError","selectRoomId","selectServerOffline","selectSocketServerConnected","recognitionActiveSelector","ɵɵelementContainerStart","PeerLandingComponent_div_1_ng_container_1_app_obs_connection_status_chip_3_Template","ɵɵelementContainerEnd","showObsStatus","ctx_r9","roomId","err_r14","PeerLandingComponent_div_1_ng_container_7_Template_button_click_1_listener","_r16","ctx_r15","stopWebsocketRecognition","PeerLandingComponent_div_1_ng_container_1_Template","PeerLandingComponent_div_1_ng_template_2_Template","PeerLandingComponent_div_1_div_4_Template","PeerLandingComponent_div_1_ng_container_6_Template","PeerLandingComponent_div_1_ng_container_7_Template","isBroadcasting","_r8","serverError","recognitionActive","PeerLandingComponent_ng_container_4_app_broadcast_room_1_Template","PeerLandingComponent_ng_container_4_app_stream_captions_2_Template","PeerLandingComponent_ng_template_5_div_9_Template_button_click_1_listener","_r29","ctx_r28","createRoom","ctx_r20","serverOffline","PeerLandingComponent_ng_template_5_ng_template_10_ng_container_0_div_1_Template","PeerLandingComponent_ng_template_5_ng_template_10_ng_container_0_div_2_Template","ctx_r30","isMobileDevice","isIncompatibleBrowser","PeerLandingComponent_ng_template_5_ng_template_10_ng_container_0_Template","ctx_r22","acceptedPeerConnections","PeerLandingComponent_ng_template_5_app_third_party_connections_40_Template_app_third_party_connections_openStateChanged_0_listener","$event","_r34","_r19","PeerLandingComponent_ng_template_5_Template_div_click_5_listener","_r36","PeerLandingComponent_ng_template_5_div_9_Template","PeerLandingComponent_ng_template_5_ng_template_10_Template","PeerLandingComponent_ng_template_5_Template_form_submit_12_listener","ctx_r37","joinSession","PeerLandingComponent_ng_template_5_span_28_Template","PeerLandingComponent_ng_template_5_span_29_Template","PeerLandingComponent_ng_template_5_span_36_Template","PeerLandingComponent_ng_template_5_span_37_Template","PeerLandingComponent_ng_template_5_app_third_party_connections_40_Template","ctx_r5","_r21","joinSessionFormGroup","PeerLandingComponent","session","required","ctrl","_validateSessionId","_validateJoinCode","socketServerConnected","state","uninitialized","platform","mobile","unsupported","_injectDashIfRequired","allowSignalWrites","resetRecogntionState","setJoinCode","markAllAsTouched","exp","RegExp","test","sessionControl","valueChanges","setValue","slice","hostBindings","PeerLandingComponent_HostBindings","ɵɵresolveWindow","PeerLandingComponent_div_1_Template","PeerLandingComponent_ng_template_2_Template","PeerLandingComponent_ng_container_4_Template","PeerLandingComponent_ng_template_5_Template","PeerLandingComponent_app_accept_peer_connections_modal_7_Template","_r4","ɵɵtextInterpolate1","PeerServerStatusChipComponent","reconnect","PeerServerStatusChipComponent_Template","PeerServerStatusChipComponent_Template_button_click_0_listener","PeerServerStatusChipComponent_ng_container_3_Template","PeerServerStatusChipComponent_ng_template_4_Template","ɵɵpureFunction3","RoomIdComponent_div_0_Template_div_click_0_listener","RoomIdComponent","RoomIdComponent_Template","RoomIdComponent_div_0_Template","RoomIdComponent_div_1_Template","SocketServerStatusChipComponent","SocketServerStatusChipComponent_Template","SocketServerStatusChipComponent_Template_button_click_0_listener","SocketServerStatusChipComponent_ng_container_3_Template","SocketServerStatusChipComponent_ng_template_4_Template","StreamCaptionsComponent","obs","sendCaption","StreamCaptionsComponent_Template","StreamCaptionsComponent_app_recognized_live_text_4_Template","StreamCaptionsComponent_div_5_Template","StreamCaptionsComponent_label_6_Template","ThirdPartyConnectionsComponent","openStateChanged","obsConnected","toggle","newState","checkbox","emit","ThirdPartyConnectionsComponent_Query","ThirdPartyConnectionsComponent_Template_div_click_3_listener","ThirdPartyConnectionsComponent_div_6_Template","interval","takeWhile","tap","selectBroadcastEndedTimestamp","ViewBroadcastComponent_ng_container_1_ng_container_1_div_1_div_4_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_1_Template_app_leave_session_dialogClosed_5_listener","_r14","ctx_r13","leaveSessionDialogClosed","showLeaveBroadcastDialog","ɵɵpureFunction0","ts_r15","ViewBroadcastComponent_ng_container_1_ng_container_1_div_3_div_1_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_3_ng_template_2_Template","_r17","ctx_r24","HOST_ONLINE_TIMEOUT_SECONDS","elapsed_r20","ViewBroadcastComponent_ng_container_1_ng_container_1_div_5_ng_container_1_span_1_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_5_ng_container_1_ng_template_2_Template","ctx_r21","_r25","ViewBroadcastComponent_ng_container_1_ng_container_1_div_5_ng_container_1_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_5_ng_template_2_Template","ctx_r11","_r22","ViewBroadcastComponent_ng_container_1_ng_container_1_div_1_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_2_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_3_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_app_broadcast_render_4_Template","ViewBroadcastComponent_ng_container_1_ng_container_1_div_5_Template","broadcastEndedTimestamp","verifyJoinCodeTimer","ViewBroadcastComponent_ng_container_1_ng_container_1_Template","ViewBroadcastComponent_ng_template_4_Template_form_submit_1_listener","_r32","ctx_r31","rejoin","ViewBroadcastComponent_ng_template_4_span_11_Template","ViewBroadcastComponent_ng_template_4_span_12_Template","ctx_r4","ViewBroadcastComponent","dialogClosedSubject","snapshot","params","toLowerCase","socketConnected","minLength","maxLength","_updateJoinCodeAndConnect","_joinRoom","hideFooter","showFooter","asObservable","newCode","_updateQueryParamsCode","confirmed","updatedJoinCode","code","ViewBroadcastComponent_HostBindings","ViewBroadcastComponent_ng_container_1_Template","ViewBroadcastComponent_ng_template_2_Template","ViewBroadcastComponent_ng_template_4_Template","RouterModule","routes","path","PeerRoutingModule","forChild","imports","exports","CommonModule","ReactiveFormsModule","NgIconsModule","EffectsModule","TranslateModule","ClipboardModule","MediaModule","TimeagoModule","SocketDebugComponent","SharedUiModule","PeerModule","extend","forFeature","declarations","EffectsFeatureModule","Socket","Peer","BehaviorSubject","Observable","ReplaySubject","timeout","CacheService","cache","CACHE_PERSIST_MINS","myBroadcast","peerMap","Map","SOCKET_URL","process","env","SOCKET_PORT","Number","SOCKET_CONFIG","url","options","reconnectionAttempts","PEER_URL","PEER_PORT","STUN_SERVER","TURN_SERVER","TURN_PASS","CONNECT_OPTS","debug","host","secure","config","iceServers","urls","credential","sessionJoinCode","peerCount","cached","load","myId","socket","removeAllListeners","sub","on","socketServerError","_disconnectAllPeers","data","key","expirationMins","user","peer","Error","_connectToPeer","connection","get","addListener","delete","close","clients","clientIds","expiredAt","setBroadcastEndedAt","endedAt","warn","removeListener","fromCache","_generateJoinCode","volatile","v","sendServerMessage","username","once","peerServerError","_reconnectPeerServer","connectionId","_handlePeerData","sendData","peerId","send","values","remove","complete","forEach","clear","tryNumber","thisTry","timerId","clearTimeout","_updateConnectedPeerCount","size","updateConnectedPeerCount","outString","inOptions","j","charAt","Math","floor","random","setHostStatus","request","_verifyJoinCode","response","clearJoinCode","setBroadcastPausedState","incomingCode","thisCode","providedIn","expirationMS","record","JSON","stringify","expiration","Date","getTime","hasExpiration","sessionStorage","setItem","item","getItem","parse","now","removeItem","cleansessionStorage","OBSWebSocket","from","errorReceived","_addObsListeners","isStreaming","pass","captionText","_this","_asyncToGenerator","call","then","setStreamingActive","active","outputActive","selectPeerState","userId","sendSocketDisconnected","sendUserIdAssigned","sendConnectPeerServer","standalone","features","ɵɵStandaloneFeature","SocketDebugComponent_Template","SocketDebugComponent_Template_button_click_1_listener","SocketDebugComponent_Template_button_click_3_listener","SocketDebugComponent_Template_button_click_5_listener","styles","root","module","define","amd","CryptoJS","crypto","window","self","globalThis","msCrypto","global","require","cryptoSecureRandomInt","getRandomValues","Uint32Array","randomBytes","readInt32LE","create","Object","F","obj","subtype","prototype","C","C_lib","lib","Base","overrides","mixIn","hasOwnProperty","init","$super","apply","arguments","instance","properties","propertyName","toString","clone","WordArray","words","sigBytes","encoder","Hex","concat","wordArray","thisWords","thatWords","thisSigBytes","thatSigBytes","clamp","i","thatByte","ceil","nBytes","push","C_enc","enc","hexChars","bite","join","hexStr","hexStrLength","parseInt","substr","Latin1","latin1Chars","String","fromCharCode","latin1Str","latin1StrLength","charCodeAt","Utf8","decodeURIComponent","escape","e","utf8Str","unescape","encodeURIComponent","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","doFlush","processedWords","dataWords","dataSigBytes","blockSize","blockSizeBytes","nBlocksReady","max","_minBufferSize","nWordsReady","nBytesReady","min","offset","_doProcessBlock","splice","Hasher","cfg","_doReset","update","messageUpdate","finalize","hash","_doFinalize","_createHelper","hasher","_createHmacHelper","C_algo","HMAC","algo","Base64","_map","base64Chars","byte1","byte2","byte3","triplet","paddingChar","base64Str","base64StrLength","reverseMap","_reverseMap","paddingIndex","indexOf","parseLoop","bits1","bits2","bitsCombined","H","K","isPrime","n","sqrtN","sqrt","factor","getFractionalBits","nPrime","pow","W","SHA256","_hash","M","a","b","c","d","f","g","h","gamma0x","gamma0","gamma1x","gamma1","ch","maj","sigma0","sigma1","t1","t2","nBitsTotal","nBitsLeft","HmacSHA256","formatArgs","useColors","storage","localstorage","destroy","warned","colors","__nwjs","navigator","userAgent","match","document","documentElement","style","WebkitAppearance","firebug","exception","table","$1","args","namespace","humanize","diff","color","index","lastC","replace","namespaces","r","DEBUG","localStorage","formatters","setup","createDebug","default","coerce","disable","enable","enabled","keys","names","skips","selectColor","abs","prevTime","enableOverride","namespacesCache","enabledCache","curr","ms","prev","unshift","format","formatter","val","logFn","defineProperty","enumerable","configurable","delimiter","newDebug","split","len","toNamespace","name","regexp","substring","stack","ws","WebSocket","MozWebSocket","s","m","w","y","isFinite","long","fmtLong","fmtShort","str","exec","parseFloat","msAbs","round","plural","isPlural","has","prefix","Events","__proto__","EE","fn","context","emitter","event","TypeError","listener","evt","_events","_eventsCount","clearEvent","eventNames","events","getOwnPropertySymbols","listeners","handlers","l","ee","Array","listenerCount","a1","a2","a3","a4","a5","off","prefixed","BufferBuilder","binaryFeatures","BinaryPack","unpack","unpacker","Unpacker","pack","packer","Packer","buffer","getBuffer","dataBuffer","dataView","Uint8Array","byteLength","unpack_uint8","unpack_raw","unpack_string","unpack_array","unpack_map","unpack_float","unpack_double","unpack_uint16","unpack_uint32","unpack_uint64","unpack_int8","unpack_int16","unpack_int32","unpack_int64","byte","bytes","read","uint16","uint32","uint64","uint8","buf","objects","sign","fraction","h32","l32","hfrac","frac","subarray","bufferBuilder","pack_string","pack_integer","pack_double","append","pack_array","Blob","File","pack_bin","ArrayBuffer","useArrayBufferView","startsWith","pack_object","toBinaryPack","flush","blob","pack_uint8","pack_uint16","pack_uint32","utf8Length","ary","num","pack_int8","pack_int16","pack_int32","pack_int64","pack_uint64","LN2","frac0","frac1","b32","prop","high","low","_utf8Replace","useBlobBuilder","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","_pieces","_parts","builder","ii","getBlob","SDPUtils","fixStatsType","stat","inboundrtp","outboundrtp","candidatepair","localcandidate","remotecandidate","writeMediaSection","transceiver","caps","stream","dtlsRole","sdp","writeRtpDescription","kind","writeIceParameters","iceGatherer","getLocalParameters","writeDtlsParameters","dtlsTransport","mid","rtpSender","rtpReceiver","trackId","_initialTrackId","track","msid","sendEncodingParameters","ssrc","rtx","localCName","filterIceServers","edgeVersion","hasTurn","server","isString","validTurn","getCommonCapabilities","localCapabilities","remoteCapabilities","commonCapabilities","codecs","headerExtensions","fecMechanisms","findCodecByPayloadType","pt","payloadType","preferredPayloadType","rtxCapabilityMatches","lRtx","rRtx","lCodecs","rCodecs","lCodec","parameters","apt","rCodec","clockRate","numChannels","rtcpFeedback","parameter","lHeaderExtension","rHeaderExtension","uri","isActionAllowedInSignalingState","action","signalingState","offer","setLocalDescription","setRemoteDescription","answer","maybeAddCandidate","iceTransport","candidate","alreadyAdded","getRemoteCandidates","find","remoteCandidate","foundation","priority","protocol","addRemoteCandidate","makeError","description","NotSupportedError","InvalidStateError","InvalidAccessError","OperationError","addTrackToStreamAndFireEvent","addTrack","dispatchEvent","MediaStreamTrackEvent","removeTrackFromStreamAndFireEvent","removeTrack","fireAddTrack","pc","receiver","streams","trackEvent","Event","_dispatchEvent","RTCPeerConnection","_eventTarget","createDocumentFragment","method","bind","canTrickleIceCandidates","needNegotiation","localStreams","remoteStreams","_localDescription","_remoteDescription","iceConnectionState","iceGatheringState","usingBundle","bundlePolicy","rtcpMuxPolicy","iceTransportPolicy","_iceGatherers","iceCandidatePoolSize","RTCIceGatherer","gatherPolicy","_config","transceivers","_sdpSessionId","generateSessionId","_sdpSessionVersion","_dtlsRole","_isClosed","onicecandidate","onaddstream","ontrack","onremovestream","onsignalingstatechange","oniceconnectionstatechange","onconnectionstatechange","onicegatheringstatechange","onnegotiationneeded","ondatachannel","_emitGatheringStateChange","getConfiguration","getLocalStreams","getRemoteStreams","_createTransceiver","doNotAdd","hasBundleTransport","recvEncodingParameters","associatedRemoteMediaStreams","wantReceive","transports","_createIceAndDtlsTransports","alreadyExists","_maybeFireNegotiationNeeded","RTCRtpSender","addStream","getTracks","clonedStream","idx","clonedTrack","addEventListener","sender","t","stop","removeStream","getSenders","getReceivers","_createIceGatherer","sdpMLineIndex","shift","writable","bufferedCandidateEvents","bufferCandidates","end","_gather","onlocalcandidate","removeEventListener","sdpMid","cand","ufrag","usernameFragment","serializedCandidate","writeCandidate","assign","parseCandidate","toJSON","sections","getMediaSections","getDescription","every","RTCIceTransport","onicestatechange","_updateIceConnectionState","_updateConnectionState","RTCDtlsTransport","ondtlsstatechange","onerror","_disposeIceAndDtlsTransports","_transceive","recv","encodings","rtcp","cname","compound","rtcpParameters","p","receive","Promise","reject","sessionpart","splitSections","mediaSection","parseRtpParameters","isIceLite","matchPrefix","rejected","isRejected","remoteIceParameters","getIceParameters","remoteDtlsParameters","getDtlsParameters","role","start","_updateSignalingState","resolve","receiverList","iceOptions","lines","splitLines","getKind","direction","getDirection","remoteMsid","parseMsid","getMid","generateIdentifier","parseRtpEncodingParameters","parseRtcpParameters","isComplete","cands","setTransport","setRemoteCandidates","RTCRtpReceiver","getCapabilities","codec","isNewTrack","MediaStream","nativeTrack","hasRtx","sid","states","closed","checking","completed","failed","new","createOffer","numAudioTracks","numVideoTracks","offerOptions","mandatory","optional","offerToReceiveAudio","offerToReceiveVideo","writeSessionBoilerplate","remoteCodec","hdrExt","remoteExtensions","rHdrExt","getLocalCandidates","desc","RTCSessionDescription","createAnswer","mediaSectionsInOffer","localTrack","getAudioTracks","getVideoTracks","reducedSize","addIceCandidate","candidateString","trim","getStats","selector","MediaStreamTrack","senderOrReceiver","promises","all","allStats","stats","ortcObjects","ortcObjectName","nativeGetstats","nativeStats","mapStats","methods","nativeMethod","asyncScheduler","timer","period","scheduler","operate","createOperatorSubscriber","predicate","inclusive","source","subscriber","result","line","parts","part","address","relatedAddress","relatedPort","tcpType","parseIceOptions","parseRtpMap","parsed","channels","writeRtpMap","parseExtmap","writeExtmap","headerExtension","preferredId","parseFmtp","kv","writeFmtp","param","parseRtcpFb","writeRtcpFb","parseSsrcMedia","sp","colon","attribute","parseSsrcGroup","semantics","ssrcs","parseFingerprint","algorithm","fingerprints","setupType","fp","parseCryptoLine","tag","cryptoSuite","keyParams","sessionParams","writeCryptoLine","writeCryptoKeyParams","parseCryptoKeyParams","keyMethod","keySalt","lifeTime","mkiValue","mkiLength","getCryptoParameters","pwd","mline","rtpmapline","fmtps","maxptime","extension","encodingParameters","hasRed","hasUlpfec","primarySsrc","secondarySsrc","flows","encParam","codecPayloadType","fec","mechanism","bandwidth","maxBitrate","remoteSsrc","rsize","mux","spec","planB","msidParts","parseSctpDescription","parseMLine","maxSizeLine","maxMessageSize","isNaN","sctpPort","fmt","sctpMapLines","writeSctpDescription","media","sctp","output","sessId","sessVer","sessUser","sessionId","version","parseOLine","sessionVersion","netType","addressType","isValidSDP","adapterFactory","adapter","utils","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","shimChrome","shimFirefox","shimEdge","shimSafari","logging","browserDetails","detectBrowser","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","browserShim","shimAddIceCandidateNullOrEmpty","shimGetUserMedia","shimMediaStream","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimGetStats","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimConnectionState","shimMaxMessageSize","shimSendThrowTypeError","removeExtmapAllowMixed","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimAddTransceiver","shimGetParameters","shimCreateOffer","shimCreateAnswer","shimGetDisplayMedia","shimReplaceTrack","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver","shimAudioContext","webkitMediaStream","_ontrack","origSetRemoteDescription","_ontrackpoly","te","wrapPeerConnectionEvent","shimSenderWithDtmf","dtmf","_dtmf","createDTMFSender","_pc","_senders","origAddTrack","origRemoveTrack","origAddStream","origRemoveStream","origGetSenders","senders","origGetStats","onSucc","onErr","fixChromeStats_","standardReport","reports","report","standardStats","timestamp","makeMapStats","successCallbackWrapper_","filterStats","origGetReceivers","receivers","srcElement","DOMException","shimAddTrackRemoveTrackWithNative","_shimmedLocalStreams","streamId","existingSenders","newSenders","newSender","origGetLocalStreams","nativeStreams","_reverseStreams","_streams","newStream","oldStream","replaceInternalStreamId","internalId","externalStream","internalStream","replaceExternalStreamId","methodObj","isLegacyCall","origSetLocalDescription","origLocalDescription","getOwnPropertyDescriptor","isLocal","streamid","hasTrack","webkitRTCPeerConnection","RTCIceCandidate","target","sdpSemantics","getSourceId","mediaDevices","getDisplayMedia","constraints","sourceId","widthSpecified","video","width","heightSpecified","height","frameRateSpecified","frameRate","chromeMediaSource","chromeMediaSourceId","maxFrameRate","maxWidth","maxHeight","getUserMedia","constraintsToChrome_","cc","ideal","exact","oldname_","oc","mix","advanced","shimConstraints_","func","audio","remap","face","facingMode","getSupportedFacingModeLies","getSupportedConstraints","matches","enumerateDevices","devices","dev","some","label","includes","deviceId","shimError_","PermissionDeniedError","PermissionDismissedError","DevicesNotFoundError","ConstraintNotSatisfiedError","TrackStartError","MediaDeviceFailedDueToShutdown","MediaDeviceKillSwitchOn","TabCaptureError","ScreenCaptureError","DeviceCaptureError","constraint","constraintName","getUserMedia_","onSuccess","onError","webkitGetUserMedia","origGetUserMedia","cs","NativeRTCIceCandidate","nativeCandidate","parsedCandidate","augmentedCandidate","_sctp","sctpInDescription","mLine","getRemoteFirefoxVersion","getCanSendMaxMessageSize","remoteIsFirefox","canSendMaxMessageSize","getMaxMessageSize","isFirefox","canSendMMS","remoteMMS","POSITIVE_INFINITY","wrapDcSend","dc","origDataChannelSend","readyState","origCreateDataChannel","createDataChannel","dataChannel","channel","proto","_onconnectionstatechange","cb","origMethod","_connectionstatechangepoly","_lastConnectionState","newEvent","nativeSRD","nativeAddIceCandidate","shimRTCPeerConnection","origMSTEnabled","ev","RTCDtmfSender","RTCDTMFSender","RTCPeerConnectionShim","replaceTrack","setTrack","deprecated","catch","RTCTrackEvent","mozRTCPeerConnection","modernStatsTypes","nativeGetStats","DataChannel","RTCDataChannel","origAddTransceiver","addTransceiver","setParametersPromises","initParameters","shouldPerformCheck","sendEncodings","encodingParam","ridRegex","rid","scaleResolutionDownBy","RangeError","maxFramerate","getParameters","setParameters","origGetParameters","origCreateOffer","finally","origCreateAnswer","preferredMediaSource","mediaSource","nativeGetUserMedia","getSettings","nativeGetSettings","applyConstraints","nativeApplyConstraints","_localStreams","_addTrack","tracks","_remoteStreams","_onaddstream","_onaddstreampoly","successCallback","failureCallback","promise","withCallback","_getUserMedia","shimConstraints","errcb","compactObject","OrigPeerConnection","pcConfig","pcConstraints","newIceServers","generateCertificate","audioTransceiver","getTransceivers","setDirection","videoTransceiver","AudioContext","webkitAudioContext","logDisabled_","deprecationWarnings_","uastring","expr","pos","eventNameToWrap","wrapper","nativeAddEventListener","nativeEventName","wrappedCallback","modifiedEvent","handleEvent","_eventMap","nativeRemoveEventListener","unwrappedCb","bool","oldMethod","newMethod","mozGetUserMedia","isSecureContext","supportsUnifiedPlan","RTCRtpTransceiver","isObject","reduce","accumulator","isObj","isEmptyObject","walkStats","base","resultSet","endsWith","outbound","streamStatsType","filteredResult","trackStats","trackIdentifier","trackStat","Emitter","mixin","_callbacks","callbacks","emitReserved","hasListeners","XMLHttpRequest","hasCORS","encode","decode","qs","qry","pairs","pair","re","src","authority","ipv6uri","pathNames","queryKey","regx","query","$0","$2","alphabet","seed","encoded","decoded","yeast","globalThisShim","Function","Transport","installTimerFunctions","nextTick","opts","writeBuffer","hostname","location","prevBufferLen","agent","withCredentials","upgrade","timestampParam","rememberUpgrade","addTrailingSlash","rejectUnauthorized","perMessageDeflate","threshold","transportOptions","closeOnBeforeunload","upgrades","pingInterval","pingTimeout","pingTimeoutTimer","beforeunloadEventListener","transport","offlineEventListener","onClose","createTransport","EIO","priorWebsocketSuccess","setTimeoutFn","onDrain","onPacket","reason","probe","onTransportOpen","msg","upgrading","pause","cleanup","freezeTransport","onTransportClose","onclose","onupgrade","to","onOpen","packet","onHandshake","resetPingTimeout","sendPacket","filterUpgrades","maxPayload","clearTimeoutFn","autoUnref","unref","packets","getWritablePackets","shouldCheckPayloadSize","payloadSize","write","compress","cleanupAndClose","waitForUpgrade","filteredUpgrades","decodePacket","TransportError","doOpen","doClose","onData","binaryType","details","onPause","createUri","schema","_hostname","_port","_query","encodedQuery","Polling","WS","WT","websocket","webtransport","polling","encodePayload","decodePayload","createCookieJar","XHR","pick","empty","hasXHR2","xhr","xdomain","responseType","isSSL","xd","forceBase64","supportsBinary","cookieJar","poll","total","doPoll","callback","doWrite","timestampRequests","b64","Request","req","xhrStatus","pollXhr","_a","extraHeaders","setDisableHeaderCheck","setRequestHeader","addCookies","requestTimeout","onreadystatechange","parseCookies","onLoad","requestsCount","requests","fromError","abort","responseText","attachEvent","unloadHandler","terminationEvent","isPromiseAvailable","usingBrowserWebSocket","defaultBinaryType","encodePacket","isReactNative","product","check","protocols","headers","addEventListeners","onopen","_socket","closeEvent","onmessage","lastPacket","Buffer","encodePacketToBinary","decodePacketFromBinary","shouldIncludeBinaryHeader","WebTransport","ready","createBidirectionalStream","reader","readable","getReader","writer","getWriter","binaryFlag","done","handshake","TextEncoder","attr","acc","k","NATIVE_SET_TIMEOUT","NATIVE_CLEAR_TIMEOUT","useNativeTimers","BASE64_OVERHEAD","PACKET_TYPES","PACKET_TYPES_REVERSE","ERROR_PACKET","chars","lookup","arraybuffer","base64","bufferLength","encoded1","encoded2","encoded3","encoded4","withNativeArrayBuffer","encodedPacket","mapBinary","decodeBase64Packet","packetType","withNativeBlob","isView","encodeBlobAsBase64","fileReader","FileReader","onload","content","readAsDataURL","toArray","byteOffset","TEXT_ENCODER","arrayBuffer","SEPARATOR","encodedPackets","encodedPayload","decodedPacket","TEXT_DECODER","isBinary","TextDecoder","isPlainBinary","DOCUMENT","Injectable","Inject","Optional","Directive","Input","Output","NgModule","WINDOW","ClipboardService","ngZone","copySubject","copyResponse$","configure","copy","isSupported","pushCopyResponse","isSuccess","copyResult","copyFromContent","queryCommandSupported","isTargetValid","element","HTMLInputElement","HTMLTextAreaElement","hasAttribute","copyFromInputElement","targetElm","isFocus","selectTarget","copyText","clearSelection","isCopySuccessInIE11","clipboardData","getData","container","body","tempTextArea","contains","parentElement","createTempTextArea","appendChild","toReturn","cleanUpAfterCopy","removeChild","inputElement","setSelectionRange","execCommand","focus","getSelection","removeAllRanges","doc","isRTL","getAttribute","ta","createElement","fontSize","border","padding","margin","position","yPosition","pageYOffset","scrollTop","top","observers","run","pushCopyReponse","ClipboardService_Factory","NgZone","ɵprov","ɵɵdefineInjectable","token","ngDevMode","ɵsetClassMetadata","decorators","ClipboardDirective","clipboardSrv","cbOnSuccess","cbOnError","onClick","handleResult","cbContent","runOutsideAngular","clickListener","listen","succeeded","copiedContent","successMessage","cbSuccessMsg","observed","ClipboardDirective_Factory","ɵdir","ɵɵdefineDirective","outputs","ClipboardIfSupportedDirective","_clipboardService","_viewContainerRef","_templateRef","createEmbeddedView","ClipboardIfSupportedDirective_Factory","ViewContainerRef","TemplateRef","ClipboardModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","InjectionToken","share","io","WrappedSocket","subscribersCounter","eventObservables$","emptyConfig","ioFunc","ioSocket","eventName","_close","_eventName","_args","_callback","fromEvent","observer","fromOneTimeEvent","listenersAny","listenersAnyOutgoing","offAny","onAny","onAnyOutgoing","prependAny","prependAnyOutgoing","SocketFactory","SOCKET_CONFIG_TOKEN","SocketIoModule","forRoot","ngModule","providers","provide","useValue","useFactory","deps","SocketIoModule_Factory","WebSocketIpml","sha256","_extends","_objectWithoutPropertiesLoose","excluded","sourceKeys","WebSocketOpCode","EventSubscription","RequestBatchExecutionType","authenticationHashing","salt","challenge","_excluded","OBSWebSocketError","BaseOBSWebSocket","_identified","internalListeners","generateMessageId","requestCounter","identified","identificationParams","_this2","connectionClosedPromise","internalEventPromise","connectionErrorPromise","race","hello","createConnection","identify","_this3","CLOSED","reidentify","_this4","identifiedPromise","Identified","Reidentify","requestType","requestData","_this5","requestId","responsePromise","requestStatus","responseData","comment","callBatch","_this6","RequestBatch","_this7","_this$socket","connectionOpenedPromise","helloPromise","Hello","onMessage","_ref","_this8","authentication","rpcVersion","helloRest","Identify","op","_this9","encodeMessage","_this10","_this11","decodeMessage","eventType","eventData","RequestResponse","RequestBatchResponse","$kKvpS$peerjsjsbinarypack","$kKvpS$webrtcadapter","$parcel$export","$af8cf1f663f490f4$var$webRTCAdapter","$af8cf1f663f490f4$export$25be9502477c137d","class_1","isIOS","supportedBrowsers","minFirefoxVersion","minChromeVersion","minSafariVersion","isWebRTCSupported","isBrowserSupported","getBrowser","getVersion","validBrowser","isUnifiedPlanSupported","tempPc","supported","$06cb531ed7840f78$var$DEFAULT_CONFIG","$06cb531ed7840f78$var$Util","Util","CLOUD_HOST","CLOUD_PORT","chunkedBrowsers","Chrome","chrome","chunkedMTU","defaultConfig","browserVersion","supports","webRTC","audioVideo","binaryBlob","reliable","ordered","_dataCount","noop","validateId","chunk","chunks","$06cb531ed7840f78$export$7debb50ef11d5e0b","__peerData","blobToArrayBuffer","fr","readAsArrayBuffer","binaryStringToArrayBuffer","binary","byteArray","randomToken","isSecure","$26088d7da5b03f69$exports","$26088d7da5b03f69$export$ecd1fc136c422448","$ac9b757d51178e15$exports","$ac9b757d51178e15$var$has","$ac9b757d51178e15$var$prefix","$ac9b757d51178e15$var$Events","$ac9b757d51178e15$var$EE","$ac9b757d51178e15$var$addListener","$ac9b757d51178e15$var$clearEvent","$ac9b757d51178e15$var$EventEmitter","$1615705ecc6adca3$exports","$1615705ecc6adca3$export$243e62d78d3b544d","$1615705ecc6adca3$export$2e2bcd8739ae039","$1615705ecc6adca3$var$__read","__read","o","Symbol","iterator","ar","$1615705ecc6adca3$var$__spreadArray","__spreadArray","$1615705ecc6adca3$var$LOG_PREFIX","$1615705ecc6adca3$var$Logger","Logger","_logLevel","Disabled","logLevel","_i","All","_print","Warnings","Errors","setLogFunction","rest","$31d11a8d122cb4b7$exports","$31d11a8d122cb4b7$export$4798917dbf149b79","$60fadef21a2daafc$export$3157d57b4135e3bc","$60fadef21a2daafc$export$9547aaa2e39030ff","$60fadef21a2daafc$export$89f507cf986a947","$60fadef21a2daafc$export$3b5c4a4b6354f023","$60fadef21a2daafc$export$adb4a1754da6f10d","$0d1ed891c5cb27c0$exports","$31d11a8d122cb4b7$var$__extends","__extends","extendStatics","d1","b1","setPrototypeOf","__","$31d11a8d122cb4b7$var$__read","$31d11a8d122cb4b7$var$__spreadArray","$31d11a8d122cb4b7$var$__values","__values","_super","_disconnected","_messagesQueue","wsProtocol","_baseUrl","_id","wsUrl","Message","_cleanup","Disconnected","_sendQueuedMessages","_scheduleHeartbeat","_wsPingTimer","_sendHeartbeat","_wsOpen","Heartbeat","e_1","copiedQueue","copiedQueue_1","copiedQueue_1_1","e_1_1","return","$353dee38f9ab557b$exports","$353dee38f9ab557b$export$4a84e95a2324ac29","$77f14d3e81888156$exports","$77f14d3e81888156$export$89e6bb5ad64bf4a","$77f14d3e81888156$var$__assign","__assign","$77f14d3e81888156$var$__awaiter","__awaiter","thisArg","_arguments","P","generator","adopt","fulfilled","step","$77f14d3e81888156$var$__generator","__generator","_","sent","trys","ops","verb","pop","startConnection","peerConnection","_startPeerConnection","Media","_stream","_addTracksToConnection","originator","Data","dataConnection","initialize","_makeOffer","handleSDP","provider","_setupListeners","connectionType","Candidate","payload","dst","getConnection","mediaConnection","_addStreamToMediaConnection","peerConnectionNotClosed","dataChannelNotClosed","err_2","err_1_1","sdpTransform","metadata","serialization","Offer","emitError","WebRTC","_makeAnswer","err_3","err_1_2","Answer","err_4","handleCandidate","ice","err_5","$0b3b332fd86c5202$exports","$0b3b332fd86c5202$export$23a2a68283c24d80","$0b3b332fd86c5202$var$__extends","_open","$353dee38f9ab557b$var$__extends","$353dee38f9ab557b$var$__assign","$353dee38f9ab557b$var$__values","_localStream","ID_PREFIX","_negotiator","Negotiator","_remoteStream","remoteStream","handleMessage","_payload","messages","_getMessages","messages_1","messages_1_1","_removeConnection","BaseConnection","$3356170d7bce7f20$exports","$3356170d7bce7f20$export$d365f7ad9d7df9c9","$3014d862dcc9946b$exports","$3014d862dcc9946b$export$c6913ae0ed687038","$3014d862dcc9946b$var$__extends","_queue","_processing","doNextTask","queue","enque","processing","$3356170d7bce7f20$var$__extends","$3356170d7bce7f20$var$__values","_buffer","_bufferSize","_buffering","_chunkedData","_encodingQueue","EncodingQueue","Binary","ab","_bufferedSend","_dc","_configureDataChannel","_handleDataMessage","datatype","isBinarySerialization","BinaryUTF8","deserializedData","unpackedData","ab1","_handleChunk","chunkInfo","data_1","chunked","_sendChunks","_trySend","bufferedAmount","MAX_BUFFERED_AMOUNT","_tryBuffer","blobs","blobs_1","blobs_1_1","blob_1","$9e85b3e1327369e6$exports","$9e85b3e1327369e6$export$2c4e825dc9120f87","$9e85b3e1327369e6$var$__awaiter","$9e85b3e1327369e6$var$__generator","_options","_buildRequest","URL","searchParams","fetch","href","referrerPolicy","retrieveId","error_1","pathError","listAllPeers","helpfulError","error_2","json","$26088d7da5b03f69$var$__extends","$26088d7da5b03f69$var$__assign","$26088d7da5b03f69$var$__values","$26088d7da5b03f69$var$__read","$26088d7da5b03f69$var$PeerOptions","PeerOptions","id1","_lastServerId","_destroyed","_connections","_lostMessages","DEFAULT_KEY","logFunction","_api","API","_createServerConnection","_delayedAbort","BrowserIncompatible","InvalidID","_initialize","_abort","ServerError","plainConnections","_b","_c","_d","_handleMessage","SocketError","Network","Close","SocketClosed","e_2","Open","IdTaken","UnavailableID","InvalidKey","Leave","_cleanupPeer","Expire","PeerUnavailable","MediaConnection","_addConnection","DataConnection","message_1","e_2_1","_storeMessage","connections","e_3","connections_1","connections_1_1","e_3_1","destroyed","e_4","e_4_1","e_5","connections_2","connections_2_1","e_5_1","currentId","peers","$70d766613f57b014$export$2e2bcd8739ae039","util","Backoff","jitter","attempts","duration","rand","deviation","setMin","setMax","setJitter","Manager","sameNamespace","newConnection","forceNew","multiplex","Engine","parser","nsps","subs","reconnection","Infinity","reconnectionDelay","reconnectionDelayMax","randomizationFactor","backoff","_readyState","_parser","Encoder","decoder","Decoder","_autoConnect","autoConnect","_reconnection","_reconnectionAttempts","_reconnectionDelay","_randomizationFactor","_reconnectionDelayMax","_timeout","maybeReconnectOnOpen","_reconnecting","engine","skipReconnect","openSubDestroy","errorSub","onping","ondata","ondecoded","add","nsp","_destroy","_packet","subDestroy","delay","onreconnect","attempt","PacketType","RESERVED_EVENTS","freeze","connect_error","disconnecting","newListener","recovered","receiveBuffer","sendBuffer","_queueSeq","ids","acks","flags","auth","_opts","subEvents","onpacket","retries","fromQueue","_addToQueue","EVENT","ack","_registerAckCallback","isTransportWritable","discardPacket","notifyOutgoingListeners","ackTimeout","emitWithAck","withErr","arg1","arg2","tryCount","pending","responseArgs","_drainQueue","force","_sendConnectPacket","CONNECT","_pid","pid","_lastOffset","onconnect","BINARY_EVENT","onevent","ACK","BINARY_ACK","onack","DISCONNECT","ondisconnect","CONNECT_ERROR","emitEvent","_anyListeners","emitBuffered","_anyOutgoingListeners","offAnyOutgoing","loc","ipv6","deconstructPacket","buffers","packetData","_deconstructPacket","attachments","placeholder","_placeholder","isArray","newData","reconstructPacket","_reconstructPacket","isIndexValid","hasBinary","replacer","encodeAsBinary","encodeAsString","deconstruction","reviver","reconstructor","decodeString","isBinaryEvent","BinaryReconstructor","takeBinaryData","tryParse","isPayloadValid","finishedReconstruction","reconPack","binData","withNativeFile"],"sourceRoot":"webpack:///","x_google_ignoreList":[42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108]}