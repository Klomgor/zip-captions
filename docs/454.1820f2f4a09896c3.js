"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[454],{9454:(q,b,l)=>{l.r(b),l.d(b,{SettingsModule:()=>w});var c=l(4755),s=l(9401),v=l(9812),x=l(5543),e=l(2223),u=l(5855),L=l(8784),d=l(7579),C=l(4004),g=l(2722),h=l(8675),Z=l(9841),S=l(4056),f=l(8783),p=l(4133),J=l(8603),i=l(9129),N=l(4367);function y(o,r){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"proper"),e.ALo(3,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,e.lcZ(3,4,"THEMES."+t.key)))}}let A=(()=>{class o{constructor(){this.themes=p.SJ}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-theme-selector"]],inputs:{group:"group",controlName:"controlName"},decls:6,vars:5,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.theme"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,y,4,6,"option",3),e.ALo(5,"keyvalue"),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",e.lcZ(5,3,n.themes)))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,i.Pi,c.Nd,N.w,i.X$]}),o})();function E(o,r){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"LANGUAGES."+t))}}let O=(()=>{class o{constructor(){this.languages=p.D}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-language-selector"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lang"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,E,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.languages))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,i.Pi,i.X$]}),o})();function G(o,r){1&o&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOn"),e.qZA())}function Q(o,r){1&o&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOff"),e.qZA())}let k=(()=>{class o{constructor(){this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new d.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,g.R)(this.onDestroy$),(0,h.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-wake-lock-enabled"]],inputs:{group:"group",controlName:"controlName"},decls:8,vars:4,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"cursor-pointer","label","bg-base-100","rounded-lg","ps-5","pe-3","py-4"],["class","label-text me-2","translate","",4,"ngIf","ngIfElse"],["isDisabledLabel",""],["type","checkbox",1,"checkbox","checkbox-primary",3,"formControlName"],["translate","",1,"label-text","me-2"]],template:function(t,n){if(1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.wakelock"),e.qZA(),e.TgZ(3,"label",2),e.YNc(4,G,2,0,"span",3),e.YNc(5,Q,2,0,"ng-template",null,4,e.W1O),e._UZ(7,"input",5),e.qZA()()),2&t){const a=e.MAs(6);e.Q6J("formGroup",n.group),e.xp6(4),e.Q6J("ngIf",n.isEnabled())("ngIfElse",a),e.xp6(3),e.Q6J("formControlName",n.controlName)}},dependencies:[c.O5,s.Wl,s.JJ,s.JL,s.sg,s.u,i.Pi]}),o})();function $(o,r){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"TEXT_SIZE."+t))}}let U=(()=>{class o{constructor(){this.availableTextSizes=p.xQ,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new d.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,g.R)(this.onDestroy$),(0,h.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-text-size"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.textSize"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,$,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.availableTextSizes))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,i.Pi,i.X$]}),o})();function z(o,r){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=r.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"LINE_HEIGHT."+t))}}let F=(()=>{class o{constructor(){this.availableHeights=p.JA,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new d.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,g.R)(this.onDestroy$),(0,h.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-line-height"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lineHeight"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,z,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.availableHeights))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,i.Pi,i.X$]}),o})();function H(o,r){1&o&&(e.TgZ(0,"div",18),e._uU(1,"You must accept cookies in order to save settings."),e.qZA())}const D=[{path:"",component:(()=>{class o{constructor(t,n,a,m,T,B){this.fb=t,this.store=n,this.renderer=a,this.el=m,this.router=T,this.translate=B,this.onDestroy$=new d.x,this.currentTheme=(0,u.O4)(this.store.select(f.FS)),this.language=(0,u.O4)(this.store.select(f.BX)),this.wakeLockEnabled=(0,u.O4)(this.store.select(f.VL)),this.currentTextSize=(0,u.O4)(this.store.select(f.MO)),this.currentLineHeight=(0,u.O4)(this.store.select(f.wx)),this.formGroup=this.fb.group({theme:this.fb.control(this.currentTheme()),lang:this.fb.control(this.language()),wakelock:this.fb.control(this.wakeLockEnabled()),textSize:this.fb.control(this.currentTextSize()),lineHeight:this.fb.control(this.currentLineHeight())}),this.acceptedCookies=(0,u.O4)(this.store.pipe((0,L.Ys)(J.hp),(0,C.U)(X=>X.cookiesAccepted))),this.classList=(0,e.tdS)(`recognized-text ${this.currentTextSize()} ${this.currentLineHeight()}`)}ngOnInit(){this.acceptedCookies()&&this.store.dispatch(S.ql.hideFooter()),this.formGroup.get("theme")?.valueChanges.pipe((0,g.R)(this.onDestroy$)).subscribe(a=>{a&&this.renderer.setAttribute(this.el.nativeElement,"data-theme",a)}),this.formGroup.get("lang")?.valueChanges.pipe((0,g.R)(this.onDestroy$)).subscribe(a=>{a&&this.translate.use(a).subscribe(()=>{})});const t=this.formGroup.get("textSize").valueChanges.pipe((0,h.O)(this.currentTextSize())),n=this.formGroup.get("lineHeight").valueChanges.pipe((0,h.O)(this.currentLineHeight()));(0,Z.a)([t,n]).pipe((0,g.R)(this.onDestroy$)).subscribe(([a,m])=>{a&&m&&this._updateClassList(a,m)})}ngOnDestroy(){this.formGroup.dirty&&this.translate.use(this.language()),this.store.dispatch(S.ql.showFooter()),this.onDestroy$.next()}saveSettings(){const t=this.formGroup.get("theme").value;this.store.dispatch(p.Vp.setTheme({theme:t}));const n=this.formGroup.get("lang").value;this.store.dispatch(p.Vp.setLanguage({language:n}));const a=this.formGroup.get("wakelock").value;this.store.dispatch(p.Vp.updateWakeLockEnabled({enabled:a}));const m=this.formGroup.get("textSize").value;this.store.dispatch(p.Vp.setTextSize({size:m}));const T=this.formGroup.get("lineHeight").value;return this.store.dispatch(p.Vp.setLineHeight({height:T})),this.router.navigate([""]),!1}_updateClassList(t,n){console.log("updateClassList",t,n),this.classList.set(`recognized-text ${t} ${n}`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(L.yh),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(v.F0),e.Y36(i.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings"]],decls:27,vars:11,consts:[[1,"flex","basis-full","items-stretch","justify-center","bg-base-300"],[1,"flex","flex-col","basis-full","p-3","sm:p-6","gap-3","sm:gap-12","max-w-4xl",3,"formGroup","submit"],[1,"basis-full","grid","sm:grid-cols-1","md:grid-cols-2","gap-3","sm:gap-12"],["controlName","theme",3,"group"],["controlName","lang",3,"group"],["controlName","wakelock",3,"group"],[1,"grid","grid-cols-2","gap-3"],["controlName","textSize",3,"group"],["controlName","lineHeight",3,"group"],[1,"form-control","overflow-y-auto"],[1,"label"],["translate","",1,"text-accent"],[1,"bg-base-100","text-base-content","p-6","gap-3","overflow-hidden","rounded-lg"],["translate","",3,"classList"],[1,"flex","w-full","justify-end","items-center","gap-1","sm:gap-3"],["class","text-error text-sm",4,"ngIf"],["translate","","type","button","routerLink","..",1,"btn","btn-ghost","rounded-xl"],["type","submit","translate","",1,"btn","btn-primary","rounded-xl",3,"disabled"],[1,"text-error","text-sm"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return n.saveSettings()}),e.TgZ(2,"div",2)(3,"div"),e._UZ(4,"app-theme-selector",3)(5,"app-language-selector",4)(6,"app-wake-lock-enabled",5),e.TgZ(7,"div",6),e._UZ(8,"app-text-size",7)(9,"app-line-height",8),e.qZA()(),e.TgZ(10,"div",9)(11,"div",10)(12,"label",11),e._uU(13,"SETTINGS.t1"),e.qZA()(),e.TgZ(14,"div",12)(15,"div",13),e._uU(16," SETTINGS.p1 "),e.qZA(),e.TgZ(17,"div",13),e._uU(18," SETTINGS.p3 "),e.qZA(),e.TgZ(19,"div",13),e._uU(20," SETTINGS.p4 "),e.qZA()()()(),e.TgZ(21,"footer",14),e.YNc(22,H,2,0,"div",15),e.TgZ(23,"button",16),e._uU(24," BUTTONS.cancel "),e.qZA(),e.TgZ(25,"button",17),e._uU(26," BUTTONS.saveAndClose "),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(3),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(2),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(6),e.Q6J("classList",n.classList()),e.xp6(2),e.Q6J("classList",n.classList()),e.xp6(2),e.Q6J("classList",n.classList()+" live pt-3"),e.xp6(3),e.Q6J("ngIf",!n.acceptedCookies()),e.xp6(3),e.Q6J("disabled",!1===n.acceptedCookies()||n.formGroup.pristine))},dependencies:[c.O5,s._Y,s.JL,s.sg,v.rH,i.Pi,A,O,k,U,F]}),o})()}];var Y=l(9507),I=l(4410);let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,x.e,s.UX,v.Bz.forChild(D),Y.sQ.forFeature([I.t]),i.aw.forChild({extend:!0})]}),o})()}}]);