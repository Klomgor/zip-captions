(()=>{const t=new class a{constructor(){this.messageHistoryMap=new Map}addToThread(e,i){const r=this.messageHistoryMap.get(e)||[];r.push(i),this.messageHistoryMap.set(e,r)}getMessagesFromThread(e){return this.messageHistoryMap.get(e)}};addEventListener("message",({data:s})=>{try{switch(s.type){case"put":t.addToThread(s.id,s.message),postMessage({id:s.id,status:"OK"});break;case"get":postMessage({id:s.id,status:"OK",messages:t.getMessagesFromThread(s.id)});break;default:postMessage({id:s.id,status:"BAD REQUEST"})}}catch(e){postMessage({id:s.id,status:"FAILED",error:e.message})}})})();