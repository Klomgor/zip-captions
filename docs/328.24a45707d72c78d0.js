"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[328],{6328:(K,Z,r)=>{r.r(Z),r.d(Z,{SettingsModule:()=>j});var c=r(4755),s=r(9401),C=r(9812),y=r(5543),e=r(2223),u=r(5855),x=r(8784),h=r(7579),g=r(8675),N=r(9300),J=r(4004),d=r(2722),O=r(9841),A=r(5698),U=r(8603),f=r(8783),p=r(4133),S=r(9124),l=r(9129);const G=["unsavedChangesModal"];let L=(()=>{class o{set openModal(t){t&&!this.modalOpen()?this.modalOpen.set(!0):!1===t&&this.modalOpen()&&this.modalOpen.set(!1)}constructor(){this.afterClosed=new e.vpe,this.modalOpen=(0,e.tdS)(!1)}accept(){this.modalOpen.set(!1),this.afterClosed.emit(!0)}decline(){this.modalOpen.set(!1),this.afterClosed.emit(!1)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-unsaved-changes-dialog"]],viewQuery:function(t,n){if(1&t&&e.Gf(G,5,e.SBq),2&t){let i;e.iGM(i=e.CRH())&&(n.modal=i.first)}},inputs:{openModal:"openModal"},outputs:{afterClosed:"afterClosed"},standalone:!0,features:[e.jDz],decls:12,vars:1,consts:[[1,"modal","modal-bottom","sm:modal-middle",3,"open"],["unsavedChangesModal",""],[1,"modal-box"],["translate","",1,"font-bold","text-lg"],["translate","",1,"text-sm","my-3"],[1,"modal-action","gap-3"],["translate","",1,"btn","btn-primary",3,"click"],["translate","",1,"btn",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"dialog",0,1)(2,"div",2)(3,"h1",3),e._uU(4,"MODAL.unsavedChangesTitle"),e.qZA(),e.TgZ(5,"p",4),e._uU(6," MODAL.unsavedChangesParagraph "),e.qZA(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.accept()}),e._uU(9,"BUTTONS.confirm"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return n.decline()}),e._uU(11,"BUTTONS.goBack"),e.qZA()()()()),2&t&&e.Q6J("open",n.modalOpen())},dependencies:[c.ez,l.aw,l.Pi]}),o})();var E=r(4367);function Q(o,a){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"proper"),e.ALo(3,"translate"),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.value),e.xp6(1),e.Oqu(e.lcZ(2,2,e.lcZ(3,4,"THEMES."+t.key)))}}let H=(()=>{class o{constructor(){this.themes=p.SJ}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-theme-selector"]],inputs:{group:"group",controlName:"controlName"},decls:6,vars:5,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.theme"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,Q,4,6,"option",3),e.ALo(5,"keyvalue"),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",e.lcZ(5,3,n.themes)))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,l.Pi,c.Nd,E.w,l.X$]}),o})();function k(o,a){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"LANGUAGES."+t))}}let D=(()=>{class o{constructor(){this.languages=p.D}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-language-selector"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lang"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,k,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.languages))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,l.Pi,l.X$]}),o})();function $(o,a){1&o&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOn"),e.qZA())}function F(o,a){1&o&&(e.TgZ(0,"span",6),e._uU(1,"LABELS.wakelockOff"),e.qZA())}let w=(()=>{class o{constructor(){this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new h.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,d.R)(this.onDestroy$),(0,g.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-wake-lock-enabled"]],inputs:{group:"group",controlName:"controlName"},decls:8,vars:4,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"cursor-pointer","label","bg-base-100","rounded-lg","ps-5","pe-3","py-4"],["class","label-text me-2","translate","",4,"ngIf","ngIfElse"],["isDisabledLabel",""],["type","checkbox",1,"checkbox","checkbox-primary",3,"formControlName"],["translate","",1,"label-text","me-2"]],template:function(t,n){if(1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.wakelock"),e.qZA(),e.TgZ(3,"label",2),e.YNc(4,$,2,0,"span",3),e.YNc(5,F,2,0,"ng-template",null,4,e.W1O),e._UZ(7,"input",5),e.qZA()()),2&t){const i=e.MAs(6);e.Q6J("formGroup",n.group),e.xp6(4),e.Q6J("ngIf",n.isEnabled())("ngIfElse",i),e.xp6(3),e.Q6J("formControlName",n.controlName)}},dependencies:[c.O5,s.Wl,s.JJ,s.JL,s.sg,s.u,l.Pi]}),o})();function z(o,a){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"TEXT_SIZE."+t))}}let I=(()=>{class o{constructor(){this.availableTextSizes=p.xQ,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new h.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,d.R)(this.onDestroy$),(0,g.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-text-size"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.textSize"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,z,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.availableTextSizes))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,l.Pi,l.X$]}),o})();function Y(o,a){if(1&o&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(e.lcZ(2,2,"LINE_HEIGHT."+t))}}let q=(()=>{class o{constructor(){this.availableHeights=p.JA,this.isEnabled=(0,e.tdS)(!0),this.onDestroy$=new h.x}ngOnInit(){const t=this.group.get(this.controlName);t.valueChanges.pipe((0,d.R)(this.onDestroy$),(0,g.O)(t.value)).subscribe(n=>this.isEnabled.set(n))}ngOnDestroy(){this.onDestroy$.next()}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-line-height"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.lineHeight"),e.qZA(),e.TgZ(3,"select",2),e.YNc(4,Y,3,4,"option",3),e.qZA()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName),e.xp6(1),e.Q6J("ngForOf",n.availableHeights))},dependencies:[c.sg,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.sg,s.u,l.Pi,l.X$]}),o})(),M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-render-history"]],inputs:{group:"group",controlName:"controlName"},decls:13,vars:2,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],["type","range","max","15","min","0",1,"range",3,"formControlName"],[1,"w-full","flex","justify-between","text-xs","px-2"]],template:function(t,n){1&t&&(e.TgZ(0,"label",0)(1,"span",1),e._uU(2,"LABELS.renderHistory"),e.qZA(),e._UZ(3,"input",2),e.TgZ(4,"div",3)(5,"span"),e._uU(6,"0"),e.qZA(),e.TgZ(7,"span"),e._uU(8,"5"),e.qZA(),e.TgZ(9,"span"),e._uU(10,"10"),e.qZA(),e.TgZ(11,"span"),e._uU(12,"15"),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.group),e.xp6(3),e.Q6J("formControlName",n.controlName))},dependencies:[s.Fj,s.eT,s.JJ,s.JL,s.sg,s.u,l.Pi]}),o})();function B(o,a){1&o&&(e.TgZ(0,"div",21),e._uU(1,"You must accept cookies in order to save settings."),e.qZA())}function _(o,a){if(1&o&&(e.TgZ(0,"div",19),e._uU(1," SETTINGS.p1 "),e.qZA()),2&o){const t=e.oxw();e.Q6J("classList",t.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}function X(o,a){if(1&o&&(e.TgZ(0,"div",19),e._uU(1," SETTINGS.p2 "),e.qZA()),2&o){const t=e.oxw();e.Q6J("classList",t.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}function R(o,a){if(1&o&&(e.TgZ(0,"div",19),e._uU(1," SETTINGS.p3 "),e.qZA()),2&o){const t=e.oxw();e.Q6J("classList",t.classList())("@fadeOutOnLeave",void 0)("@fadeInOnEnter",void 0)}}const P=[{path:"",component:(()=>{class o{constructor(t,n,i,m,T,b){this.fb=t,this.store=n,this.renderer=i,this.el=m,this.router=T,this.translate=b,this.modalClosed$=new h.x,this.onDestroy$=new h.x,this.currentTheme=(0,u.O4)(this.store.select(f.FS)),this.language=(0,u.O4)(this.store.select(f.BX)),this.wakeLockEnabled=(0,u.O4)(this.store.select(f.VL)),this.currentTextSize=(0,u.O4)(this.store.select(f.MO)),this.currentLineHeight=(0,u.O4)(this.store.select(f.wx)),this.renderHistory=(0,u.O4)(this.store.select(f.or)),this.formGroup=this.fb.group({theme:this.fb.control(this.currentTheme()),lang:this.fb.control(this.language()),wakelock:this.fb.control(this.wakeLockEnabled()),renderHistory:this.fb.control(this.renderHistory()),textSize:this.fb.control(this.currentTextSize()),lineHeight:this.fb.control(this.currentLineHeight())}),this.renderHistoryFormValue=(0,u.O4)(this.formGroup.controls.renderHistory.valueChanges.pipe((0,g.O)(this.renderHistory()),(0,N.h)(v=>null!==v&&!isNaN(v)))),this.acceptedCookies=(0,u.O4)(this.store.pipe((0,x.Ys)(U.hp),(0,J.U)(v=>v.cookiesAccepted))),this.classList=(0,e.tdS)(`recognized-text ${this.currentTextSize()} ${this.currentLineHeight()}`)}ngOnInit(){this.formGroup.get("theme")?.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(i=>{i&&this.renderer.setAttribute(this.el.nativeElement,"data-theme",i)}),this.formGroup.get("lang")?.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(i=>{i&&this.translate.use(i).subscribe(()=>{})});const t=this.formGroup.get("textSize").valueChanges.pipe((0,g.O)(this.currentTextSize())),n=this.formGroup.get("lineHeight").valueChanges.pipe((0,g.O)(this.currentLineHeight()));(0,O.a)([t,n]).pipe((0,d.R)(this.onDestroy$)).subscribe(([i,m])=>{i&&m&&this._updateClassList(i,m)})}ngOnDestroy(){this.formGroup.dirty&&this.translate.use(this.language()),this.onDestroy$.next()}canDeactivate(){return!this.formGroup.dirty||(this.showUnsavedChangesModal=!0,this.modalClosed$.asObservable().pipe((0,A.q)(1)))}modalClosed(t){this.showUnsavedChangesModal=!1,this.modalClosed$.next(t)}saveSettings(){const t=this.formGroup.get("theme").value;this.store.dispatch(p.Vp.setTheme({theme:t}));const n=this.formGroup.get("lang").value;this.store.dispatch(p.Vp.setLanguage({language:n}));const i=this.formGroup.get("wakelock").value;this.store.dispatch(p.Vp.updateWakeLockEnabled({enabled:i}));const m=this.formGroup.get("textSize").value;this.store.dispatch(p.Vp.setTextSize({size:m}));const T=this.formGroup.get("lineHeight").value;this.store.dispatch(p.Vp.setLineHeight({height:T}));const b=this.formGroup.get("renderHistory").value;return this.store.dispatch(p.Vp.setRenderHistory({count:b})),this.formGroup.markAsPristine(),this.router.navigate([""]),!1}_updateClassList(t,n){this.classList.set(`recognized-text ${t} ${n}`)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(s.qu),e.Y36(x.yh),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(C.F0),e.Y36(l.sK))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-settings"]],decls:29,vars:14,consts:[[1,"flex","basis-full","items-stretch","justify-center","bg-base-300"],[1,"flex","flex-col","basis-full","p-3","sm:p-6","gap-3","sm:gap-12","max-w-4xl",3,"formGroup","submit"],[1,"basis-full","grid","sm:grid-cols-1","md:grid-cols-2","gap-3","sm:gap-12"],["controlName","theme",3,"group"],["controlName","lang",3,"group"],["controlName","wakelock",3,"group"],["controlName","renderHistory",3,"group"],[1,"grid","grid-cols-2","gap-3"],["controlName","textSize",3,"group"],["controlName","lineHeight",3,"group"],[1,"flex","w-full","justify-end","items-center","gap-1","sm:gap-3"],["class","text-error text-sm",4,"ngIf"],["translate","","type","button","routerLink","..",1,"btn","btn-ghost","rounded-xl"],["type","submit","translate","",1,"btn","btn-primary","rounded-xl",3,"disabled"],[1,"form-control","overflow-y-auto"],[1,"label"],["translate","",1,"text-accent"],[1,"bg-base-100","text-base-content","p-6","gap-3","overflow-hidden","rounded-lg"],["translate","",3,"classList",4,"ngIf"],["translate","",3,"classList"],[3,"openModal","afterClosed"],[1,"text-error","text-sm"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return n.saveSettings()}),e.TgZ(2,"div",2)(3,"div"),e._UZ(4,"app-theme-selector",3)(5,"app-language-selector",4)(6,"app-wake-lock-enabled",5)(7,"app-render-history",6),e.TgZ(8,"div",7),e._UZ(9,"app-text-size",8)(10,"app-line-height",9),e.qZA()(),e.TgZ(11,"div")(12,"div",10),e.YNc(13,B,2,0,"div",11),e.TgZ(14,"button",12),e._uU(15," BUTTONS.cancel "),e.qZA(),e.TgZ(16,"button",13),e._uU(17," BUTTONS.saveAndClose "),e.qZA()(),e.TgZ(18,"div",14)(19,"div",15)(20,"label",16),e._uU(21,"SETTINGS.t1"),e.qZA()(),e.TgZ(22,"div",17),e.YNc(23,_,2,3,"div",18),e.YNc(24,X,2,3,"div",18),e.YNc(25,R,2,3,"div",18),e.TgZ(26,"div",19),e._uU(27," SETTINGS.p4 "),e.qZA()()()()()()(),e.TgZ(28,"app-unsaved-changes-dialog",20),e.NdJ("afterClosed",function(m){return n.modalClosed(m)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",n.formGroup),e.xp6(3),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(2),e.Q6J("group",n.formGroup),e.xp6(1),e.Q6J("group",n.formGroup),e.xp6(3),e.Q6J("ngIf",!n.acceptedCookies()),e.xp6(3),e.Q6J("disabled",!1===n.acceptedCookies()||n.formGroup.pristine),e.xp6(7),e.Q6J("ngIf",n.renderHistoryFormValue()>0),e.xp6(1),e.Q6J("ngIf",n.renderHistoryFormValue()>1),e.xp6(1),e.Q6J("ngIf",n.renderHistoryFormValue()>2),e.xp6(1),e.Q6J("classList",n.classList()+" live pt-3"),e.xp6(2),e.Q6J("openModal",n.showUnsavedChangesModal))},dependencies:[c.O5,s._Y,s.JL,s.sg,C.rH,l.Pi,L,H,D,w,I,q,M],data:{animation:[(0,S.QQ)(),(0,S.QP)()]}}),o})(),canDeactivate:[(o,a,t,n)=>o.canDeactivate?o.canDeactivate():confirm("You have unsaved changes, are you sure you want to leave?")]}];var V=r(9507),W=r(4410);let j=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[c.ez,y.e,s.UX,C.Bz.forChild(P),V.sQ.forFeature([W.t]),l.aw.forChild({extend:!0}),L]}),o})()}}]);