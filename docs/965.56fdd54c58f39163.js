"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[965],{7965:(M,b,n)=>{n.r(b),n.d(b,{SettingsModule:()=>B});var u=n(4755),a=n(9401),f=n(103),L=n(5543),h=n(5855),T=n(8784),S=n(7579),m=n(4004),d=n(2722),x=n(4056),v=n(8783),l=n(4133),Z=n(8603),t=n(2223),c=n(9129),C=n(4367);function k(e,r){if(1&e&&(t.TgZ(0,"option",4),t._uU(1),t.ALo(2,"proper"),t.ALo(3,"translate"),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(t.lcZ(2,2,t.lcZ(3,4,"THEMES."+o.key)))}}let y=(()=>{class e{constructor(){this.themes=l.SJ}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-theme-selector"]],inputs:{group:"group",controlName:"controlName"},decls:6,vars:5,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(t.TgZ(0,"label",0)(1,"span",1),t._uU(2,"LABELS.theme"),t.qZA(),t.TgZ(3,"select",2),t.YNc(4,k,4,6,"option",3),t.ALo(5,"keyvalue"),t.qZA()()),2&o&&(t.Q6J("formGroup",s.group),t.xp6(3),t.Q6J("formControlName",s.controlName),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,3,s.themes)))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,c.Pi,u.Nd,C.w,c.X$]}),e})();function E(e,r){if(1&e&&(t.TgZ(0,"option",4),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&e){const o=r.$implicit;t.Q6J("value",o),t.xp6(1),t.Oqu(t.lcZ(2,2,"LANGUAGES."+o))}}let N=(()=>{class e{constructor(){this.languages=l.D}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-language-selector"]],inputs:{group:"group",controlName:"controlName"},decls:5,vars:3,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"select","select-lg","mt-1","w-full",3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(o,s){1&o&&(t.TgZ(0,"label",0)(1,"span",1),t._uU(2,"LABELS.lang"),t.qZA(),t.TgZ(3,"select",2),t.YNc(4,E,3,4,"option",3),t.qZA()()),2&o&&(t.Q6J("formGroup",s.group),t.xp6(3),t.Q6J("formControlName",s.controlName),t.xp6(1),t.Q6J("ngForOf",s.languages))},dependencies:[u.sg,a.YN,a.Kr,a.EJ,a.JJ,a.JL,a.sg,a.u,c.Pi,c.X$]}),e})();var A=n(8675);function G(e,r){1&e&&(t.TgZ(0,"span",6),t._uU(1,"LABELS.wakelockOn"),t.qZA())}function J(e,r){1&e&&(t.TgZ(0,"span",6),t._uU(1,"LABELS.wakelockOff"),t.qZA())}let U=(()=>{class e{constructor(){this.isEnabled=(0,t.tdS)(!0),this.onDestroy$=new S.x}ngOnInit(){const o=this.group.get(this.controlName);o.valueChanges.pipe((0,d.R)(this.onDestroy$),(0,A.O)(o.value)).subscribe(s=>this.isEnabled.set(s))}ngOnDestroy(){this.onDestroy$.next()}}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-wake-lock-enabled"]],inputs:{group:"group",controlName:"controlName"},decls:8,vars:4,consts:[[1,"form-control",3,"formGroup"],["translate","",1,"text-accent","label"],[1,"cursor-pointer","label","bg-base-100","rounded-lg","ps-5","pe-3","py-4"],["class","label-text me-2","translate","",4,"ngIf","ngIfElse"],["isDisabledLabel",""],["type","checkbox",1,"checkbox","checkbox-primary",3,"formControlName"],["translate","",1,"label-text","me-2"]],template:function(o,s){if(1&o&&(t.TgZ(0,"label",0)(1,"span",1),t._uU(2,"LABELS.wakelock"),t.qZA(),t.TgZ(3,"label",2),t.YNc(4,G,2,0,"span",3),t.YNc(5,J,2,0,"ng-template",null,4,t.W1O),t._UZ(7,"input",5),t.qZA()()),2&o){const g=t.MAs(6);t.Q6J("formGroup",s.group),t.xp6(4),t.Q6J("ngIf",s.isEnabled())("ngIfElse",g),t.xp6(3),t.Q6J("formControlName",s.controlName)}},dependencies:[u.O5,a.Wl,a.JJ,a.JL,a.sg,a.u,c.Pi]}),e})();function O(e,r){1&e&&(t.TgZ(0,"div",17),t._uU(1,"You must accept cookies in order to save settings."),t.qZA())}const F=[{path:"",component:(()=>{class e{constructor(o,s,g,i,D,X){this.fb=o,this.store=s,this.renderer=g,this.el=i,this.router=D,this.translate=X,this.onDestroy$=new S.x,this.currentTheme=(0,h.O4)(this.store.select(v.FS)),this.language=(0,h.O4)(this.store.select(v.BX)),this.wakeLockEnabled=(0,h.O4)(this.store.select(v.VL)),this.formGroup=this.fb.group({theme:this.fb.control(this.currentTheme()),lang:this.fb.control(this.language()),wakelock:this.fb.control(this.wakeLockEnabled())}),this.acceptedCookies=(0,h.O4)(this.store.pipe((0,T.Ys)(Z.hp),(0,m.U)(w=>w.cookiesAccepted)))}ngOnInit(){this.acceptedCookies()&&this.store.dispatch(x.q.hideFooter()),this.formGroup.get("theme")?.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(o=>{o&&this.renderer.setAttribute(this.el.nativeElement,"data-theme",o)}),this.formGroup.get("lang")?.valueChanges.pipe((0,d.R)(this.onDestroy$)).subscribe(o=>{o&&this.translate.use(o).subscribe(()=>{})})}ngOnDestroy(){this.formGroup.dirty&&this.translate.use(this.language()),this.store.dispatch(x.q.showFooter()),this.onDestroy$.next()}saveSettings(){const o=this.formGroup.get("theme").value;this.store.dispatch(l.Vp.setTheme({theme:o}));const s=this.formGroup.get("lang").value;this.store.dispatch(l.Vp.setLanguage({language:s}));const g=this.formGroup.get("wakelock").value;this.store.dispatch(l.Vp.updateWakeLockEnabled({enabled:g})),this.router.navigate([""])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(a.qu),t.Y36(T.yh),t.Y36(t.Qsj),t.Y36(t.SBq),t.Y36(f.F0),t.Y36(c.sK))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-settings"]],decls:26,vars:6,consts:[[1,"flex","basis-full","items-stretch","justify-center","bg-base-300"],[1,"flex","flex-col","basis-full","p-3","sm:p-6","gap-3","sm:gap-12","max-w-4xl",3,"formGroup","submit"],[1,"basis-full","grid","sm:grid-cols-1","md:grid-cols-2","gap-3","sm:gap-12"],["controlName","theme",3,"group"],["controlName","lang",3,"group"],["controlName","wakelock",3,"group"],[1,"form-control","overflow-y-auto"],[1,"label"],["translate","",1,"text-accent"],[1,"bg-base-100","text-base-content","p-3","gap-1","sm:gap-3","rounded-sm"],["translate","",1,"text-sm","md:text-xl","p-3"],["translate","",1,"text-sm","md:text-xl","p-3","hidden","sm:flex","sm:visible"],["translate","",1,"bg-base-100","text-base-content","px-6","py-2","text-xl","sm:text-2xl","md:text-5xl","leading-relaxed"],[1,"flex","w-full","justify-end","items-center","gap-1","sm:gap-3"],["class","text-error text-sm",4,"ngIf"],["translate","","type","button","routerLink","..",1,"btn","btn-ghost","rounded-xl"],["type","submit","translate","",1,"btn","btn-primary","rounded-xl",3,"disabled"],[1,"text-error","text-sm"]],template:function(o,s){1&o&&(t.TgZ(0,"div",0)(1,"form",1),t.NdJ("submit",function(){return s.saveSettings()}),t.TgZ(2,"div",2)(3,"div"),t._UZ(4,"app-theme-selector",3)(5,"app-language-selector",4)(6,"app-wake-lock-enabled",5),t.qZA(),t.TgZ(7,"div",6)(8,"div",7)(9,"label",8),t._uU(10,"SETTINGS.t1"),t.qZA()(),t.TgZ(11,"div",9)(12,"div",10),t._uU(13," SETTINGS.p1 "),t.qZA(),t.TgZ(14,"div",11),t._uU(15," SETTINGS.p2 "),t.qZA(),t.TgZ(16,"div",10),t._uU(17," SETTINGS.p3 "),t.qZA()(),t.TgZ(18,"div",12),t._uU(19," SETTINGS.p4 "),t.qZA()()(),t.TgZ(20,"footer",13),t.YNc(21,O,2,0,"div",14),t.TgZ(22,"button",15),t._uU(23," BUTTONS.cancel "),t.qZA(),t.TgZ(24,"button",16),t._uU(25," BUTTONS.saveAndClose "),t.qZA()()()()),2&o&&(t.xp6(1),t.Q6J("formGroup",s.formGroup),t.xp6(3),t.Q6J("group",s.formGroup),t.xp6(1),t.Q6J("group",s.formGroup),t.xp6(1),t.Q6J("group",s.formGroup),t.xp6(15),t.Q6J("ngIf",!s.acceptedCookies()),t.xp6(3),t.Q6J("disabled",!1===s.acceptedCookies()||s.formGroup.pristine))},dependencies:[u.O5,a._Y,a.JL,a.sg,f.rH,c.Pi,y,N,U]}),e})()}];var p=n(9507),$=n(8505),Q=n(3900),W=n(262),Y=n(9646),V=n(9773);let I=(()=>{class e{constructor(o,s,g){this.actions$=o,this.storage=s,this.translate=g,this.init$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(l.Vp.initSettings),(0,m.U)(()=>this.storage.get("settings")),(0,m.U)(i=>l.Vp.initSettingsComplete({settings:i})))),this.applyTheme$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(l.Vp.setTheme),(0,m.U)(({theme:i})=>this.storage.update("settings","theme",i)),(0,m.U)(()=>l.Vp.setThemeComplete()))),this.applyLanguage$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(l.Vp.setLanguage),(0,$.b)(({language:i})=>this.storage.update("settings","lang",i)),(0,Q.w)(({language:i})=>this.translate.use(i)),(0,m.U)(()=>l.Vp.setLanguageComplete()))),this.applyWakeLock$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(l.Vp.updateWakeLockEnabled),(0,m.U)(({enabled:i})=>this.storage.update("settings","wakeLock",i)),(0,m.U)(()=>l.Vp.updateWakeLockEnabledSuccess()),(0,W.K)(i=>(0,Y.of)(l.Vp.updateWakeLockEnabledFailure({error:i.message})))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(p.eX),t.LFG(V.V),t.LFG(c.sK))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})(),B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[u.ez,L.e,a.UX,f.Bz.forChild(F),p.sQ.forFeature([I]),c.aw.forChild({extend:!0})]}),e})()}}]);